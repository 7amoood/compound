const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-a4e4k-V6.js","assets/vendor-tvXOKrQx.js","assets/Modal-CyPPNluF.js","assets/Modal-DA7eKiM2.css","assets/Dashboard-CdXyEzhZ.css","assets/app-CUuLUKP6.css","assets/Login-C_6zl4Wh.js","assets/Login-DVkUkv3A.css","assets/Dashboard-BVnS7d2I.js","assets/PullToRefresh-DucIg1c8.js","assets/PullToRefresh-Dm6APd8e.css","assets/firebase-DlAFpTEV.js","assets/Dashboard-Fzw0ZDKB.css","assets/Dashboard-DMvtRT4c.js","assets/Dashboard-DmczMQCX.css","assets/Help-aQZ1D2au.js","assets/Settings-ocvmCXt6.js","assets/Settings-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{a as C,c as u,b as x,d as e,e as _,o as d,f as A,w as v,t as b,g as M,T as g,h as k,F as L,i as T,r as P,j as R,k as w}from"./vendor-tvXOKrQx.js";/* empty css            */const D="modulepreload",N=function(s){return"/build/"+s},E={},f=function(t,i,r){let o=Promise.resolve();if(i&&i.length>0){let I=function(l){return Promise.all(l.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),c=n?.nonce||n?.getAttribute("nonce");o=I(i.map(l=>{if(l=N(l),l in E)return;E[l]=!0;const p=l.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":D,p||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),p)return new Promise((O,S)=>{m.addEventListener("load",O),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(n){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n}return o.then(n=>{for(const c of n||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};window.axios=C;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";async function j(s,t){for(const i of Array.isArray(s)?s:[s]){const r=t[i];if(!(typeof r>"u"))return typeof r=="function"?r():r}throw new Error(`Page not found: ${s}`)}const y=(s,t)=>{const i=s.__vccOpts||s;for(const[r,o]of t)i[r]=o;return i},B={data(){return{deferredPrompt:null,showOverlay:!1,isIOS:!1}},mounted(){this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||(window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showOverlay=!0}),this.isIOS&&(this.showOverlay=!0))},methods:{async installApp(){if(!this.deferredPrompt){this.isIOS&&window.showToast("اتبع تعليمات الإضافة في الأسفل","info");return}this.deferredPrompt.prompt();const{outcome:s}=await this.deferredPrompt.userChoice;s==="accepted"&&(console.log("User accepted the install prompt"),this.showOverlay=!1),this.deferredPrompt=null}}},q={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-6 overflow-hidden"},V={class:"relative w-full max-w-sm bg-white dark:bg-slate-800 rounded-3xl p-8 flex flex-col items-center text-center shadow-2xl animate-in fade-in zoom-in duration-300"},z={key:1,class:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-600"};function W(s,t,i,r,o,a){return o.showOverlay?(d(),u("div",q,[e("div",V,[t[4]||(t[4]=e("div",{class:"w-24 h-24 bg-primary/10 rounded-2xl flex items-center justify-center mb-6 shadow-inner tracking-tighter"},[e("img",{src:"/icons/icon-192x192.png",class:"w-16 h-16 object-contain",alt:"App Logo"})],-1)),t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-2"},"ثبّت التطبيق الآن",-1)),t[6]||(t[6]=e("p",{class:"text-slate-500 dark:text-slate-400 mb-8 leading-relaxed"}," للحصول على أفضل تجربة وأسرع وصول لخدمات المجمع، يرجى إضافة التطبيق إلى شاشتك الرئيسية. ",-1)),e("button",{onClick:t[0]||(t[0]=(...n)=>a.installApp&&a.installApp(...n)),class:"w-full bg-primary text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/30 hover:bg-blue-600 active:scale-95 transition-all mb-4 flex items-center justify-center gap-2"},[...t[2]||(t[2]=[e("span",{class:"material-symbols-outlined"},"download",-1),e("span",null,"تثبيت الآن",-1)])]),o.isIOS?x("",!0):(d(),u("button",{key:0,onClick:t[1]||(t[1]=n=>o.showOverlay=!1),class:"text-slate-400 dark:text-slate-500 text-sm font-medium hover:text-slate-600 dark:hover:text-slate-400 transition-colors"}," سأقوم بذلك لاحقاً ")),o.isIOS?(d(),u("div",z,[...t[3]||(t[3]=[e("p",{class:"text-xs text-slate-600 dark:text-slate-300 flex flex-col items-center gap-2"},[e("span",null,[_("لأجهزة iOS، اضغط على زر "),e("span",{class:"material-symbols-outlined text-[18px] align-middle"},"ios_share"),_(' ثم "إضافة للشاشة الرئيسية"')])],-1)])])):x("",!0)])])):x("",!0)}const U=y(B,[["render",W]]),$={name:"InAppNotification",data(){return{notification:null,timeout:null}},computed:{title(){return this.notification?.notification?.title||"إشعار جديد"},body(){return this.notification?.notification?.body||""},icon(){const s=this.notification?.data?.type;return{NEW_REQUEST:"potted_plant",NEW_PROPOSAL:"local_offer",PROPOSAL_ACCEPTED:"check_circle",WORK_COMPLETED:"verified",NEW_REVIEW:"star"}[s]||"notifications"}},mounted(){window.addEventListener("fcm-message",this.handleMessage)},beforeUnmount(){window.removeEventListener("fcm-message",this.handleMessage)},methods:{handleMessage(s){this.notification=s.detail,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.notification=null},6e3);try{const t=new Audio("/sounds/notification.wav");t.volume=.5,t.play()}catch(t){console.warn("Sound play failed",t)}},handleClick(){const s=this.notification?.data?.request_id;s&&window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(s)}})),this.notification=null}}},F={class:"size-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0"},H={class:"material-symbols-outlined text-primary text-2xl"},K={class:"flex-1 min-w-0"},X={class:"text-sm font-bold text-slate-900 dark:text-white truncate"},Q={class:"text-xs text-slate-500 dark:text-slate-400 mt-1 line-clamp-2"};function G(s,t,i,r,o,a){return d(),A(g,{name:"notif"},{default:v(()=>[o.notification?(d(),u("div",{key:0,onClick:t[1]||(t[1]=(...n)=>a.handleClick&&a.handleClick(...n)),class:"fixed left-4 right-4 z-[110] bg-white dark:bg-slate-800 shadow-2xl rounded-2xl p-4 border border-slate-100 dark:border-slate-700 flex items-start gap-4 cursor-pointer active:scale-95 transition-transform max-w-md mx-auto pointer-events-auto",style:{top:"max(1rem, calc(env(safe-area-inset-top) + 0.5rem))"},dir:"rtl"},[e("div",F,[e("span",H,b(a.icon),1)]),e("div",K,[e("h4",X,b(a.title),1),e("p",Q,b(a.body),1),t[2]||(t[2]=e("div",{class:"mt-2 flex items-center text-[10px] font-bold text-primary uppercase tracking-wider"},[e("span",null,"اضغط للتفاصيل"),e("span",{class:"material-symbols-outlined text-[14px] mr-1"},"chevron_left")],-1))]),e("button",{onClick:t[0]||(t[0]=M(n=>o.notification=null,["stop"])),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...t[3]||(t[3]=[e("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])])):x("",!0)]),_:1})}const J=y($,[["render",G],["__scopeId","data-v-db7824c5"]]),Y={name:"OpenInAppBanner",data(){return{showBanner:!1,showModal:!1,isStandalone:!1,isIOS:!1}},mounted(){this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.checkContext()},methods:{checkContext(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),this.isStandalone||sessionStorage.getItem("app_banner_dismissed")||setTimeout(()=>{this.showBanner=!0},2e3)},showInstructions(){this.showModal=!0},closeModal(){this.showModal=!1,this.dismiss()},dismiss(){this.showBanner=!1,sessionStorage.setItem("app_banner_dismissed","true")}}},Z={key:0,class:"fixed top-0 left-0 right-0 z-[9999] bg-gradient-to-r from-primary to-blue-600 text-white px-4 py-3 shadow-lg font-display",dir:"rtl",style:{"padding-top":"max(env(safe-area-inset-top), 12px)"}},tt={class:"max-w-md mx-auto flex items-center justify-between gap-3"},et={class:"flex items-center gap-2"},st={key:0,class:"fixed inset-0 z-[10000] flex items-center justify-center p-4 font-display",dir:"rtl"},at={class:"relative bg-white dark:bg-slate-800 rounded-2xl p-6 max-w-sm w-full shadow-2xl"},nt={class:"space-y-4 text-sm text-slate-600 dark:text-slate-300"},ot={key:0,class:"space-y-3"},it={key:1,class:"space-y-3"};function rt(s,t,i,r,o,a){return d(),u(L,null,[k(g,{name:"slide-down"},{default:v(()=>[o.showBanner?(d(),u("div",Z,[e("div",tt,[t[6]||(t[6]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"size-10 rounded-xl bg-white/20 flex items-center justify-center"},[e("span",{class:"material-symbols-outlined text-[24px]"},"phone_iphone")]),e("div",null,[e("p",{class:"text-sm font-bold"},"افتح التطبيق"),e("p",{class:"text-xs opacity-80"},"تجربة أفضل وأسرع")])],-1)),e("div",et,[e("button",{onClick:t[0]||(t[0]=(...n)=>a.showInstructions&&a.showInstructions(...n)),class:"bg-white text-primary px-4 py-2 rounded-lg text-sm font-bold shadow-sm active:scale-95 transition-transform"}," فتح "),e("button",{onClick:t[1]||(t[1]=(...n)=>a.dismiss&&a.dismiss(...n)),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[5]||(t[5]=[e("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):x("",!0)]),_:1}),k(g,{name:"fade"},{default:v(()=>[o.showModal?(d(),u("div",st,[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t[2]||(t[2]=(...n)=>a.closeModal&&a.closeModal(...n))}),e("div",at,[e("button",{onClick:t[3]||(t[3]=(...n)=>a.closeModal&&a.closeModal(...n)),class:"absolute top-4 left-4 text-slate-400 hover:text-slate-600"},[...t[7]||(t[7]=[e("span",{class:"material-symbols-outlined"},"close",-1)])]),t[10]||(t[10]=e("div",{class:"text-center mb-6"},[e("div",{class:"size-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4"},[e("span",{class:"material-symbols-outlined text-primary text-[32px]"},"phone_iphone")]),e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white"},"افتح من التطبيق")],-1)),e("div",nt,[o.isIOS?(d(),u("div",ot,[...t[8]||(t[8]=[e("p",{class:"font-bold text-slate-900 dark:text-white"},"إذا كان التطبيق مثبتاً:",-1),e("div",{class:"flex items-start gap-3 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl"},[e("span",{class:"material-symbols-outlined text-primary"},"touch_app"),e("span",null,"اضغط على أيقونة التطبيق من الشاشة الرئيسية")],-1),e("p",{class:"font-bold text-slate-900 dark:text-white pt-2"},"إذا لم يكن مثبتاً:",-1),e("div",{class:"flex items-start gap-3 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl"},[e("span",{class:"material-symbols-outlined text-primary"},"ios_share"),e("span",null,'اضغط على زر المشاركة ⬆️ ثم "إضافة إلى الشاشة الرئيسية"')],-1)])])):(d(),u("div",it,[...t[9]||(t[9]=[e("p",{class:"font-bold text-slate-900 dark:text-white"},"إذا كان التطبيق مثبتاً:",-1),e("div",{class:"flex items-start gap-3 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl"},[e("span",{class:"material-symbols-outlined text-primary"},"touch_app"),e("span",null,"اضغط على أيقونة التطبيق من الشاشة الرئيسية")],-1),e("p",{class:"font-bold text-slate-900 dark:text-white pt-2"},"إذا لم يكن مثبتاً:",-1),e("div",{class:"flex items-start gap-3 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl"},[e("span",{class:"material-symbols-outlined text-primary"},"more_vert"),e("span",null,'اضغط على قائمة المتصفح ⋮ ثم "تثبيت التطبيق" أو "إضافة إلى الشاشة الرئيسية"')],-1)])]))]),e("button",{onClick:t[4]||(t[4]=(...n)=>a.closeModal&&a.closeModal(...n)),class:"w-full mt-6 py-3 bg-primary text-white font-bold rounded-xl active:scale-[0.98] transition-transform"}," حسناً، فهمت ")])])):x("",!0)]),_:1})],64)}const lt=y(Y,[["render",rt],["__scopeId","data-v-66573ec6"]]);T({title:s=>`${s} - خدمات المجمع`,resolve:s=>j(`./Pages/${s}.vue`,Object.assign({"./Pages/Admin/Dashboard.vue":()=>f(()=>import("./Dashboard-a4e4k-V6.js"),__vite__mapDeps([0,1,2,3,4,5])),"./Pages/Auth/Login.vue":()=>f(()=>import("./Login-C_6zl4Wh.js"),__vite__mapDeps([6,1,7,5])),"./Pages/Provider/Dashboard.vue":()=>f(()=>import("./Dashboard-BVnS7d2I.js"),__vite__mapDeps([8,1,2,3,9,10,11,5,12])),"./Pages/Resident/Dashboard.vue":()=>f(()=>import("./Dashboard-DMvtRT4c.js"),__vite__mapDeps([13,1,2,3,9,10,11,5,14])),"./Pages/Resident/Help.vue":()=>f(()=>import("./Help-aQZ1D2au.js"),__vite__mapDeps([15,1,2,3,9,10,5])),"./Pages/Settings.vue":()=>f(()=>import("./Settings-ocvmCXt6.js"),__vite__mapDeps([16,1,2,3,17,5]))})),setup({el:s,App:t,props:i,plugin:r}){const o=R({render:()=>w("div",[w(lt),w(t,i),w(U),w(J)])});return o.use(r),o.mount(s),o},progress:{delay:0,color:"#10b981",includeCSS:!0,showSpinner:!1}});if("BroadcastChannel"in window){const s=new BroadcastChannel("notification_channel");s.onmessage=t=>{if(t.data&&t.data.type==="ON_NOTIFICATION_CLICK"){const i=t.data.url,r=new URL(i,window.location.origin),o=r.searchParams.get("request_id");if(o){const a=window.location.pathname;a.includes("/resident")||a.includes("/provider")||a.includes("/dashboard")?window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(o)}})):P.visit(i)}else{const a=r.pathname+r.search;P.visit(a)}}}}export{y as _,f as a};
