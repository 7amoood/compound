import{_ as R,h as T,r as C,c as i,o as n,a as h,b as s,n as k,d as a,t as r,e as u,w as c,v as p,F as b,f,g as y,i as v,j as U,k as j,l as S,m,u as P}from"./app-C6vl0Als.js";import{M as D,T as V}from"./Modal-BXDKR6FB.js";/* empty css            */const E={name:"AdminDashboard",components:{Head:T,Toast:V,Modal:D},data(){return{loading:!0,loadingRequests:!0,stats:{},users:[],services:[],requests:[],searchQuery:"",activeSection:"users",userFilter:"all",userFilters:[{id:"all",label:"الكل"},{id:"resident",label:"المقيمين"},{id:"provider",label:"مقدمي الخدمات"},{id:"inactive",label:"غير مفعل"}],requestFilter:"all",requestFilters:[{id:"all",label:"الكل"},{id:"pending",label:"قيد الانتظار"},{id:"accepted_offer",label:"تم قبول عرض"},{id:"in_progress",label:"جاري التنفيذ"},{id:"completed",label:"مكتمل"}],showUserModal:!1,showRequestModal:!1,showServiceModal:!1,showCompoundModal:!1,selectedUser:null,selectedRequest:null,selectedService:null,selectedCompound:null,editingUser:!1,editingService:!1,editingCompound:!1,savingUser:!1,savingService:!1,savingCompound:!1,userForm:{name:"",phone:"",compound_id:"",block_no:"",floor:"",apt_no:"",role:""},serviceForm:{name:"",icon:"",description:"",delivery_methods:[],new_delivery_method:""},compoundForm:{name:"",address:"",location_url:""},compounds:[],loadingCompounds:!1,nextUsersUrl:null,nextRequestsUrl:null,loadingMoreRequests:!1,showPasswordModal:!1,passwordChangeUser:null,newPassword:"",confirmPassword:"",changingPassword:!1,searchDebounceTimer:null}},computed:{user(){const l=P();return l.props.auth?l.props.auth.user:{}},csrfToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},filteredRequests(){let l=this.requests;if(this.requestFilter!=="all"&&(l=l.filter(e=>e.status===this.requestFilter)),this.searchQuery&&this.activeSection==="requests"){const e=this.searchQuery.toLowerCase();l=l.filter(x=>x.category?.name?.toLowerCase().includes(e)||x.resident?.name?.toLowerCase().includes(e)||x.notes?.toLowerCase().includes(e))}return l}},watch:{activeSection(l){const e=new URL(window.location);e.searchParams.set("tab",l),window.history.pushState({},"",e)},searchQuery(){this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(()=>{this.loadUsers()},500)},userFilter(l){const e=new URL(window.location);l&&l!=="all"?e.searchParams.set("user_filter",l):e.searchParams.delete("user_filter"),window.history.pushState({},"",e),this.loadUsers()},requestFilter(l){const e=new URL(window.location);l&&l!=="all"?e.searchParams.set("request_filter",l):e.searchParams.delete("request_filter"),window.history.pushState({},"",e)}},mounted(){const l=new URLSearchParams(window.location.search),e=l.get("tab");e&&["users","requests","services","compounds"].includes(e)&&(this.activeSection=e);const x=l.get("user_filter");x&&(this.userFilter=x);const _=l.get("request_filter");_&&(this.requestFilter=_),this.loadStats(),this.loadUsers(),this.loadServices(),this.loadRequests(),this.loadCompounds()},methods:{async loadStats(){try{const l=await m.get("/api/admin/stats");l.data.success&&(this.stats=l.data.stats)}catch(l){console.error(l)}},async loadUsers(){this.loading=!0;try{const l=new URLSearchParams;this.searchQuery&&l.append("search",this.searchQuery),this.userFilter==="resident"?l.append("role","resident"):this.userFilter==="provider"?l.append("role","provider"):this.userFilter==="inactive"&&l.append("is_active","0");const e=`/api/users${l.toString()?"?"+l.toString():""}`,x=await m.get(e);x.data.success&&(this.users=x.data.users.data,this.nextUsersUrl=x.data.users.next_page_url)}catch(l){console.error(l)}finally{this.loading=!1}},async loadMoreUsers(){if(!(!this.nextUsersUrl||this.loadingMoreUsers)){this.loadingMoreUsers=!0;try{const l=await m.get(this.nextUsersUrl);l.data.success&&(this.users=[...this.users,...l.data.users.data],this.nextUsersUrl=l.data.users.next_page_url)}catch(l){console.error(l)}finally{this.loadingMoreUsers=!1}}},async loadServices(){try{const l=await m.get("/api/services");l.data.success&&(this.services=l.data.categories)}catch(l){console.error(l)}},async loadRequests(){this.loadingRequests=!0;try{const l=await m.get("/api/requests");l.data.success&&(this.requests=l.data.requests.data,this.nextRequestsUrl=l.data.requests.next_page_url)}catch(l){console.error(l)}finally{this.loadingRequests=!1}},async loadMoreRequests(){if(!(!this.nextRequestsUrl||this.loadingMoreRequests)){this.loadingMoreRequests=!0;try{const l=await m.get(this.nextRequestsUrl);l.data.success&&(this.requests=[...this.requests,...l.data.requests.data],this.nextRequestsUrl=l.data.requests.next_page_url)}catch(l){console.error(l)}finally{this.loadingMoreRequests=!1}}},openAddService(){this.selectedService=null,this.serviceForm={name:"",icon:"",description:"",delivery_methods:[],new_delivery_method:""},this.editingService=!0,this.showServiceModal=!0},getServiceColor(l){const e=["bg-blue-50 dark:bg-blue-900/20","bg-purple-50 dark:bg-purple-900/20","bg-rose-50 dark:bg-rose-900/20","bg-amber-50 dark:bg-amber-900/20","bg-emerald-50 dark:bg-emerald-900/20","bg-cyan-50 dark:bg-cyan-900/20"];return e[l%e.length]},getServiceTextColor(l){const e=["text-blue-600","text-purple-600","text-rose-600","text-amber-600","text-emerald-600","text-cyan-600"];return e[l%e.length]},getServiceStyle(l){return{}},async toggleUserStatus(l){try{(await m.post(`/api/admin/users/${l.id}/toggle-status`)).data.success&&(l.is_active=!l.is_active,window.showToast&&window.showToast("تم تحديث حالة المستخدم","success"))}catch{window.showToast&&window.showToast("حدث خطأ","error")}},openChangePasswordModal(l){this.passwordChangeUser=l,this.newPassword="",this.confirmPassword="",this.showPasswordModal=!0},async changeUserPassword(){if(!this.newPassword||this.newPassword!==this.confirmPassword){window.showToast&&window.showToast("كلمات المرور غير متطابقة","error");return}if(this.newPassword.length<6){window.showToast&&window.showToast("كلمة المرور يجب أن تكون 6 أحرف على الأقل","error");return}this.changingPassword=!0;try{const l=await m.post(`/api/admin/users/${this.passwordChangeUser.id}/change-password`,{password:this.newPassword,password_confirmation:this.confirmPassword});l.data.success?(window.showToast&&window.showToast("تم تغيير كلمة المرور بنجاح","success"),this.showPasswordModal=!1,this.newPassword="",this.confirmPassword="",this.passwordChangeUser=null):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){console.error(l),window.showToast&&window.showToast("حدث خطأ أثناء تغيير كلمة المرور","error")}finally{this.changingPassword=!1}},async toggleServiceStatus(l){try{const e=await m.post(`/api/admin/services/${l.id}/toggle-status`);e.data.success&&(l.is_active=e.data.is_active,window.showToast&&window.showToast(`تم ${l.is_active?"تفعيل":"إيقاف"} الخدمة`,"success"),this.loadStats())}catch{window.showToast&&window.showToast("حدث خطأ أثناء تحديث حالة الخدمة","error")}},formatDate(l){return new Date(l).toLocaleDateString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},openUserDetails(l){this.selectedUser=l,this.editingUser=!1,this.showUserModal=!0},openRequestDetails(l){this.selectedRequest=l,this.showRequestModal=!0},openServiceDetails(l){this.selectedService=l,this.editingService=!1,this.showServiceModal=!0},startEditUser(){this.userForm={name:this.selectedUser.name||"",phone:this.selectedUser.phone||"",compound_id:this.selectedUser.compound_id||"",block_no:this.selectedUser.block_no||"",floor:this.selectedUser.floor||"",apt_no:this.selectedUser.apt_no||"",role:this.selectedUser.role||"resident"},this.editingUser=!0},async saveUser(){this.savingUser=!0;try{const l=await m.put(`/api/admin/users/${this.selectedUser.id}`,this.userForm);l.data.success?(Object.assign(this.selectedUser,this.userForm),this.editingUser=!1,window.showToast&&window.showToast("تم حفظ بيانات المستخدم بنجاح","success")):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingUser=!1}},startEditService(){this.serviceForm={name:this.selectedService.name||"",icon:this.selectedService.icon||"",description:this.selectedService.description||"",delivery_methods:this.selectedService.delivery_methods?[...this.selectedService.delivery_methods]:[],new_delivery_method:""},this.editingService=!0},addDeliveryMethod(){const l=this.serviceForm.new_delivery_method.trim();l&&!this.serviceForm.delivery_methods.includes(l)&&(this.serviceForm.delivery_methods.push(l),this.serviceForm.new_delivery_method="")},removeDeliveryMethod(l){this.serviceForm.delivery_methods.splice(l,1)},async saveService(){this.savingService=!0;try{let l;this.selectedService&&this.selectedService.id?l=await m.put(`/api/admin/services/${this.selectedService.id}`,this.serviceForm):l=await m.post("/api/services",this.serviceForm),l.data.success?(this.selectedService&&this.selectedService.id?Object.assign(this.selectedService,this.serviceForm):this.services.push(l.data.category),this.showServiceModal=!1,this.editingService=!1,window.showToast&&window.showToast("تم حفظ بيانات الخدمة بنجاح","success")):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingService=!1}},async loadCompounds(){this.loadingCompounds=!0;try{const l=await m.get("/api/compounds");l.data.success&&(this.compounds=l.data.compounds)}catch(l){console.error(l)}finally{this.loadingCompounds=!1}},openCompoundDetails(l){this.selectedCompound=l,this.editingCompound=!1,this.showCompoundModal=!0},openAddCompound(){this.selectedCompound=null,this.compoundForm={name:"",address:"",location_url:""},this.editingCompound=!0,this.showCompoundModal=!0},startEditCompound(){this.compoundForm={name:this.selectedCompound.name||"",address:this.selectedCompound.address||"",location_url:this.selectedCompound.location_url||""},this.editingCompound=!0},async saveCompound(){this.savingCompound=!0;try{let l;this.selectedCompound?.id?(l=await m.put(`/api/admin/compounds/${this.selectedCompound.id}`,this.compoundForm),l.data.success&&(Object.assign(this.selectedCompound,this.compoundForm),this.editingCompound=!1,window.showToast&&window.showToast("تم حفظ بيانات الكمبوند بنجاح","success"))):(l=await m.post("/api/compounds",this.compoundForm),l.data.success&&(this.compounds.push(l.data.compound),this.editingCompound=!1,this.showCompoundModal=!1,window.showToast&&window.showToast("تم إضافة الكمبوند بنجاح","success"))),l.data.success||window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingCompound=!1}},async toggleCompoundStatus(l){try{(await m.post(`/api/admin/compounds/${l.id}/toggle-status`)).data.success&&(l.is_active=!l.is_active,window.showToast&&window.showToast(`تم ${l.is_active?"تفعيل":"إيقاف"} الكمبوند`,"success"))}catch{window.showToast&&window.showToast("حدث خطأ","error")}}}},L={class:"bg-background-light dark:bg-background-dark font-display min-h-screen flex flex-col antialiased selection:bg-primary/30 selection:text-primary",dir:"rtl"},A={class:"sticky top-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm border-b border-slate-200 dark:border-slate-800"},Q={class:"flex items-center justify-between px-4 py-3 max-w-md mx-auto"},z={class:"flex items-center gap-3"},N={class:"flex-1 pb-24 overflow-x-hidden max-w-md mx-auto w-full"},O={class:"px-4 py-4"},B={class:"grid grid-cols-2 gap-3"},H={class:"flex justify-between items-start"},G={key:0,class:"relative flex h-3 w-3"},K={class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold mt-0.5"},I={class:"flex justify-between items-start"},J={key:0,class:"relative flex h-3 w-3"},W={class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold mt-0.5"},X={class:"px-4 py-2"},Y={class:"flex w-full items-center justify-between gap-2 overflow-x-auto no-scrollbar py-2"},Z={class:"px-4 py-3"},$={class:"relative flex items-center w-full h-12 rounded-xl focus-within:ring-2 focus-within:ring-primary/20 transition-shadow bg-white dark:bg-surface-dark shadow-sm border border-slate-200 dark:border-slate-700"},ee=["placeholder"],se={key:0,class:"px-4 py-2"},te={class:"flex items-center justify-between mb-3"},oe={class:"text-xs text-slate-400"},le={class:"flex gap-2 mb-4 overflow-x-auto no-scrollbar pb-1"},re=["onClick"],ie={class:"flex flex-col gap-3"},ne={key:0,class:"text-center py-6 text-slate-400"},de={key:1,class:"text-center py-6 text-slate-400"},ae=["onClick"],ue={class:"flex items-center gap-3"},ce={class:"relative"},me={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},pe={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},be={key:1,class:"px-4 py-2"},xe={class:"flex items-center justify-between mb-3"},ge={class:"text-xs text-slate-400"},fe={class:"flex gap-2 mb-4 overflow-x-auto no-scrollbar pb-1"},he=["onClick"],ve={class:"flex flex-col gap-3"},we={key:0,class:"text-center py-6 text-slate-400"},ye={key:1,class:"text-center py-6 text-slate-400"},ke=["onClick"],_e={class:"flex items-center justify-between mb-2"},Ce={class:"flex items-center gap-3"},Ue={class:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-primary"},Se={class:"material-symbols-outlined"},Fe={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},qe={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},Me={class:"flex items-center justify-between"},Re={key:0,class:"mt-2 flex items-center justify-center gap-1 text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-xl w-full"},Te={key:2,class:"px-4 py-2"},je={class:"flex items-center justify-between mb-3"},Pe={class:"flex flex-col gap-3"},De=["onClick"],Ve={class:"flex items-center gap-3"},Ee={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},Le={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},Ae={key:3,class:"px-4 py-2"},Qe={class:"flex items-center justify-between mb-3"},ze={class:"flex flex-col gap-3"},Ne={key:0,class:"text-center py-6 text-slate-400"},Oe={key:1,class:"text-center py-6 text-slate-400"},Be=["onClick"],He={class:"flex items-center gap-3"},Ge={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},Ke={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},Ie={class:"fixed bottom-0 left-0 right-0 bg-white dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 px-4 pb-6 pt-3 z-50"},Je={class:"flex justify-around items-center max-w-md mx-auto"},We={key:0,class:"space-y-4"},Xe={class:"flex items-center gap-4"},Ye={class:"font-bold text-lg"},Ze={class:"text-slate-500 text-sm"},$e={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},es={class:"flex justify-between items-center"},ss=["href"],ts={key:0,class:"flex justify-between items-center"},os={class:"flex items-center gap-2"},ls={class:"font-semibold"},rs=["href"],is={key:1,class:"flex justify-between items-center"},ns={class:"font-semibold"},ds={key:2,class:"flex justify-between items-center"},as={class:"font-semibold"},us={key:3,class:"flex justify-between items-center"},cs={class:"font-semibold"},ms={class:"flex justify-between items-center"},ps={class:"flex justify-between items-center"},bs={class:"font-semibold"},xs={class:"space-y-2"},gs={class:"flex gap-2"},fs={key:1,class:"space-y-4"},hs=["value"],vs={class:"grid grid-cols-2 gap-3"},ws={class:"flex gap-2"},ys=["disabled"],ks={key:0,class:"space-y-4"},_s={class:"flex items-center gap-3"},Cs={class:"p-3 rounded-xl bg-blue-50 text-primary"},Us={class:"material-symbols-outlined text-2xl"},Ss={class:"font-bold text-lg"},Fs={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},qs={class:"flex justify-between items-center"},Ms={class:"font-semibold"},Rs={class:"flex justify-between items-center"},Ts=["href"],js={class:"flex justify-between items-center"},Ps={class:"font-semibold"},Ds={key:0,class:"flex justify-between items-center bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg -mx-2"},Vs={class:"font-bold text-blue-700 dark:text-blue-300"},Es={key:1,class:"flex justify-between items-center"},Ls={class:"font-semibold"},As={key:2,class:"flex justify-between items-center"},Qs={class:"font-bold text-green-600"},zs={key:0,class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4"},Ns={class:"text-slate-800 dark:text-white"},Os={key:0,class:"space-y-4"},Bs={class:"flex items-center gap-4 justify-center"},Hs={class:"p-4 rounded-2xl bg-orange-50 text-orange-500"},Gs={class:"material-symbols-outlined text-4xl"},Ks={class:"text-center"},Is={class:"font-bold text-xl"},Js={class:"text-slate-500"},Ws={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},Xs={class:"flex justify-between items-center"},Ys={class:"flex gap-2"},Zs={key:1,class:"space-y-4"},$s={class:"mt-2 flex items-center gap-2 text-slate-500 text-sm"},et={class:"material-symbols-outlined text-2xl text-orange-500"},st={class:"flex items-center gap-2 mb-2"},tt={class:"flex flex-col gap-2"},ot=["onClick"],lt={class:"flex gap-2"},rt=["disabled"],it={key:0,class:"space-y-4"},nt={class:"text-center"},dt={class:"font-bold text-xl"},at={class:"text-slate-500"},ut={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},ct={class:"flex justify-between items-center"},mt={class:"font-bold"},pt={class:"flex justify-between items-center"},bt={key:0,class:"flex justify-between items-center"},xt=["href"],gt={class:"flex gap-2"},ft={key:1,class:"space-y-4"},ht={class:"flex gap-2"},vt=["disabled"],wt={key:0,class:"space-y-4"},yt={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl flex gap-3 text-blue-800 dark:text-blue-200"},kt={class:"text-sm"},_t={class:"font-semibold mb-1"},Ct={class:"flex gap-2 pt-2"},Ut=["disabled"],St={key:0,class:"material-symbols-outlined animate-spin text-[18px]"};function Ft(l,e,x,_,t,d){const F=C("Head"),q=C("Toast"),w=C("Modal");return n(),i(b,null,[h(F,{title:"لوحة التحكم - المسؤول"}),h(q),s("div",L,[s("header",A,[s("div",Q,[s("div",z,[s("div",{class:"bg-center bg-no-repeat bg-cover rounded-full size-9 border border-slate-200 dark:border-slate-700 shadow-sm",style:k(`background-image: url('${d.user.photo||"https://ui-avatars.com/api/?name=Admin"}');`)},null,4),e[49]||(e[49]=s("h1",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-bold leading-tight tracking-tight"},"لوحة المسؤول",-1))]),e[50]||(e[50]=s("a",{href:"/logout",class:"flex items-center justify-center size-10 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-500"},[s("span",{class:"material-symbols-outlined"},"logout")],-1))])]),s("main",N,[e[80]||(e[80]=s("section",{class:"px-4 pt-6 pb-2"},[s("h2",{class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold leading-tight"},"صباح الخير، أدمن."),s("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1"},"هذا ما يحدث اليوم في مجتمعك.")],-1)),s("section",O,[s("div",B,[s("div",{onClick:e[0]||(e[0]=o=>{t.activeSection="users",t.userFilter="inactive"}),class:"relative flex flex-col justify-between gap-3 rounded-xl p-4 bg-white dark:bg-surface-dark shadow-sm border-l-4 border-l-rose-500 border-y border-r border-slate-100 dark:border-slate-800 cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]"},[s("div",H,[e[52]||(e[52]=s("div",{class:"p-2 bg-rose-50 dark:bg-rose-900/20 rounded-lg text-rose-500"},[s("span",{class:"material-symbols-outlined text-xl"},"person_off")],-1)),t.stats.pending_users>0?(n(),i("span",G,[...e[51]||(e[51]=[s("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"},null,-1),s("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-rose-500"},null,-1)])])):a("",!0)]),s("div",null,[e[53]||(e[53]=s("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-xs font-medium"},"مستخدمين غير مفعلين",-1)),s("p",K,r(t.stats.pending_users||0),1)])]),s("div",{onClick:e[1]||(e[1]=o=>{t.activeSection="requests",t.requestFilter="pending"}),class:"relative flex flex-col justify-between gap-3 rounded-xl p-4 bg-white dark:bg-surface-dark shadow-sm border-l-4 border-l-amber-500 border-y border-r border-slate-100 dark:border-slate-800 cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]"},[s("div",I,[e[55]||(e[55]=s("div",{class:"p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg text-amber-500"},[s("span",{class:"material-symbols-outlined text-xl"},"hourglass_empty")],-1)),t.stats.pending_requests>0?(n(),i("span",J,[...e[54]||(e[54]=[s("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"},null,-1),s("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-amber-500"},null,-1)])])):a("",!0)]),s("div",null,[e[56]||(e[56]=s("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-xs font-medium"},"طلبات قيد الانتظار",-1)),s("p",W,r(t.stats.pending_requests||0),1)])])])]),s("section",X,[s("div",Y,[s("button",{onClick:e[2]||(e[2]=o=>t.activeSection="users"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="users"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...e[57]||(e[57]=[s("span",{class:"material-symbols-outlined text-2xl mb-1"},"group",-1),s("span",{class:"text-xs font-bold"},"المستخدمين",-1)])],2),s("button",{onClick:e[3]||(e[3]=o=>t.activeSection="requests"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="requests"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...e[58]||(e[58]=[s("span",{class:"material-symbols-outlined text-2xl mb-1"},"assignment",-1),s("span",{class:"text-xs font-bold"},"الطلبات",-1)])],2),s("button",{onClick:e[4]||(e[4]=o=>t.activeSection="services"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="services"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...e[59]||(e[59]=[s("span",{class:"material-symbols-outlined text-2xl mb-1"},"design_services",-1),s("span",{class:"text-xs font-bold"},"الخدمات",-1)])],2),s("button",{onClick:e[5]||(e[5]=o=>t.activeSection="compounds"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="compounds"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...e[60]||(e[60]=[s("span",{class:"material-symbols-outlined text-2xl mb-1"},"apartment",-1),s("span",{class:"text-xs font-bold"},"الكمبوندات",-1)])],2)])]),s("section",Z,[s("div",$,[e[61]||(e[61]=s("div",{class:"grid place-items-center h-full w-12 text-slate-400"},[s("span",{class:"material-symbols-outlined"},"search")],-1)),c(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.searchQuery=o),class:"peer h-full w-full outline-none text-sm text-text-primary-light dark:text-text-primary-dark pl-2 bg-transparent placeholder-slate-400",placeholder:t.activeSection==="users"?"بحث عن مستخدمين...":t.activeSection==="requests"?"بحث عن طلبات...":"بحث عن خدمات...",type:"text"},null,8,ee),[[p,t.searchQuery]])])]),t.activeSection==="users"?(n(),i("section",se,[s("div",te,[e[62]||(e[62]=s("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"قائمة المستخدمين",-1)),s("span",oe,r(t.users.length)+" مستخدم",1)]),s("div",le,[(n(!0),i(b,null,f(t.userFilters,o=>(n(),i("button",{key:o.id,onClick:g=>t.userFilter=o.id,class:u(["shrink-0 h-8 px-4 rounded-full text-xs font-bold shadow-sm transition-colors",t.userFilter===o.id?"bg-primary text-white":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])},r(o.label),11,re))),128))]),s("div",ie,[t.loading?(n(),i("div",ne,[...e[63]||(e[63]=[s("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):t.users.length===0?(n(),i("div",de,[...e[64]||(e[64]=[s("span",{class:"material-symbols-outlined text-4xl"},"person_off",-1),s("p",{class:"mt-2 text-sm"},"لا يوجد مستخدمين",-1)])])):a("",!0),(n(!0),i(b,null,f(t.users,o=>(n(),i("div",{key:o.id,onClick:g=>d.openUserDetails(o),class:"flex items-center justify-between p-3 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all"},[s("div",ue,[s("div",ce,[s("div",{class:"w-10 h-10 rounded-full bg-cover bg-center",style:k(`background-image: url('${o.photo||"https://ui-avatars.com/api/?name="+o.name}');`)},null,4),s("div",{class:u(["absolute bottom-0 right-0 w-3 h-3 border-2 border-white dark:border-surface-dark rounded-full",o.is_active?"bg-green-500":"bg-slate-300"])},null,2)]),s("div",null,[s("p",me,r(o.name),1),s("p",pe,r(o.role==="resident"?"ساكن":o.role==="provider"?"مقدم خدمة":"مسؤول")+" • "+r(o.phone),1)])]),e[65]||(e[65]=s("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],8,ae))),128)),t.nextUsersUrl?(n(),i("button",{key:2,onClick:e[7]||(e[7]=(...o)=>d.loadMoreUsers&&d.loadMoreUsers(...o)),class:"w-full py-3 mt-2 text-primary font-bold text-sm bg-white dark:bg-surface-dark border border-slate-100 dark:border-slate-800 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50"},r(l.loadingMoreUsers?"جاري التحميل...":"عرض المزيد"),1)):a("",!0)])])):a("",!0),t.activeSection==="requests"?(n(),i("section",be,[s("div",xe,[e[66]||(e[66]=s("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"الطلبات",-1)),s("span",ge,r(d.filteredRequests.length)+" طلب",1)]),s("div",fe,[(n(!0),i(b,null,f(t.requestFilters,o=>(n(),i("button",{key:o.id,onClick:g=>t.requestFilter=o.id,class:u(["shrink-0 h-8 px-4 rounded-full text-xs font-bold shadow-sm transition-colors",t.requestFilter===o.id?"bg-primary text-white":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])},r(o.label),11,he))),128))]),s("div",ve,[t.loadingRequests?(n(),i("div",we,[...e[67]||(e[67]=[s("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):d.filteredRequests.length===0?(n(),i("div",ye,[...e[68]||(e[68]=[s("span",{class:"material-symbols-outlined text-4xl"},"inbox",-1),s("p",{class:"mt-2 text-sm"},"لا توجد طلبات",-1)])])):a("",!0),(n(!0),i(b,null,f(d.filteredRequests,o=>(n(),i("div",{key:o.id,onClick:g=>d.openRequestDetails(o),class:"flex flex-col bg-white dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all"},[s("div",_e,[s("div",Ce,[s("div",Ue,[s("span",Se,r(o.category?.icon||"help"),1)]),s("div",null,[s("p",Fe,r(o.category?.name),1),s("p",qe,r(o.resident?.name)+" • "+r(d.formatDate(o.created_at)),1)])]),e[69]||(e[69]=s("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))]),s("div",Me,[s("span",{class:u(["px-2 py-1 rounded-full text-[10px] font-bold",{"bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-300":o.status==="pending","bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300":o.status==="accepted_offer","bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-300":o.status==="in_progress","bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-300":o.status==="completed"}])},r(o.status==="pending"?"انتظار":o.status==="in_progress"?"جاري":o.status==="completed"?"مكتمل":"تم قبول عرض"),3)]),o.delivery_method?(n(),i("div",Re,[e[70]||(e[70]=s("span",{class:"material-symbols-outlined text-[16px]"},"directions_car",-1)),s("span",null,r(o.delivery_method),1)])):a("",!0)],8,ke))),128)),t.nextRequestsUrl?(n(),i("button",{key:2,onClick:e[8]||(e[8]=(...o)=>d.loadMoreRequests&&d.loadMoreRequests(...o)),class:"w-full py-3 mt-2 text-primary font-bold text-sm bg-white dark:bg-surface-dark border border-slate-100 dark:border-slate-800 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50"},r(t.loadingMoreRequests?"جاري التحميل...":"عرض المزيد"),1)):a("",!0)])])):a("",!0),t.activeSection==="services"?(n(),i("section",Te,[s("div",je,[e[72]||(e[72]=s("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"إدارة الخدمات",-1)),s("button",{onClick:e[9]||(e[9]=(...o)=>d.openAddService&&d.openAddService(...o)),class:"text-primary p-1"},[...e[71]||(e[71]=[s("span",{class:"material-symbols-outlined"},"add",-1)])])]),s("div",Pe,[(n(!0),i(b,null,f(t.services,(o,g)=>(n(),i("div",{key:o.id,onClick:M=>d.openServiceDetails(o),class:u(["flex items-center justify-between p-4 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all",!o.is_active&&"opacity-75"])},[s("div",Ve,[s("div",{class:u(["p-2.5 rounded-lg",d.getServiceColor(g)]),style:k(d.getServiceStyle(g))},[s("span",{class:u(["material-symbols-outlined",d.getServiceTextColor(g)])},r(o.icon),3)],6),s("div",null,[s("p",Ee,r(o.name),1),s("p",Le,r(o.is_active?"نشط":"متوقف مؤقتاً"),1)])]),e[73]||(e[73]=s("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],10,De))),128))])])):a("",!0),t.activeSection==="compounds"?(n(),i("section",Ae,[s("div",Qe,[e[75]||(e[75]=s("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"إدارة الكمبوندات",-1)),s("button",{onClick:e[10]||(e[10]=(...o)=>d.openAddCompound&&d.openAddCompound(...o)),class:"text-primary p-1"},[...e[74]||(e[74]=[s("span",{class:"material-symbols-outlined"},"add",-1)])])]),s("div",ze,[t.loadingCompounds?(n(),i("div",Ne,[...e[76]||(e[76]=[s("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):t.compounds.length===0?(n(),i("div",Oe,[...e[77]||(e[77]=[s("span",{class:"material-symbols-outlined text-4xl"},"apartment",-1),s("p",{class:"mt-2 text-sm"},"لا توجد كمبوندات",-1)])])):a("",!0),(n(!0),i(b,null,f(t.compounds,o=>(n(),i("div",{key:o.id,onClick:g=>d.openCompoundDetails(o),class:u(["flex items-center justify-between p-4 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all",!o.is_active&&"opacity-75"])},[s("div",He,[e[78]||(e[78]=s("div",{class:"p-2.5 rounded-lg bg-green-50 dark:bg-green-900/20 text-green-600"},[s("span",{class:"material-symbols-outlined"},"apartment")],-1)),s("div",null,[s("p",Ge,r(o.name),1),s("p",Ke,r(o.residents_count||0)+" ساكن • "+r(o.is_active?"نشط":"متوقف"),1)])]),e[79]||(e[79]=s("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],10,Be))),128))])])):a("",!0)]),s("nav",Ie,[s("ul",Je,[s("li",null,[s("a",{class:u(["flex flex-col items-center gap-1",t.activeSection==="users"||t.activeSection==="requests"||t.activeSection==="services"?"text-primary":"text-slate-400"]),href:"/dashboard"},[...e[81]||(e[81]=[s("span",{class:"material-symbols-outlined text-[26px]"},"dashboard",-1),s("span",{class:"text-[10px] font-medium"},"الرئيسية",-1)])],2)]),e[82]||(e[82]=s("li",null,[s("a",{class:"flex flex-col items-center gap-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",href:"/settings"},[s("span",{class:"material-symbols-outlined text-[26px]"},"settings"),s("span",{class:"text-[10px] font-medium"},"الإعدادات")])],-1))])]),h(w,{show:t.showUserModal,title:t.editingUser?"تعديل المستخدم":t.selectedUser?.name,onClose:e[23]||(e[23]=o=>{t.showUserModal=!1,t.editingUser=!1})},{default:y(()=>[t.selectedUser?(n(),i("div",We,[t.editingUser?(n(),i("div",fs,[s("div",null,[e[93]||(e[93]=s("label",{class:"block text-sm font-medium mb-1"},"الاسم",-1)),c(s("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>t.userForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.userForm.name]])]),s("div",null,[e[94]||(e[94]=s("label",{class:"block text-sm font-medium mb-1"},"رقم الهاتف",-1)),c(s("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>t.userForm.phone=o),type:"tel",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.userForm.phone]])]),s("div",null,[e[96]||(e[96]=s("label",{class:"block text-sm font-medium mb-1"},"نوع المستخدم",-1)),c(s("select",{"onUpdate:modelValue":e[16]||(e[16]=o=>t.userForm.role=o),class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},[...e[95]||(e[95]=[s("option",{value:"resident"},"ساكن",-1),s("option",{value:"provider"},"مقدم خدمة",-1),s("option",{value:"admin"},"مسؤول",-1)])],512),[[U,t.userForm.role]])]),t.userForm.role==="resident"?(n(),i(b,{key:0},[s("div",null,[e[98]||(e[98]=s("label",{class:"block text-sm font-medium mb-1"},"الكمبوند",-1)),c(s("select",{"onUpdate:modelValue":e[17]||(e[17]=o=>t.userForm.compound_id=o),class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},[e[97]||(e[97]=s("option",{value:""},"اختر الكمبوند",-1)),(n(!0),i(b,null,f(t.compounds,o=>(n(),i("option",{key:o.id,value:o.id},r(o.name),9,hs))),128))],512),[[U,t.userForm.compound_id]])]),s("div",vs,[s("div",null,[e[99]||(e[99]=s("label",{class:"block text-sm font-medium mb-1"},"رقم المبنى",-1)),c(s("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>t.userForm.block_no=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.userForm.block_no]])]),s("div",null,[e[100]||(e[100]=s("label",{class:"block text-sm font-medium mb-1"},"الدور",-1)),c(s("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>t.userForm.floor=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.userForm.floor]])])]),s("div",null,[e[101]||(e[101]=s("label",{class:"block text-sm font-medium mb-1"},"رقم الشقة",-1)),c(s("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>t.userForm.apt_no=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.userForm.apt_no]])])],64)):a("",!0),s("div",ws,[s("button",{onClick:e[21]||(e[21]=(...o)=>d.saveUser&&d.saveUser(...o)),disabled:t.savingUser,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingUser?"جاري الحفظ...":"حفظ التغييرات"),9,ys),s("button",{onClick:e[22]||(e[22]=o=>t.editingUser=!1),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])])):(n(),i(b,{key:0},[s("div",Xe,[s("div",{class:"w-16 h-16 rounded-full bg-cover bg-center border-2 border-slate-200",style:k(`background-image: url('${t.selectedUser.photo||"https://ui-avatars.com/api/?name="+t.selectedUser.name}');`)},null,4),s("div",null,[s("p",Ye,r(t.selectedUser.name),1),s("p",Ze,r(t.selectedUser.role==="resident"?"ساكن":t.selectedUser.role==="provider"?"مقدم خدمة":"مسؤول"),1)])]),s("div",$e,[s("div",es,[e[83]||(e[83]=s("span",{class:"text-slate-500 text-sm"},"الهاتف",-1)),s("a",{href:`tel:${t.selectedUser.phone}`,class:"text-primary font-semibold"},r(t.selectedUser.phone),9,ss)]),t.selectedUser.role==="resident"?(n(),i(b,{key:0},[t.selectedUser.compound?(n(),i("div",ts,[e[85]||(e[85]=s("span",{class:"text-slate-500 text-sm"},"الكمبوند",-1)),s("div",os,[s("span",ls,r(t.selectedUser.compound.name),1),t.selectedUser.compound.location_url?(n(),i("a",{key:0,href:t.selectedUser.compound.location_url,target:"_blank",class:"text-primary hover:text-primary-dark",title:"الموقع على الخريطة"},[...e[84]||(e[84]=[s("span",{class:"material-symbols-outlined text-lg"},"location_on",-1)])],8,rs)):a("",!0)])])):a("",!0),t.selectedUser.block_no?(n(),i("div",is,[e[86]||(e[86]=s("span",{class:"text-slate-500 text-sm"},"المبنى",-1)),s("span",ns,r(t.selectedUser.block_no),1)])):a("",!0),t.selectedUser.floor?(n(),i("div",ds,[e[87]||(e[87]=s("span",{class:"text-slate-500 text-sm"},"الدور",-1)),s("span",as,r(t.selectedUser.floor),1)])):a("",!0),t.selectedUser.apt_no?(n(),i("div",us,[e[88]||(e[88]=s("span",{class:"text-slate-500 text-sm"},"رقم الشقة",-1)),s("span",cs,r(t.selectedUser.apt_no),1)])):a("",!0)],64)):a("",!0),s("div",ms,[e[89]||(e[89]=s("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),s("span",{class:u(["font-bold",t.selectedUser.is_active?"text-green-600":"text-red-500"])},r(t.selectedUser.is_active?"مفعل":"غير مفعل"),3)]),s("div",ps,[e[90]||(e[90]=s("span",{class:"text-slate-500 text-sm"},"تاريخ التسجيل",-1)),s("span",bs,r(d.formatDate(t.selectedUser.created_at)),1)])]),s("div",xs,[s("div",gs,[s("button",{onClick:e[11]||(e[11]=(...o)=>d.startEditUser&&d.startEditUser(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...e[91]||(e[91]=[s("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),s("button",{onClick:e[12]||(e[12]=o=>d.toggleUserStatus(t.selectedUser)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedUser.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedUser.is_active?"إيقاف":"تفعيل"),3)]),s("button",{onClick:e[13]||(e[13]=o=>d.openChangePasswordModal(t.selectedUser)),class:"w-full py-3 rounded-xl font-bold bg-amber-500 hover:bg-amber-600 text-white transition-colors"},[...e[92]||(e[92]=[s("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"lock_reset",-1),v(" تغيير كلمة المرور ",-1)])])])],64))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showRequestModal,title:"تفاصيل الطلب",onClose:e[24]||(e[24]=o=>t.showRequestModal=!1)},{default:y(()=>[t.selectedRequest?(n(),i("div",ks,[s("div",_s,[s("div",Cs,[s("span",Us,r(t.selectedRequest.category?.icon||"help"),1)]),s("div",null,[s("p",Ss,r(t.selectedRequest.category?.name),1),s("span",{class:u(["px-2 py-1 rounded-full text-xs font-bold",{"bg-orange-100 text-orange-600":t.selectedRequest.status==="pending","bg-blue-100 text-blue-600":t.selectedRequest.status==="accepted_offer"||t.selectedRequest.status==="in_progress","bg-green-100 text-green-600":t.selectedRequest.status==="completed"}])},r(t.selectedRequest.status==="pending"?"قيد الانتظار":t.selectedRequest.status==="in_progress"?"جاري التنفيذ":t.selectedRequest.status==="completed"?"مكتمل":"تم قبول عرض"),3)])]),s("div",Fs,[s("div",qs,[e[102]||(e[102]=s("span",{class:"text-slate-500 text-sm"},"الساكن",-1)),s("span",Ms,r(t.selectedRequest.resident?.name),1)]),s("div",Rs,[e[103]||(e[103]=s("span",{class:"text-slate-500 text-sm"},"الهاتف",-1)),s("a",{href:`tel:${t.selectedRequest.resident?.phone}`,class:"text-primary font-semibold"},r(t.selectedRequest.resident?.phone),9,Ts)]),s("div",js,[e[104]||(e[104]=s("span",{class:"text-slate-500 text-sm"},"تاريخ الطلب",-1)),s("span",Ps,r(d.formatDate(t.selectedRequest.created_at)),1)]),t.selectedRequest.delivery_method?(n(),i("div",Ds,[e[105]||(e[105]=s("span",{class:"text-slate-500 dark:text-slate-400 text-sm flex items-center gap-1"},[s("span",{class:"material-symbols-outlined text-base"},"directions_car"),v(" طريقة التقديم ")],-1)),s("span",Vs,r(t.selectedRequest.delivery_method),1)])):a("",!0),t.selectedRequest.accepted_proposal?(n(),i("div",Es,[e[106]||(e[106]=s("span",{class:"text-slate-500 text-sm"},"مقدم الخدمة",-1)),s("span",Ls,r(t.selectedRequest.accepted_proposal.provider?.name),1)])):a("",!0),t.selectedRequest.accepted_proposal?(n(),i("div",As,[e[107]||(e[107]=s("span",{class:"text-slate-500 text-sm"},"السعر",-1)),s("span",Qs,r(t.selectedRequest.accepted_proposal.price)+" ج.م",1)])):a("",!0)]),t.selectedRequest.notes?(n(),i("div",zs,[e[108]||(e[108]=s("p",{class:"text-slate-500 text-sm mb-1"},"ملاحظات",-1)),s("p",Ns,r(t.selectedRequest.notes),1)])):a("",!0)])):a("",!0)]),_:1},8,["show"]),h(w,{show:t.showServiceModal,title:t.editingService?t.selectedService?"تعديل الخدمة":"إضافة خدمة جديدة":t.selectedService?.name,onClose:e[35]||(e[35]=o=>{t.showServiceModal=!1,t.editingService=!1})},{default:y(()=>[t.selectedService||t.editingService?(n(),i("div",Os,[t.editingService?(n(),i("div",Zs,[s("div",null,[e[111]||(e[111]=s("label",{class:"block text-sm font-medium mb-1"},"اسم الخدمة",-1)),c(s("input",{"onUpdate:modelValue":e[27]||(e[27]=o=>t.serviceForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[p,t.serviceForm.name]])]),s("div",null,[e[113]||(e[113]=s("label",{class:"block text-sm font-medium mb-1"},"الأيقونة (Material Symbol)",-1)),c(s("input",{"onUpdate:modelValue":e[28]||(e[28]=o=>t.serviceForm.icon=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: plumbing, electrical_services"},null,512),[[p,t.serviceForm.icon]]),s("div",$s,[s("span",et,r(t.serviceForm.icon||"help"),1),e[112]||(e[112]=s("span",null,"معاينة الأيقونة",-1))])]),s("div",null,[e[114]||(e[114]=s("label",{class:"block text-sm font-medium mb-1"},"الوصف",-1)),c(s("textarea",{"onUpdate:modelValue":e[29]||(e[29]=o=>t.serviceForm.description=o),rows:"3",class:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 resize-none"},null,512),[[p,t.serviceForm.description]])]),s("div",null,[e[116]||(e[116]=s("label",{class:"block text-sm font-medium mb-1"},"طرق التقديم (Delivery Options)",-1)),s("div",st,[c(s("input",{"onUpdate:modelValue":e[30]||(e[30]=o=>t.serviceForm.new_delivery_method=o),onKeydown:e[31]||(e[31]=j(S((...o)=>d.addDeliveryMethod&&d.addDeliveryMethod(...o),["prevent"]),["enter"])),type:"text",class:"flex-1 h-10 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm",placeholder:"اكتب واضغط Enter (مثال: زيارة منزلية)"},null,544),[[p,t.serviceForm.new_delivery_method]]),s("button",{onClick:e[32]||(e[32]=S((...o)=>d.addDeliveryMethod&&d.addDeliveryMethod(...o),["prevent"])),class:"h-10 px-4 rounded-xl bg-slate-100 dark:bg-slate-700 font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors"},"إضافة")]),s("div",tt,[(n(!0),i(b,null,f(t.serviceForm.delivery_methods,(o,g)=>(n(),i("div",{key:g,class:"px-4 py-2 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium flex items-center justify-between w-full"},[s("span",null,r(o),1),s("button",{onClick:M=>d.removeDeliveryMethod(g),class:"hover:text-red-500 rounded-full p-1"},[...e[115]||(e[115]=[s("span",{class:"material-symbols-outlined text-lg"},"close",-1)])],8,ot)]))),128))])]),s("div",lt,[s("button",{onClick:e[33]||(e[33]=(...o)=>d.saveService&&d.saveService(...o)),disabled:t.savingService,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingService?"جاري الحفظ...":"حفظ التغييرات"),9,rt),s("button",{onClick:e[34]||(e[34]=o=>t.editingService=!1),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])])):(n(),i(b,{key:0},[s("div",Bs,[s("div",Hs,[s("span",Gs,r(t.selectedService.icon),1)])]),s("div",Ks,[s("p",Is,r(t.selectedService.name),1),s("p",Js,r(t.selectedService.description||"خدمة متوفرة في التطبيق"),1)]),s("div",Ws,[s("div",Xs,[e[109]||(e[109]=s("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),s("span",{class:u(["font-bold",t.selectedService.is_active?"text-green-600":"text-red-500"])},r(t.selectedService.is_active?"نشط":"متوقف"),3)])]),s("div",Ys,[s("button",{onClick:e[25]||(e[25]=(...o)=>d.startEditService&&d.startEditService(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...e[110]||(e[110]=[s("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),s("button",{onClick:e[26]||(e[26]=o=>d.toggleServiceStatus(t.selectedService)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedService.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedService.is_active?"إيقاف":"تفعيل"),3)])],64))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showCompoundModal,title:t.editingCompound?t.selectedCompound?.id?"تعديل الكمبوند":"إضافة كمبوند جديد":t.selectedCompound?.name,onClose:e[43]||(e[43]=o=>{t.showCompoundModal=!1,t.editingCompound=!1})},{default:y(()=>[t.selectedCompound||t.editingCompound?(n(),i("div",it,[!t.editingCompound&&t.selectedCompound?(n(),i(b,{key:0},[e[122]||(e[122]=s("div",{class:"flex items-center gap-4 justify-center"},[s("div",{class:"p-4 rounded-2xl bg-green-50 text-green-600"},[s("span",{class:"material-symbols-outlined text-4xl"},"apartment")])],-1)),s("div",nt,[s("p",dt,r(t.selectedCompound.name),1),s("p",at,r(t.selectedCompound.address||"لا يوجد عنوان"),1)]),s("div",ut,[s("div",ct,[e[117]||(e[117]=s("span",{class:"text-slate-500 text-sm"},"عدد السكان",-1)),s("span",mt,r(t.selectedCompound.residents_count||0),1)]),s("div",pt,[e[118]||(e[118]=s("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),s("span",{class:u(["font-bold",t.selectedCompound.is_active?"text-green-600":"text-red-500"])},r(t.selectedCompound.is_active?"نشط":"متوقف"),3)]),t.selectedCompound.location_url?(n(),i("div",bt,[e[120]||(e[120]=s("span",{class:"text-slate-500 text-sm"},"الموقع",-1)),s("a",{href:t.selectedCompound.location_url,target:"_blank",class:"text-primary font-semibold flex items-center gap-1"},[...e[119]||(e[119]=[s("span",{class:"material-symbols-outlined text-lg"},"location_on",-1),v(" فتح في الخريطة ",-1)])],8,xt)])):a("",!0)]),s("div",gt,[s("button",{onClick:e[36]||(e[36]=(...o)=>d.startEditCompound&&d.startEditCompound(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...e[121]||(e[121]=[s("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),s("button",{onClick:e[37]||(e[37]=o=>d.toggleCompoundStatus(t.selectedCompound)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedCompound.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedCompound.is_active?"إيقاف":"تفعيل"),3)])],64)):(n(),i("div",ft,[s("div",null,[e[123]||(e[123]=s("label",{class:"block text-sm font-medium mb-1"},"اسم الكمبوند",-1)),c(s("input",{"onUpdate:modelValue":e[38]||(e[38]=o=>t.compoundForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: مدينتي"},null,512),[[p,t.compoundForm.name]])]),s("div",null,[e[124]||(e[124]=s("label",{class:"block text-sm font-medium mb-1"},"العنوان",-1)),c(s("input",{"onUpdate:modelValue":e[39]||(e[39]=o=>t.compoundForm.address=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: القاهرة الجديدة"},null,512),[[p,t.compoundForm.address]])]),s("div",null,[e[125]||(e[125]=s("label",{class:"block text-sm font-medium mb-1"},"رابط Google Maps",-1)),c(s("input",{"onUpdate:modelValue":e[40]||(e[40]=o=>t.compoundForm.location_url=o),type:"url",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"https://maps.google.com/...",dir:"ltr"},null,512),[[p,t.compoundForm.location_url]])]),s("div",ht,[s("button",{onClick:e[41]||(e[41]=(...o)=>d.saveCompound&&d.saveCompound(...o)),disabled:t.savingCompound,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingCompound?"جاري الحفظ...":t.selectedCompound?.id?"حفظ التغييرات":"إضافة الكمبوند"),9,vt),s("button",{onClick:e[42]||(e[42]=o=>{t.editingCompound=!1,t.showCompoundModal=!1}),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])]))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showPasswordModal,title:"تغيير كلمة المرور",onClose:e[48]||(e[48]=o=>t.showPasswordModal=!1)},{default:y(()=>[t.passwordChangeUser?(n(),i("div",wt,[s("div",yt,[e[127]||(e[127]=s("span",{class:"material-symbols-outlined text-2xl flex-shrink-0"},"info",-1)),s("div",kt,[s("p",_t,"تغيير كلمة المرور لـ: "+r(t.passwordChangeUser.name),1),e[126]||(e[126]=s("p",{class:"text-xs opacity-80"},"سيتم تحديث كلمة المرور فوراً وسيحتاج المستخدم لاستخدام الكلمة الجديدة عند تسجيل الدخول.",-1))])]),s("div",null,[e[128]||(e[128]=s("label",{class:"block text-sm font-medium mb-2"},"كلمة المرور الجديدة",-1)),c(s("input",{"onUpdate:modelValue":e[44]||(e[44]=o=>t.newPassword=o),type:"password",placeholder:"أدخل كلمة المرور الجديدة",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[p,t.newPassword]])]),s("div",null,[e[129]||(e[129]=s("label",{class:"block text-sm font-medium mb-2"},"تأكيد كلمة المرور",-1)),c(s("input",{"onUpdate:modelValue":e[45]||(e[45]=o=>t.confirmPassword=o),type:"password",placeholder:"أعد إدخال كلمة المرور",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[p,t.confirmPassword]])]),s("div",Ct,[s("button",{onClick:e[46]||(e[46]=(...o)=>d.changeUserPassword&&d.changeUserPassword(...o)),disabled:t.changingPassword||!t.newPassword||t.newPassword!==t.confirmPassword,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[t.changingPassword?(n(),i("span",St,"progress_activity")):a("",!0),s("span",null,r(t.changingPassword?"جاري التحديث...":"تحديث كلمة المرور"),1)],8,Ut),s("button",{onClick:e[47]||(e[47]=o=>{t.showPasswordModal=!1,t.newPassword="",t.confirmPassword=""}),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}," إلغاء ")])])):a("",!0)]),_:1},8,["show"])])],64)}const Tt=R(E,[["render",Ft],["__scopeId","data-v-cd3e524e"]]);export{Tt as default};
