import{E as D,l as P,m as y,c as a,o as l,h as x,d as t,n as v,t as n,b as d,w as g,p as f,e as b,F as m,s as w,g as M,q,v as C,a as p,u as F}from"./vendor-C-E02GEk.js";import{T as S,M as z}from"./Modal-ByR5uOWj.js";import{P as A}from"./PullToRefresh-DUVh2MdH.js";import{requestNotificationPermission as T}from"./firebase-CMJiYjKt.js";import{_ as U}from"./app-BsM0jE9A.js";/* empty css            */const K={name:"ProviderDashboard",components:{Head:P,Link:D,Modal:z,Toast:S,PullToRefresh:A},data(){return{activeTab:new URLSearchParams(window.location.search).get("tab")||"available",availableJobs:[],myJobs:[],reviews:[],reviewsPage:1,hasMoreReviews:!1,loading:!0,stats:{},showProposalModal:!1,showNotificationsModal:!1,notifications:[],loadingNotifications:!1,nextNotificationsUrl:null,loadingMoreNotifications:!1,unreadNotificationsCount:0,selectedJob:null,proposalForm:{price:"",notes:""},submittingProposal:!1,editingProposal:null,showConfirmModal:!1,confirmMessage:"",confirmAction:null,processingConfirm:!1,myJobsFilter:new URLSearchParams(window.location.search).get("filter")||"active",showRequestDetailsModal:!1,requestDetails:null,loadingKey:null,loadingMarkAll:!1,loadingMoreReviews:!1}},computed:{user(){const o=F();return o.props.auth?o.props.auth.user:{}},filteredMyJobs(){return this.myJobsFilter==="active"?this.myJobs.filter(o=>o.status==="accepted_offer"||o.status==="in_progress"):this.myJobs.filter(o=>o.status===this.myJobsFilter)},isMarketStaff(){return this.user.role==="provider"&&this.user.market_id}},mounted(){this.loadStats(),this.loadUnreadCount(),this.switchToTab(this.activeTab),"serviceWorker"in navigator&&this.$page.props.auth.user&&navigator.serviceWorker.ready.then(e=>{e.active&&e.active.postMessage({type:"SET_USER_ID",userId:this.$page.props.auth.user.id})}),"Notification"in window&&Notification.permission!=="granted"?setTimeout(()=>T(),1e3):"Notification"in window&&Notification.permission==="granted"&&T();const o=new URLSearchParams(window.location.search);o.has("request_id")&&this.focusRequest(parseInt(o.get("request_id"))),window.addEventListener("fcm-message",this.handleFcmMessage),window.addEventListener("open-request-details",this.handleOpenRequestDetails)},beforeUnmount(){window.removeEventListener("fcm-message",this.handleFcmMessage),window.removeEventListener("open-request-details",this.handleOpenRequestDetails)},methods:{handleOpenRequestDetails(o){o.detail&&o.detail.requestId&&this.focusRequest(o.detail.requestId)},handleFcmMessage(o){const e=o.detail;e?.data?.sender_id&&this.$page.props.auth.user&&e.data.sender_id==this.$page.props.auth.user.id||(this.unreadNotificationsCount++,this.showNotificationsModal&&this.loadNotifications(),e?.data?.request_id&&(this.loadAvailableJobs(),this.loadMyJobs()))},async triggerRefresh(){try{await Promise.all([this.loadStats(),this.loadUnreadCount(),this.loadAvailableJobs(!1),this.loadMyJobs(!1),this.activeTab==="reviews"?this.loadReviews(!1,!1):Promise.resolve()])}catch(o){console.error(o)}finally{this.loading=!1}},async focusRequest(o){this.myJobs.length===0&&await this.loadMyJobs();const e=this.myJobs.find(u=>u.id===o);if(e){this.switchToTab("myjobs"),this.myJobsFilter=e.status==="completed"?"completed":"active";return}this.availableJobs.length===0&&await this.loadAvailableJobs();const c=this.availableJobs.find(u=>u.id===o);if(c){this.switchToTab("available"),this.isMarketStaff?this.viewRequest(o):this.openProposalModal(c),this.$nextTick(()=>{const u=new URL(window.location);u.searchParams.set("tab","available"),u.searchParams.set("request_id",o),window.history.replaceState(window.history.state,"",u)});return}await this.viewRequest(o,"focus-"+o)},async viewRequest(o,e=null){e&&(this.loadingKey=e);try{const c=await p.get(`/api/requests/${o}`);c.data.success&&(this.requestDetails=c.data.request,this.showRequestDetailsModal=!0)}catch(c){console.error(c),window.showToast("تعذر تحميل تفاصيل الطلب","error")}finally{e&&(this.loadingKey=null)}},async toggleItem(o){if(!this.requestDetails||this.requestDetails.status!=="in_progress")return;const e=o.is_picked;o.is_picked=!o.is_picked;try{await p.put(`/api/request-items/${o.id}/toggle`)}catch{o.is_picked=e,window.showToast("فشل تحديث الحالة","error")}},async startMarketOrder(o,e=null){const c=o||this.requestDetails;e&&(this.loadingKey=e);try{(await p.post(`/api/requests/${c.id}/start-market-order`)).data.success&&(window.showToast("تم بدء التجهيز","success"),this.showRequestDetailsModal=!1,this.triggerRefresh())}catch(u){window.showToast(u.response?.data?.message||"حدث خطأ","error")}finally{e&&(this.loadingKey=null)}},setMyJobsFilter(o){this.myJobsFilter=o,this.updateUrlParams({filter:o})},switchToTab(o){this.activeTab=o;const e={tab:o};o!=="myjobs"?e.filter=null:e.filter=this.myJobsFilter,this.updateUrlParams(e),o==="available"?this.loadAvailableJobs():o==="myjobs"?this.loadMyJobs():o==="reviews"&&this.loadReviews(!0)},updateUrlParams(o){const e=new URL(window.location);Object.keys(o).forEach(c=>{o[c]===null?e.searchParams.delete(c):e.searchParams.set(c,o[c])}),window.history.replaceState(window.history.state,"",e)},async loadStats(){try{const o=await p.get("/api/provider/stats");o.data.success&&(this.stats=o.data.stats)}catch{}},async loadAvailableJobs(o=!0){o&&(this.loading=!0);try{const e=await p.get("/api/provider/available-requests");e.data.success&&(this.availableJobs=e.data.requests.data)}catch(e){console.error(e)}finally{o&&(this.loading=!1)}},async loadMyJobs(o=!0){o&&(this.loading=!0);try{const e=await p.get("/api/provider/my-jobs");e.data.success&&(this.myJobs=e.data.jobs.data)}catch(e){console.error(e)}finally{o&&(this.loading=!1)}},async loadReviews(o=!0,e=!0){o?(this.reviewsPage=1,this.reviews=[],e&&(this.loading=!0)):this.loadingMoreReviews=!0;try{const c=await p.get(`/api/provider/reviews?page=${this.reviewsPage}`);c.data.success&&(o?this.reviews=c.data.reviews.data:this.reviews=[...this.reviews,...c.data.reviews.data],this.hasMoreReviews=!!c.data.reviews.next_page_url)}catch(c){console.error(c)}finally{o?e&&(this.loading=!1):this.loadingMoreReviews=!1}},loadMoreReviews(){this.reviewsPage++,this.loadReviews(!1)},openProposalModal(o){this.selectedJob=o,o.proposals&&o.proposals.length>0?(this.editingProposal=o.proposals[0],this.proposalForm={price:this.editingProposal.price,notes:this.editingProposal.notes}):(this.editingProposal=null,this.proposalForm={price:"",notes:""}),this.showProposalModal=!0},async submitProposal(){this.submittingProposal=!0;try{let o;this.editingProposal?o=await p.put(`/api/proposals/${this.editingProposal.id}`,this.proposalForm):o=await p.post(`/api/requests/${this.selectedJob.id}/proposals`,this.proposalForm),o.data.success?(window.showToast(this.editingProposal?"تم تعديل العرض بنجاح":"تم تقديم العرض بنجاح","success"),this.showProposalModal=!1,this.loadAvailableJobs()):window.showToast(o.data.message,"error")}catch(o){window.showToast("حدث خطأ","error"),console.error(o)}finally{this.submittingProposal=!1}},updateJobStatus(o,e){this.confirmMessage=e==="in_progress"?"هل تود بدء العمل الآن؟ سيتم إشعار العميل بذلك.":"هل تود تأكيد إكمال العمل؟ سيتم إشعار العميل وإتاحة التقييم.",this.showConfirmModal=!0,this.confirmAction=async()=>{this.processingConfirm=!0;try{const c=this.myJobs.find(r=>r.id===o)||this.availableJobs.find(r=>r.id===o);if(!c&&e==="in_progress"){window.showToast("لم يتم العثور على الطلب","error");return}let u="";e==="in_progress"?u=`/api/proposals/${c.accepted_proposal?.id}/start`:u=`/api/requests/${o}/complete`;const i=await p.post(u);i.data.success?(window.showToast("تم تحديث حالة العمل","success"),this.triggerRefresh(),this.showConfirmModal=!1,this.showRequestDetailsModal=!1):(window.showToast(i.data.message||"حدث خطأ","error"),this.showConfirmModal=!1)}catch(c){console.error(c),window.showToast("حدث خطأ","error"),this.showConfirmModal=!1}finally{this.processingConfirm=!1}}},handleNotificationClick(o){o.is_read||(p.post(`/api/notifications/${o.id}/read`).catch(()=>{}),o.is_read=!0,this.unreadNotificationsCount=Math.max(0,this.unreadNotificationsCount-1));const e=o.data?.request_id;if(e){if(window.history.state?.modal){const c={...window.history.state};delete c.modal,window.history.replaceState(c,"",window.location.href)}this.showNotificationsModal=!1,this.focusRequest(e)}else this.showNotificationsModal=!1},async loadNotifications(){this.loadingNotifications=!0;try{const o=await p.get("/api/notifications");o.data.success&&(this.notifications=o.data.notifications.data,this.nextNotificationsUrl=o.data.notifications.next_page_url||null,o.data.unread_count!==void 0&&(this.unreadNotificationsCount=o.data.unread_count))}catch(o){console.error(o)}finally{this.loadingNotifications=!1}},async loadMoreNotifications(){if(!(!this.nextNotificationsUrl||this.loadingMoreNotifications)){this.loadingMoreNotifications=!0;try{const o=await p.get(this.nextNotificationsUrl);o.data.success&&(this.notifications=[...this.notifications,...o.data.notifications.data],this.nextNotificationsUrl=o.data.notifications.next_page_url||null)}catch(o){console.error(o)}finally{this.loadingMoreNotifications=!1}}},async markAllNotificationsAsRead(){this.loadingMarkAll=!0;try{(await p.post("/api/notifications/read-all")).data.success&&(this.notifications.forEach(e=>e.is_read=!0),this.unreadNotificationsCount=0,window.showToast("تم تحديد الكل كمقروء","success"))}catch(o){console.error(o),window.showToast("حدث خطأ","error")}finally{this.loadingMarkAll=!1}},async loadUnreadCount(){try{const o=await p.get("/api/notifications/unread-count");o.data.success&&(this.unreadNotificationsCount=o.data.count)}catch{}},formatDate(o){return new Date(o).toLocaleDateString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}},E={class:"relative flex h-[100vh] w-full flex-col overflow-hidden max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-2xl font-display",dir:"rtl"},L={class:"flex items-center px-4 py-3 pb-2 justify-between z-10 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md sticky top-0 transition-all duration-300",style:{"padding-top":"max(0.75rem, env(safe-area-inset-top))"}},I={class:"flex items-center gap-3"},O={class:"relative"},V={class:"text-slate-500 dark:text-slate-400 text-xs font-medium"},B={class:"flex items-center justify-end"},H={key:0,class:"absolute top-2 right-2.5 size-2 bg-red-500 rounded-full"},W={class:"flex-1 overflow-y-auto overflow-x-hidden no-scrollbar pb-24"},G={class:"px-4 py-3 sticky top-0 z-10 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm overflow-x-auto no-scrollbar"},Q={class:"flex h-12 min-w-max items-center rounded-xl bg-slate-200 dark:bg-slate-800 p-1"},X={key:0,class:"absolute inset-0 z-0 rounded-lg bg-primary shadow-sm"},Y={key:0,class:"absolute inset-0 z-0 rounded-lg bg-primary shadow-sm"},Z={key:0,class:"absolute inset-0 z-0 rounded-lg bg-primary shadow-sm"},j={class:"px-4 mb-2 grid grid-cols-2 gap-3"},$={class:"flex items-center gap-2 mb-1"},ee={class:"text-xs font-medium text-slate-500 dark:text-slate-400"},te={key:0,class:"text-xl font-bold text-slate-900 dark:text-white"},se={key:1,class:"text-xl font-bold text-slate-900 dark:text-white"},oe={class:"text-xl font-bold text-slate-900 dark:text-white"},ie={class:"px-4 pt-2 pb-2 flex justify-between items-end"},ae={class:"text-base font-bold text-slate-900 dark:text-white"},le={class:"flex flex-col gap-4 px-4 pb-4"},re={key:0,class:"text-center py-8 text-slate-400"},ne={key:0,class:"flex flex-col items-center justify-center p-8 text-center opacity-60"},de={class:"p-4 flex flex-col gap-3"},ce={class:"flex justify-between items-start"},ue={class:"flex items-center gap-2 mb-1"},pe={class:"bg-white/90 dark:bg-slate-900/90 backdrop-blur px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm border border-slate-100 dark:border-slate-700"},me={class:"material-symbols-outlined text-primary text-[16px]"},fe={class:"text-xs font-bold text-slate-800 dark:text-slate-200"},xe={class:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1"},be={class:"flex flex-col gap-0.5 text-slate-500 dark:text-slate-400"},he={class:"flex items-center gap-1"},ge={class:"text-xs font-medium"},ye={key:0,class:"flex items-center gap-1 text-xs px-1"},we=["href"],ke={class:"bg-slate-900/60 backdrop-blur px-2 py-1 rounded-md text-xs font-medium text-white flex items-center gap-1"},ve={key:0,class:"flex items-center justify-center gap-1 text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-xl w-full"},_e={class:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700/50"},Me={class:"text-slate-600 dark:text-slate-300 text-sm line-clamp-2"},qe={class:"pt-1 flex gap-3"},Ce=["disabled","onClick"],Te={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},Ne={key:1,class:"material-symbols-outlined"},Re=["disabled","onClick"],Je={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},De=["disabled","onClick"],Pe={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},Fe=["onClick"],Se={key:0},ze={key:1},Ae={class:"material-symbols-outlined text-[18px]"},Ue={class:"flex gap-3 mb-4 overflow-x-auto no-scrollbar pb-2 px-4 -mx-4"},Ke={class:"flex gap-2 pr-4 child-shrink-0"},Ee={key:0,class:"flex flex-col items-center justify-center p-8 text-center opacity-60"},Le={class:"text-slate-500 dark:text-slate-400 text-sm"},Ie={class:"flex justify-between items-start"},Oe={class:"text-[10px] font-bold text-primary uppercase tracking-wider mb-1 block"},Ve={class:"font-bold text-slate-900 dark:text-white text-lg"},Be=["href"],He={class:"mt-2 text-slate-500 dark:text-slate-400 text-xs"},We={class:"flex items-center gap-1"},Ge={key:0,class:"flex items-center gap-1 mt-1"},Qe=["href"],Xe={key:0,class:"flex items-center justify-center gap-1 text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-xl w-full"},Ye={class:"flex items-center justify-between pt-3 border-t border-slate-100 dark:border-slate-700"},Ze={key:0,class:"font-bold text-xl text-emerald-600"},je={key:1,class:"font-bold text-sm text-slate-500"},$e={key:2,class:"flex gap-2"},et=["onClick"],tt=["onClick"],st={class:"pt-3 border-t border-slate-100 dark:border-slate-700 flex gap-2"},ot=["disabled","onClick"],it={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},at={key:0,class:"flex flex-col items-center justify-center p-8 text-center opacity-60"},lt={key:1,class:"space-y-4"},rt={class:"flex justify-between items-start"},nt={class:"flex items-center gap-3"},dt={class:"font-bold text-slate-900 dark:text-white text-sm"},ct={class:"text-xs text-slate-400"},ut={class:"flex items-center gap-1 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg"},pt={class:"font-bold text-amber-600 dark:text-amber-400 text-sm"},mt={key:0,class:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg relative"},ft={class:"relative"},xt={class:"flex items-center gap-2 mt-1"},bt={class:"text-[10px] font-bold px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded text-slate-500"},ht=["disabled"],gt={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},yt={class:"fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-200 dark:border-slate-800 pb-safe z-40"},wt={class:"flex items-center justify-around h-16 max-w-md mx-auto"},kt={class:"space-y-4"},vt={class:"flex flex-col gap-1.5"},_t={class:"flex flex-col gap-1.5"},Mt=["disabled"],qt={key:0,class:"material-symbols-outlined animate-spin"},Ct={key:0,class:"flex items-center justify-between mb-4 px-1"},Tt=["disabled"],Nt={key:0,class:"material-symbols-outlined animate-spin text-[14px]"},Rt={class:"space-y-3"},Jt={key:0,class:"text-center py-12 text-slate-400"},Dt={key:1,class:"text-center py-8 text-slate-400"},Pt=["onClick"],Ft={class:"flex-1"},St={class:"text-sm font-bold"},zt={class:"text-xs text-slate-500"},At={class:"text-[10px] text-slate-400 mt-1"},Ut=["disabled"],Kt={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},Et={key:0,class:"space-y-4"},Lt={class:"flex items-start gap-3"},It={class:"font-bold text-slate-900 dark:text-white"},Ot=["href"],Vt={class:"bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-100 dark:border-slate-700 text-sm text-slate-600 dark:text-slate-300"},Bt={class:"mr-6"},Ht={key:0,class:"mr-6 text-xs mt-1 text-slate-400"},Wt={key:0},Gt={class:"flex items-center justify-between mb-2"},Qt={class:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-full text-slate-500 font-bold"},Xt={class:"space-y-2"},Yt=["onClick"],Zt={class:"flex items-center gap-3"},jt={key:0,class:"material-symbols-outlined text-white text-sm font-bold"},$t={class:"flex flex-col"},es={key:0,class:"text-[9px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-tighter"},ts={class:"font-bold bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs"},ss={key:1,class:"bg-yellow-50 dark:bg-yellow-900/10 p-3 rounded-xl border border-yellow-100 dark:border-yellow-800 text-sm text-yellow-700 dark:text-yellow-400"},os={class:"pt-4 border-t border-slate-100 dark:border-slate-700 flex gap-3"},is=["disabled"],as={key:0,class:"material-symbols-outlined animate-spin text-[18px]"},ls={class:"space-y-4"},rs={class:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl flex gap-3 text-amber-800 dark:text-amber-200"},ns={class:"text-sm font-medium leading-relaxed"},ds={class:"flex gap-3"},cs=["disabled"],us={key:0,class:"material-symbols-outlined animate-spin text-[18px]"};function ps(o,e,c,u,i,r){const N=y("Head"),R=y("Toast"),J=y("PullToRefresh"),_=y("Link"),k=y("Modal");return l(),a(m,null,[x(N,{title:"لوحة التحكم - مقدم الخدمة"}),x(R),t("div",E,[t("div",L,[t("div",I,[t("div",O,[t("div",{class:"bg-center bg-no-repeat bg-cover rounded-full size-10 ring-2 ring-primary/20",style:v(`background-image: url('${r.user.photo||"https://ui-avatars.com/api/?name="+r.user.name}');`)},null,4),e[25]||(e[25]=t("div",{class:"absolute bottom-0 right-0 size-3 bg-green-500 rounded-full border-2 border-white dark:border-background-dark"},null,-1))]),t("div",null,[e[26]||(e[26]=t("h2",{class:"text-slate-900 dark:text-white text-lg font-bold leading-tight"},"لوحة التحكم",-1)),t("p",V,"مرحباً، "+n(r.user.name?.split(" ")[0]),1)])]),t("div",B,[t("button",{onClick:e[0]||(e[0]=s=>{i.showNotificationsModal=!0,r.loadNotifications()}),class:"relative flex items-center justify-center rounded-full size-10 bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"},[e[27]||(e[27]=t("span",{class:"material-symbols-outlined text-[24px]"},"notifications",-1)),i.unreadNotificationsCount>0?(l(),a("span",H)):d("",!0)])])]),t("div",W,[x(J,{onRefresh:r.triggerRefresh,class:"h-full"},{default:g(()=>[t("div",G,[t("div",Q,[t("label",{onClick:e[1]||(e[1]=s=>r.switchToTab("available")),class:"group relative flex cursor-pointer h-full min-w-[100px] flex-1 items-center justify-center overflow-hidden rounded-lg px-6 transition-all duration-200"},[t("span",{class:f(["relative z-10 truncate text-sm font-semibold transition-colors",i.activeTab==="available"?"text-white":"text-slate-500 dark:text-slate-400"])},"الطلبات المتاحة",2),i.activeTab==="available"?(l(),a("div",X)):d("",!0)]),t("label",{onClick:e[2]||(e[2]=s=>r.switchToTab("myjobs")),class:"group relative flex cursor-pointer h-full min-w-[100px] flex-1 items-center justify-center overflow-hidden rounded-lg px-6 transition-all duration-200"},[t("span",{class:f(["relative z-10 truncate text-sm font-semibold transition-colors",i.activeTab==="myjobs"?"text-white":"text-slate-500 dark:text-slate-400"])},"أعمالي",2),i.activeTab==="myjobs"?(l(),a("div",Y)):d("",!0)]),t("label",{onClick:e[3]||(e[3]=s=>r.switchToTab("reviews")),class:"group relative flex cursor-pointer h-full min-w-[100px] flex-1 items-center justify-center overflow-hidden rounded-lg px-6 transition-all duration-200"},[t("span",{class:f(["relative z-10 truncate text-sm font-semibold transition-colors",i.activeTab==="reviews"?"text-white":"text-slate-500 dark:text-slate-400"])},"التقييمات",2),i.activeTab==="reviews"?(l(),a("div",Z)):d("",!0)])])]),t("div",j,[t("div",{onClick:e[4]||(e[4]=s=>{r.switchToTab("myjobs"),r.setMyJobsFilter("completed")}),class:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm cursor-pointer active:scale-95 transition-transform"},[t("div",$,[t("span",{class:f(["material-symbols-outlined text-xl",r.isMarketStaff?"text-primary":"text-green-500"])},n(r.isMarketStaff?"shopping_bag":"payments"),3),t("span",ee,n(r.isMarketStaff?"طلبات اليوم":"الأرباح اليوم"),1)]),r.isMarketStaff?(l(),a("p",te,[b(n(i.stats.today_completed_jobs||0)+" ",1),e[28]||(e[28]=t("span",{class:"text-xs font-normal text-slate-400"},"طلب",-1))])):(l(),a("p",se,n(i.stats.today_earnings||0)+" ج.م",1))]),t("div",{onClick:e[5]||(e[5]=s=>r.switchToTab("reviews")),class:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm cursor-pointer active:scale-95 transition-transform"},[e[30]||(e[30]=t("div",{class:"flex items-center gap-2 mb-1"},[t("span",{class:"material-symbols-outlined text-primary text-xl"},"star"),t("span",{class:"text-xs font-medium text-slate-500 dark:text-slate-400"},"التقييم")],-1)),t("p",oe,[b(n(i.stats.average_rating?Number(i.stats.average_rating).toFixed(1):"0.0")+" ",1),e[29]||(e[29]=t("span",{class:"text-xs font-normal text-slate-400"},"/ 5.0",-1))])])]),t("div",ie,[t("h3",ae,n(i.activeTab==="available"?"فرص جديدة":i.activeTab==="myjobs"?"أعمالي الحالية":"آراء العملاء"),1)]),t("div",le,[i.loading?(l(),a("div",re,[...e[31]||(e[31]=[t("span",{class:"material-symbols-outlined text-4xl animate-spin"},"progress_activity",-1)])])):i.activeTab==="available"?(l(),a(m,{key:1},[i.availableJobs.length===0?(l(),a("div",ne,[...e[32]||(e[32]=[t("div",{class:"size-16 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center mb-4"},[t("span",{class:"material-symbols-outlined text-3xl text-slate-400"},"check_circle")],-1),t("p",{class:"text-slate-500 dark:text-slate-400 text-sm"},"لا توجد طلبات متاحة حالياً.",-1)])])):d("",!0),(l(!0),a(m,null,w(i.availableJobs,s=>(l(),a("div",{key:s.id,class:"flex flex-col rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden group"},[t("div",de,[t("div",ce,[t("div",null,[t("div",ue,[t("div",pe,[t("span",me,n(s.category?.icon),1),t("span",fe,n(s.category?.name),1)])]),t("h3",xe,n(s.resident?.name),1),t("div",be,[t("div",he,[e[33]||(e[33]=t("span",{class:"material-symbols-outlined text-[16px]"},"location_on",-1)),t("p",ge,n(s.resident?.block_no?`مبنى ${s.resident.block_no}، الطابق ${s.resident.floor||"-"}، شقة ${s.resident.apt_no}`:"العنوان غير محدد"),1)]),s.resident?.compound?(l(),a("div",ye,[e[35]||(e[35]=t("span",{class:"material-symbols-outlined text-[14px]"},"apartment",-1)),t("span",null,n(s.resident.compound.name),1),s.resident.compound.location_url?(l(),a("a",{key:0,href:s.resident.compound.location_url,target:"_blank",class:"text-primary hover:underline flex items-center gap-0.5 mr-2 font-bold",onClick:e[6]||(e[6]=M(()=>{},["stop"]))},[...e[34]||(e[34]=[t("span",{class:"material-symbols-outlined text-[14px]"},"map",-1),b(" الموقع ",-1)])],8,we)):d("",!0)])):d("",!0)])]),t("div",ke,[e[36]||(e[36]=t("span",{class:"material-symbols-outlined text-[14px]"},"schedule",-1)),b(" "+n(r.formatDate(s.created_at)),1)])]),s.delivery_method?(l(),a("div",ve,[e[37]||(e[37]=t("span",{class:"material-symbols-outlined text-[16px]"},"directions_car",-1)),t("span",null,n(s.delivery_method),1)])):d("",!0),t("div",_e,[t("p",Me,n(s.notes||"لا توجد تفاصيل إضافية"),1)]),t("div",qe,[t("button",{disabled:i.loadingKey==="view-"+s.id,onClick:h=>r.viewRequest(s.id,"view-"+s.id),class:"flex-1 h-10 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 font-medium text-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center"},[i.loadingKey==="view-"+s.id?(l(),a("span",Te,"progress_activity")):(l(),a("span",Ne,"visibility"))],8,Ce),r.isMarketStaff?(l(),a(m,{key:0},[s.status==="pending"?(l(),a("button",{key:0,disabled:i.loadingKey==="cap-"+s.id,onClick:h=>r.startMarketOrder(s,"cap-"+s.id),class:"flex-[3] h-10 rounded-lg bg-emerald-600 text-white font-medium text-sm shadow-md shadow-emerald-500/20 hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2"},[i.loadingKey==="cap-"+s.id?(l(),a("span",Je,"progress_activity")):(l(),a(m,{key:1},[e[38]||(e[38]=t("span",null,"التقاط الطلب",-1)),e[39]||(e[39]=t("span",{class:"material-symbols-outlined text-[18px]"},"add_shopping_cart",-1))],64))],8,Re)):(l(),a("button",{key:1,disabled:i.loadingKey==="comp-"+s.id,onClick:h=>r.viewRequest(s.id,"comp-"+s.id),class:"flex-[3] h-10 rounded-lg bg-blue-600 text-white font-medium text-sm shadow-md shadow-blue-500/20 hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"},[i.loadingKey==="comp-"+s.id?(l(),a("span",Pe,"progress_activity")):(l(),a(m,{key:1},[e[40]||(e[40]=t("span",null,"إكمال الطلب",-1)),e[41]||(e[41]=t("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1))],64))],8,De))],64)):(l(),a("button",{key:1,onClick:h=>r.openProposalModal(s),class:"flex-[3] h-10 rounded-lg bg-primary text-white font-medium text-sm shadow-md shadow-blue-500/20 hover:bg-blue-600 transition-colors flex items-center justify-center gap-2"},[s.proposals&&s.proposals.length>0?(l(),a("span",Se,"تعديل العرض ("+n(s.proposals[0].price)+" ج.م)",1)):(l(),a("span",ze,"تقديم عرض")),t("span",Ae,n(s.proposals&&s.proposals.length>0?"edit":"arrow_back"),1)],8,Fe))])])]))),128))],64)):i.activeTab==="myjobs"?(l(),a(m,{key:2},[t("div",Ue,[t("div",Ke,[t("button",{onClick:e[7]||(e[7]=s=>r.setMyJobsFilter("active")),class:f(["shrink-0 h-8 px-4 rounded-full text-sm font-semibold shadow-sm transition-colors",i.myJobsFilter==="active"?"bg-slate-900 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])}," الأعمال النشطة ",2),t("button",{onClick:e[8]||(e[8]=s=>r.setMyJobsFilter("completed")),class:f(["shrink-0 h-8 px-4 rounded-full text-sm font-semibold shadow-sm transition-colors",i.myJobsFilter==="completed"?"bg-slate-900 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])}," مكتمل ",2)])]),r.filteredMyJobs.length===0?(l(),a("div",Ee,[e[42]||(e[42]=t("div",{class:"size-16 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center mb-4"},[t("span",{class:"material-symbols-outlined text-3xl text-slate-400"},"work_off")],-1)),t("p",Le,"ليس لديك أعمال "+n(i.myJobsFilter==="active"?"نشطة":"مكتملة")+".",1)])):d("",!0),(l(!0),a(m,null,w(r.filteredMyJobs,s=>(l(),a("div",{key:s.id,class:"flex flex-col rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden p-4 gap-3"},[t("div",Ie,[t("div",null,[t("span",Oe,n(s.category?.name),1),t("h4",Ve,n(s.resident?.name),1),t("a",{href:`tel:${s.resident?.phone}`,class:"flex items-center gap-1 text-sm text-slate-500 mt-1 hover:text-primary"},[e[43]||(e[43]=t("span",{class:"material-symbols-outlined text-[16px]"},"call",-1)),b(" "+n(s.resident?.phone),1)],8,Be),t("div",He,[t("p",We,[e[44]||(e[44]=t("span",{class:"material-symbols-outlined text-[14px]"},"location_on",-1)),b(" "+n(s.resident?.block_no?`مبنى ${s.resident.block_no}، الطابق ${s.resident.floor||"-"}، شقة ${s.resident.apt_no}`:"العنوان غير محدد"),1)]),s.resident?.compound?(l(),a("div",Ge,[e[46]||(e[46]=t("span",{class:"material-symbols-outlined text-[14px]"},"apartment",-1)),t("span",null,n(s.resident.compound.name),1),s.resident.compound.location_url?(l(),a("a",{key:0,href:s.resident.compound.location_url,target:"_blank",class:"text-primary hover:underline flex items-center gap-0.5 mr-2 font-bold",onClick:e[9]||(e[9]=M(()=>{},["stop"]))},[...e[45]||(e[45]=[t("span",{class:"material-symbols-outlined text-[14px]"},"map",-1),b(" الموقع ",-1)])],8,Qe)):d("",!0)])):d("",!0)])]),t("span",{class:f(["px-2.5 py-1 rounded-full text-xs font-bold",{"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":s.status==="in_progress","bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":s.status==="accepted_offer","bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":s.status==="completed"}])},n(s.status==="in_progress"?"جاري التنفيذ":s.status==="completed"?"مكتمل":"بانتظار البدء"),3)]),s.delivery_method?(l(),a("div",Xe,[e[47]||(e[47]=t("span",{class:"material-symbols-outlined text-[16px]"},"directions_car",-1)),t("span",null,n(s.delivery_method),1)])):d("",!0),t("div",Ye,[s.accepted_proposal?.price>0?(l(),a("span",Ze,n(s.accepted_proposal?.price)+" ج.م",1)):(l(),a("span",je,"طلب ماركت")),s.status!=="completed"?(l(),a("div",$e,[s.status==="accepted_offer"?(l(),a("button",{key:0,onClick:h=>r.updateJobStatus(s.id,"in_progress"),class:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold shadow-md hover:bg-blue-700 transition-colors"},"بدء العمل",8,et)):d("",!0),s.status==="in_progress"?(l(),a("button",{key:1,onClick:h=>r.updateJobStatus(s.id,"completed"),class:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold shadow-md hover:bg-green-700 transition-colors"},"إكمال",8,tt)):d("",!0)])):d("",!0)]),t("div",st,[t("button",{disabled:i.loadingKey==="view-"+s.id,onClick:h=>r.viewRequest(s.id,"view-"+s.id),class:"flex-1 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors flex items-center justify-center gap-2"},[i.loadingKey==="view-"+s.id?(l(),a("span",it,"progress_activity")):(l(),a(m,{key:1},[e[48]||(e[48]=t("span",null,"عرض التفاصيل",-1)),e[49]||(e[49]=t("span",{class:"material-symbols-outlined text-[18px]"},"visibility",-1))],64))],8,ot)])]))),128))],64)):i.activeTab==="reviews"?(l(),a(m,{key:3},[i.reviews.length===0?(l(),a("div",at,[...e[50]||(e[50]=[t("div",{class:"size-16 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center mb-4"},[t("span",{class:"material-symbols-outlined text-3xl text-slate-400"},"star_rate")],-1),t("p",{class:"text-slate-500 dark:text-slate-400 text-sm"},"لا توجد تقييمات بعد.",-1)])])):(l(),a("div",lt,[(l(!0),a(m,null,w(i.reviews,s=>(l(),a("div",{key:s.id,class:"flex flex-col rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden p-4 gap-3"},[t("div",rt,[t("div",nt,[t("div",{class:"size-10 rounded-full bg-slate-100 dark:bg-slate-700 bg-cover bg-center",style:v(`background-image: url('${s.request?.resident?.photo||"https://ui-avatars.com/api/?name="+s.request?.resident?.name}');`)},null,4),t("div",null,[t("h4",dt,n(s.request?.resident?.name),1),t("p",ct,n(r.formatDate(s.created_at)),1)])]),t("div",ut,[t("span",pt,n(s.rating),1),e[51]||(e[51]=t("span",{class:"material-symbols-outlined text-[16px] text-amber-500 filled"},"star",-1))])]),s.comment?(l(),a("p",mt,[e[52]||(e[52]=t("span",{class:"material-symbols-outlined absolute top-1 right-2 text-slate-200 dark:text-slate-700 text-3xl opacity-30"},"format_quote",-1)),t("span",ft,n(s.comment),1)])):d("",!0),t("div",xt,[t("span",bt,n(s.request?.category?.name),1)])]))),128)),i.hasMoreReviews?(l(),a("button",{key:0,disabled:i.loadingMoreReviews,onClick:e[10]||(e[10]=(...s)=>r.loadMoreReviews&&r.loadMoreReviews(...s)),class:"w-full py-3 text-sm font-bold text-primary bg-primary/5 hover:bg-primary/10 rounded-xl transition-colors flex items-center justify-center gap-2"},[i.loadingMoreReviews?(l(),a("span",gt,"progress_activity")):d("",!0),e[53]||(e[53]=t("span",null,"تحميل المزيد",-1))],8,ht)):d("",!0)]))],64)):d("",!0)])]),_:1},8,["onRefresh"])]),t("nav",yt,[t("div",wt,[x(_,{href:"/dashboard",class:"flex flex-col items-center justify-center flex-1 h-full gap-1 text-primary"},{default:g(()=>[...e[54]||(e[54]=[t("span",{class:"material-symbols-outlined filled"},"home",-1),t("span",{class:"text-[10px] font-medium"},"الرئيسية",-1)])]),_:1}),x(_,{href:"/settings",class:"flex flex-col items-center justify-center flex-1 h-full gap-1 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},{default:g(()=>[...e[55]||(e[55]=[t("span",{class:"material-symbols-outlined"},"person",-1),t("span",{class:"text-[10px] font-medium"},"الحساب",-1)])]),_:1})])]),x(k,{show:i.showProposalModal,title:"تقديم عرض سعر",onClose:e[14]||(e[14]=s=>i.showProposalModal=!1)},{default:g(()=>[t("div",kt,[t("div",vt,[e[56]||(e[56]=t("label",{class:"text-sm font-bold text-slate-900 dark:text-white"},"السعر المقترح (ج.م)",-1)),q(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>i.proposalForm.price=s),type:"number",class:"w-full h-12 px-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50",placeholder:"0.00"},null,512),[[C,i.proposalForm.price]])]),t("div",_t,[e[57]||(e[57]=t("label",{class:"text-sm font-bold text-slate-900 dark:text-white"},"ملاحظات العرض",-1)),q(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>i.proposalForm.notes=s),class:"w-full h-24 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 resize-none",placeholder:"اكتب تفاصيل عرضك هنا..."},null,512),[[C,i.proposalForm.notes]])]),t("button",{onClick:e[13]||(e[13]=(...s)=>r.submitProposal&&r.submitProposal(...s)),disabled:i.submittingProposal||!i.proposalForm.price,class:"w-full py-3 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 flex items-center justify-center gap-2"},[i.submittingProposal?(l(),a("span",qt,"progress_activity")):d("",!0),e[58]||(e[58]=t("span",null,"إرسال العرض",-1))],8,Mt)])]),_:1},8,["show"]),x(k,{show:i.showNotificationsModal,title:"الإشعارات",onClose:e[17]||(e[17]=s=>i.showNotificationsModal=!1)},{default:g(()=>[i.notifications.length>0?(l(),a("div",Ct,[e[60]||(e[60]=t("h3",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"سجل التنبيهات",-1)),i.unreadNotificationsCount>0?(l(),a("button",{key:0,disabled:i.loadingMarkAll,onClick:e[15]||(e[15]=(...s)=>r.markAllNotificationsAsRead&&r.markAllNotificationsAsRead(...s)),class:"text-xs font-bold text-primary hover:underline flex items-center gap-1"},[i.loadingMarkAll?(l(),a("span",Nt,"progress_activity")):d("",!0),e[59]||(e[59]=t("span",null,"تحديد الكل كمقروء",-1))],8,Tt)):d("",!0)])):d("",!0),t("div",Rt,[i.loadingNotifications?(l(),a("div",Jt,[...e[61]||(e[61]=[t("span",{class:"material-symbols-outlined text-5xl animate-spin"},"progress_activity",-1),t("p",{class:"mt-3 text-sm font-medium"},"جاري تحميل الإشعارات...",-1)])])):i.notifications.length===0?(l(),a("div",Dt,[...e[62]||(e[62]=[t("span",{class:"material-symbols-outlined text-4xl"},"notifications_off",-1),t("p",{class:"mt-2"},"لا توجد إشعارات",-1)])])):d("",!0),(l(!0),a(m,null,w(i.notifications,s=>(l(),a("div",{key:s.id,onClick:h=>r.handleNotificationClick(s),class:f(["flex gap-3 p-3 rounded-xl cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",s.is_read?"bg-slate-50 dark:bg-slate-800/50":"bg-primary/5 border border-primary/20"])},[e[63]||(e[63]=t("div",{class:"size-10 rounded-full flex items-center justify-center flex-shrink-0 bg-white shadow-sm text-primary"},[t("span",{class:"material-symbols-outlined"},"notifications")],-1)),t("div",Ft,[t("h4",St,n(s.title),1),t("p",zt,n(s.body),1),t("p",At,n(r.formatDate(s.created_at)),1)])],10,Pt))),128)),i.nextNotificationsUrl?(l(),a("button",{key:2,onClick:e[16]||(e[16]=(...s)=>r.loadMoreNotifications&&r.loadMoreNotifications(...s)),disabled:i.loadingMoreNotifications,class:"w-full mt-2 py-3 text-sm font-bold text-primary bg-primary/10 dark:bg-primary/20 hover:bg-primary/20 rounded-xl transition-colors flex items-center justify-center gap-2"},[i.loadingMoreNotifications?(l(),a("span",Kt,"progress_activity")):d("",!0),t("span",null,n(i.loadingMoreNotifications?"جاري التحميل...":"تحميل المزيد"),1)],8,Ut)):d("",!0)])]),_:1},8,["show"]),x(k,{show:i.showRequestDetailsModal,title:"تفاصيل الطلب",onClose:e[21]||(e[21]=s=>i.showRequestDetailsModal=!1)},{default:g(()=>[i.requestDetails?(l(),a("div",Et,[t("div",Lt,[t("div",{class:"size-12 rounded-full bg-slate-100 dark:bg-slate-700 bg-cover bg-center",style:v(`background-image: url('${i.requestDetails.resident?.photo||"https://ui-avatars.com/api/?name="+i.requestDetails.resident?.name}');`)},null,4),t("div",null,[t("h3",It,n(i.requestDetails.resident?.name),1),t("a",{href:`tel:${i.requestDetails.resident?.phone}`,class:"text-sm text-slate-500 hover:text-primary flex items-center gap-1"},[e[64]||(e[64]=t("span",{class:"material-symbols-outlined text-[16px]"},"call",-1)),b(" "+n(i.requestDetails.resident?.phone),1)],8,Ot)])]),t("div",Vt,[e[65]||(e[65]=t("p",{class:"flex items-center gap-2 mb-1"},[t("span",{class:"material-symbols-outlined text-primary"},"location_on"),t("span",{class:"font-bold"},"العنوان:")],-1)),t("p",Bt,n(i.requestDetails.resident?.block_no?`مبنى ${i.requestDetails.resident.block_no}، الطابق ${i.requestDetails.resident.floor||"-"}، شقة ${i.requestDetails.resident.apt_no}`:"العنوان غير محدد"),1),i.requestDetails.resident?.compound?(l(),a("p",Ht,n(i.requestDetails.resident.compound.name),1)):d("",!0)]),i.requestDetails.items&&i.requestDetails.items.length>0?(l(),a("div",Wt,[t("div",Gt,[e[66]||(e[66]=t("h4",{class:"font-bold flex items-center gap-2"},[t("span",{class:"material-symbols-outlined text-primary"},"shopping_cart"),b(" قائمة الطلبات ")],-1)),t("span",Qt,n(i.requestDetails.items.filter(s=>s.is_picked).length)+" / "+n(i.requestDetails.items.length),1)]),t("div",Xt,[(l(!0),a(m,null,w(i.requestDetails.items,s=>(l(),a("div",{key:s.id,onClick:h=>i.requestDetails.status==="in_progress"&&r.isMarketStaff?r.toggleItem(s):null,class:f(["flex items-center justify-between p-3 rounded-lg border transition-all cursor-pointer",s.is_picked?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800":"bg-white border-slate-200 dark:bg-slate-800 dark:border-slate-700"])},[t("div",Zt,[t("div",{class:f(["size-6 rounded-md border-2 flex items-center justify-center transition-all duration-300",s.is_picked?"bg-emerald-500 border-emerald-500 shadow-sm shadow-emerald-500/20":"border-slate-300 dark:border-slate-600"])},[s.is_picked?(l(),a("span",jt,"check")):d("",!0)],2),t("div",$t,[t("span",{class:f(["font-bold text-sm transition-all duration-300",s.is_picked?"text-slate-400 line-through":"text-slate-700 dark:text-slate-200"])},n(s.name),3),s.is_picked?(l(),a("span",es,"تم التجهيز")):d("",!0)])]),t("span",ts,n(s.quantity),1)],10,Yt))),128))])])):(l(),a("div",ss,[e[67]||(e[67]=t("p",{class:"font-bold mb-1"},"تفاصيل الطلب",-1)),t("p",null,n(i.requestDetails.notes||"لا توجد تفاصيل إضافية"),1)])),t("div",os,[i.requestDetails.status==="pending"&&r.isMarketStaff?(l(),a("button",{key:0,disabled:i.loadingKey==="modal-start",onClick:e[18]||(e[18]=s=>r.startMarketOrder(i.requestDetails,"modal-start")),class:"flex-1 py-3 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:bg-primary/90 transition-colors flex items-center justify-center gap-2"},[i.loadingKey==="modal-start"?(l(),a("span",as,"progress_activity")):(l(),a(m,{key:1},[e[68]||(e[68]=t("span",null,"بدء التجهيز",-1)),e[69]||(e[69]=t("span",{class:"material-symbols-outlined"},"play_arrow",-1))],64))],8,is)):d("",!0),i.requestDetails.status==="in_progress"?(l(),a("button",{key:1,onClick:e[19]||(e[19]=s=>r.updateJobStatus(i.requestDetails.id,"completed")),class:"flex-1 py-3 bg-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-600/20 hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2"},[...e[70]||(e[70]=[t("span",null,"إكمال الطلب",-1),t("span",{class:"material-symbols-outlined"},"check_circle",-1)])])):d("",!0),t("button",{onClick:e[20]||(e[20]=s=>i.showRequestDetailsModal=!1),class:"px-6 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors"}," إغلاق ")])])):d("",!0)]),_:1},8,["show"]),x(k,{show:i.showConfirmModal,title:"تأكيد الإجراء",onClose:e[24]||(e[24]=s=>i.showConfirmModal=!1)},{default:g(()=>[t("div",ls,[t("div",rs,[e[71]||(e[71]=t("span",{class:"material-symbols-outlined text-2xl flex-shrink-0"},"warning",-1)),t("p",ns,n(i.confirmMessage),1)]),t("div",ds,[t("button",{onClick:e[22]||(e[22]=s=>i.showConfirmModal=!1),class:"flex-1 py-3 text-slate-600 dark:text-slate-300 font-bold bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-xl transition-colors"}," إلغاء "),t("button",{onClick:e[23]||(e[23]=(...s)=>i.confirmAction&&i.confirmAction(...s)),disabled:i.processingConfirm,class:"flex-1 py-3 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 flex items-center justify-center gap-2 hover:bg-blue-600 transition-colors"},[i.processingConfirm?(l(),a("span",us,"progress_activity")):d("",!0),e[72]||(e[72]=t("span",null,"تأكيد",-1))],8,cs)])])]),_:1},8,["show"])])],64)}const ys=U(K,[["render",ps],["__scopeId","data-v-a7c8f7bc"]]);export{ys as default};
