const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.esm-Cgd8yjKO.js","assets/index.esm-BJAW3Jpj.js","assets/index.esm-C3YETN53.js"])))=>i.map(i=>d[i]);
import{a as o}from"./app-C3eXmBe3.js";import{a as u}from"./vendor-C-E02GEk.js";/* empty css            */const d={apiKey:"AIzaSyCf6DUu21s4qhbD2fLkSypCRDkSnCbzQCo",authDomain:"garden-city-compound.firebaseapp.com",projectId:"garden-city-compound",storageBucket:"garden-city-compound.firebasestorage.app",messagingSenderId:"358088420520",appId:"1:358088420520:web:7cdd88dc6d98d2c6f0269d"};let s=null,r=null,c=null;async function g(){if(!s){const{initializeApp:t}=await o(async()=>{const{initializeApp:e}=await import("./index.esm-Cgd8yjKO.js");return{initializeApp:e}},__vite__mapDeps([0,1])),{getMessaging:i}=await o(async()=>{const{getMessaging:e}=await import("./index.esm-C3YETN53.js");return{getMessaging:e}},__vite__mapDeps([2,1]));s=t(d),r=i(s)}return r}async function m(){if(c)return;const{onMessage:t}=await o(async()=>{const{onMessage:e}=await import("./index.esm-C3YETN53.js");return{onMessage:e}},__vite__mapDeps([2,1])),i=await g();c=t(i,e=>{console.log("Foreground message received:",e),window.dispatchEvent(new CustomEvent("fcm-message",{detail:e}))})}async function v(){if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("Push is not supported");return}try{if(await Notification.requestPermission()==="granted"){const{getToken:i}=await o(async()=>{const{getToken:a}=await import("./index.esm-C3YETN53.js");return{getToken:a}},__vite__mapDeps([2,1])),e=await g(),p=await navigator.serviceWorker.register("/service-worker.js");await navigator.serviceWorker.ready,await new Promise(a=>setTimeout(a,300));const n=await i(e,{vapidKey:"BC6EtV4AwjM5kQj92nuF9b31rzDE1Pj7htPT6ESqa8yGD10Uln3QHrApWppge6Uexd9UsQFCdbtXvoDBR-D4-6E",serviceWorkerRegistration:p});n&&sessionStorage.getItem("fcm_token")!==n&&(await u.post("/api/notifications/save-token",{token:n}),sessionStorage.setItem("fcm_token",n)),await m()}}catch(t){console.error("FCM Error:",t)}}export{r as messaging,v as requestNotificationPermission};
