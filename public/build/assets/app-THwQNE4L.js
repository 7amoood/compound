const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Csj5HfyT.js","assets/vendor-CI1Fej2Q.js","assets/Modal-Bkjoorcn.js","assets/Modal-DA7eKiM2.css","assets/Dashboard-CdXyEzhZ.css","assets/app-DnQ54YCK.css","assets/Login-BIvmYZ83.js","assets/Login-DVkUkv3A.css","assets/Dashboard-8syYMhWX.js","assets/firebase-T4-w8vAP.js","assets/firebase-Dm6APd8e.css","assets/Dashboard-DQvYZe-Z.css","assets/Dashboard-Cxcd9MY-.js","assets/Dashboard-Bd8aFefC.css","assets/Settings-DdDhznS9.js","assets/Settings-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{a as S,c as w,b as x,d as s,e as b,o as u,f as k,w as P,t as g,g as C,T as I,h as L,r as y,i as T,j as f}from"./vendor-CI1Fej2Q.js";/* empty css            */const R="modulepreload",$=function(t){return"/build/"+t},_={},h=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let E=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");i=E(n.map(l=>{if(l=$(l),l in _)return;_[l]=!0;const m=l.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":R,m||(c.as="script"),c.crossOrigin="",c.href=l,d&&c.setAttribute("nonce",d),document.head.appendChild(c),m)return new Promise((A,O)=>{c.addEventListener("load",A),c.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};window.axios=S;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";async function D(t,e){for(const n of Array.isArray(t)?t:[t]){const r=e[n];if(!(typeof r>"u"))return typeof r=="function"?r():r}throw new Error(`Page not found: ${t}`)}const v=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},N={data(){return{deferredPrompt:null,showOverlay:!1,isIOS:!1}},mounted(){this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.showOverlay=!0}),this.isIOS&&(this.showOverlay=!0))},methods:{async installApp(){if(!this.deferredPrompt){this.isIOS&&window.showToast("اتبع تعليمات الإضافة في الأسفل","info");return}this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;t==="accepted"&&(console.log("User accepted the install prompt"),this.showOverlay=!1),this.deferredPrompt=null}}},B={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-6 overflow-hidden"},M={class:"relative w-full max-w-sm bg-white dark:bg-slate-800 rounded-3xl p-8 flex flex-col items-center text-center shadow-2xl animate-in fade-in zoom-in duration-300"},j={key:1,class:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-600"};function q(t,e,n,r,i,o){return i.showOverlay?(u(),w("div",B,[s("div",M,[e[4]||(e[4]=s("div",{class:"w-24 h-24 bg-primary/10 rounded-2xl flex items-center justify-center mb-6 shadow-inner tracking-tighter"},[s("img",{src:"/icons/icon-192x192.png",class:"w-16 h-16 object-contain",alt:"App Logo"})],-1)),e[5]||(e[5]=s("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-2"},"ثبّت التطبيق الآن",-1)),e[6]||(e[6]=s("p",{class:"text-slate-500 dark:text-slate-400 mb-8 leading-relaxed"}," للحصول على أفضل تجربة وأسرع وصول لخدمات المجمع، يرجى إضافة التطبيق إلى شاشتك الرئيسية. ",-1)),s("button",{onClick:e[0]||(e[0]=(...a)=>o.installApp&&o.installApp(...a)),class:"w-full bg-primary text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/30 hover:bg-blue-600 active:scale-95 transition-all mb-4 flex items-center justify-center gap-2"},[...e[2]||(e[2]=[s("span",{class:"material-symbols-outlined"},"download",-1),s("span",null,"تثبيت الآن",-1)])]),i.isIOS?x("",!0):(u(),w("button",{key:0,onClick:e[1]||(e[1]=a=>i.showOverlay=!1),class:"text-slate-400 dark:text-slate-500 text-sm font-medium hover:text-slate-600 dark:hover:text-slate-400 transition-colors"}," سأقوم بذلك لاحقاً ")),i.isIOS?(u(),w("div",j,[...e[3]||(e[3]=[s("p",{class:"text-xs text-slate-600 dark:text-slate-300 flex flex-col items-center gap-2"},[s("span",null,[b("لأجهزة iOS، اضغط على زر "),s("span",{class:"material-symbols-outlined text-[18px] align-middle"},"ios_share"),b(' ثم "إضافة للشاشة الرئيسية"')])],-1)])])):x("",!0)])])):x("",!0)}const W=v(N,[["render",q]]),V={name:"InAppNotification",data(){return{notification:null,timeout:null}},computed:{title(){return this.notification?.notification?.title||"إشعار جديد"},body(){return this.notification?.notification?.body||""},icon(){const t=this.notification?.data?.type;return{NEW_REQUEST:"potted_plant",NEW_PROPOSAL:"local_offer",PROPOSAL_ACCEPTED:"check_circle",WORK_COMPLETED:"verified",NEW_REVIEW:"star"}[t]||"notifications"}},mounted(){window.addEventListener("fcm-message",this.handleMessage)},beforeUnmount(){window.removeEventListener("fcm-message",this.handleMessage)},methods:{handleMessage(t){this.notification=t.detail,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.notification=null},6e3);try{const e=new Audio("/sounds/notification.wav");e.volume=.5,e.play()}catch(e){console.warn("Sound play failed",e)}},handleClick(){const t=this.notification?.data?.request_id;t&&window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(t)}})),this.notification=null}}},U={class:"size-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0"},z={class:"material-symbols-outlined text-primary text-2xl"},K={class:"flex-1 min-w-0"},X={class:"text-sm font-bold text-slate-900 dark:text-white truncate"},F={class:"text-xs text-slate-500 dark:text-slate-400 mt-1 line-clamp-2"};function H(t,e,n,r,i,o){return u(),k(I,{name:"notif"},{default:P(()=>[i.notification?(u(),w("div",{key:0,onClick:e[1]||(e[1]=(...a)=>o.handleClick&&o.handleClick(...a)),class:"fixed left-4 right-4 z-[110] bg-white dark:bg-slate-800 shadow-2xl rounded-2xl p-4 border border-slate-100 dark:border-slate-700 flex items-start gap-4 cursor-pointer active:scale-95 transition-transform max-w-md mx-auto pointer-events-auto",style:{top:"max(1rem, calc(env(safe-area-inset-top) + 0.5rem))"},dir:"rtl"},[s("div",U,[s("span",z,g(o.icon),1)]),s("div",K,[s("h4",X,g(o.title),1),s("p",F,g(o.body),1),e[2]||(e[2]=s("div",{class:"mt-2 flex items-center text-[10px] font-bold text-primary uppercase tracking-wider"},[s("span",null,"اضغط للتفاصيل"),s("span",{class:"material-symbols-outlined text-[14px] mr-1"},"chevron_left")],-1))]),s("button",{onClick:e[0]||(e[0]=C(a=>i.notification=null,["stop"])),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...e[3]||(e[3]=[s("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])])):x("",!0)]),_:1})}const Q=v(V,[["render",H],["__scopeId","data-v-db7824c5"]]),G={name:"OpenInAppBanner",data(){return{showBanner:!1,isStandalone:!1}},mounted(){this.checkContext()},methods:{checkContext(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),this.isStandalone||sessionStorage.getItem("app_banner_dismissed")||setTimeout(()=>{this.showBanner=!0},2e3)},openInApp(){if(/android/i.test(navigator.userAgent)){const t=`intent://${window.location.host}${window.location.pathname}${window.location.search}#Intent;scheme=https;package=org.chromium.webapk.${this.getWebAPKId()};end`,e=document.createElement("iframe");e.style.display="none",e.src=t,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)}this.showInstruction()},showInstruction(){const t=/iPad|iPhone|iPod/.test(navigator.userAgent),e=/android/i.test(navigator.userAgent);let n="";t?n=`لفتح التطبيق:
1. اضغط على أيقونة التطبيق من الشاشة الرئيسية

أو إذا لم تثبته بعد:
1. اضغط على زر المشاركة ⬆️
2. اختر "إضافة إلى الشاشة الرئيسية"`:e&&(n=`لفتح التطبيق:
1. اضغط على أيقونة التطبيق من الشاشة الرئيسية

أو إذا لم تثبته بعد:
1. اضغط على قائمة المتصفح ⋮
2. اختر "إضافة إلى الشاشة الرئيسية" أو "تثبيت التطبيق"`),n&&alert(n),this.dismiss()},getWebAPKId(){const t=window.location.host;let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return Math.abs(e).toString(16)},dismiss(){this.showBanner=!1,sessionStorage.setItem("app_banner_dismissed","true")}}},J={key:0,class:"fixed top-0 left-0 right-0 z-[9999] bg-gradient-to-r from-primary to-blue-600 text-white px-4 py-3 shadow-lg",style:{"padding-top":"max(env(safe-area-inset-top), 12px)"}},Y={class:"max-w-md mx-auto flex items-center justify-between gap-3"},Z={class:"flex items-center gap-2"};function ee(t,e,n,r,i,o){return u(),k(I,{name:"slide-down"},{default:P(()=>[i.showBanner?(u(),w("div",J,[s("div",Y,[e[3]||(e[3]=s("div",{class:"flex items-center gap-3"},[s("div",{class:"size-10 rounded-xl bg-white/20 flex items-center justify-center"},[s("span",{class:"material-symbols-outlined text-[24px]"},"phone_iphone")]),s("div",null,[s("p",{class:"text-sm font-bold"},"افتح التطبيق"),s("p",{class:"text-xs opacity-80"},"تجربة أفضل وأسرع")])],-1)),s("div",Z,[s("button",{onClick:e[0]||(e[0]=(...a)=>o.openInApp&&o.openInApp(...a)),class:"bg-white text-primary px-4 py-2 rounded-lg text-sm font-bold shadow-sm active:scale-95 transition-transform"}," فتح "),s("button",{onClick:e[1]||(e[1]=(...a)=>o.dismiss&&o.dismiss(...a)),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...e[2]||(e[2]=[s("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):x("",!0)]),_:1})}const te=v(G,[["render",ee],["__scopeId","data-v-7a694221"]]);L({title:t=>`${t} - خدمات المجمع`,resolve:t=>D(`./Pages/${t}.vue`,Object.assign({"./Pages/Admin/Dashboard.vue":()=>h(()=>import("./Dashboard-Csj5HfyT.js"),__vite__mapDeps([0,1,2,3,4,5])),"./Pages/Auth/Login.vue":()=>h(()=>import("./Login-BIvmYZ83.js"),__vite__mapDeps([6,1,7,5])),"./Pages/Provider/Dashboard.vue":()=>h(()=>import("./Dashboard-8syYMhWX.js"),__vite__mapDeps([8,1,2,3,9,10,11,5])),"./Pages/Resident/Dashboard.vue":()=>h(()=>import("./Dashboard-Cxcd9MY-.js"),__vite__mapDeps([12,1,2,3,9,10,13,5])),"./Pages/Settings.vue":()=>h(()=>import("./Settings-DdDhznS9.js"),__vite__mapDeps([14,1,2,3,15,5]))})),setup({el:t,App:e,props:n,plugin:r}){const i=T({render:()=>f("div",[f(te),f(e,n),f(W),f(Q)])});return i.use(r),i.mount(t),i},progress:{delay:0,color:"#137fec",includeCSS:!0,showSpinner:!1}});if("BroadcastChannel"in window){const t=new BroadcastChannel("notification_channel");t.onmessage=e=>{if(e.data&&e.data.type==="ON_NOTIFICATION_CLICK"){const n=e.data.url,r=new URL(n,window.location.origin),i=r.searchParams.get("request_id");if(i){const o=window.location.pathname;o.includes("/resident")||o.includes("/provider")||o.includes("/dashboard")?window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(i)}})):y.visit(n)}else{const o=r.pathname+r.search;y.visit(o)}}}}export{v as _,h as a};
