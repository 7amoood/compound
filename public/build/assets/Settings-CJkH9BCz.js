import{E as _,k as T,l as p,c as n,o as d,m as x,d as t,w as f,t as l,A,n as j,q as i,v as m,p as c,e as g,F as y,s as F,b as h,a as u,z as C}from"./vendor-CI1Fej2Q.js";import{M as P,T as S}from"./Modal-DCVUoU58.js";import{_ as V}from"./app-CG4YV_Mf.js";/* empty css            */const L={name:"Settings",components:{Head:T,Link:_,Toast:S,Modal:P},data(){return{form:{name:"",phone:""},passwordForm:{current_password:"",new_password:"",new_password_confirmation:""},saving:!1,changingPassword:!1,theme:"auto",avatars:["/avatars/man_1.png","/avatars/woman_1.png","/avatars/man_2.png","/avatars/woman_2.png","/avatars/man_3.png","/avatars/woman_3.png","/avatars/boy.png","/avatars/girl.png"],selectingAvatar:!1,showAvatarGallery:!1,nextAvatar:null}},computed:{user(){const r=C();return r.props.auth?r.props.auth.user:{}},csrfToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}},watch:{user:{handler(r){r&&(this.form.name=r.name||"",this.form.phone=r.phone||"")},immediate:!0,deep:!0}},mounted(){localStorage.theme==="dark"?this.theme="dark":localStorage.theme==="light"?this.theme="light":this.theme="auto"},methods:{async saveProfile(){this.saving=!0;try{(await u.put("/api/settings/profile",{name:this.form.name,phone:this.form.phone})).data.success&&window.showToast("تم حفظ البيانات بنجاح","success")}catch{window.showToast("حدث خطأ أثناء الحفظ","error")}finally{this.saving=!1}},async selectAvatar(r){this.selectingAvatar=!0,this.nextAvatar=r;try{(await u.post("api/settings/avatar",{avatar:r})).data.success&&(window.showToast("تم تحديث الصورة الشخصية","success"),this.$inertia.reload({only:["auth"]}),setTimeout(()=>{this.showAvatarGallery=!1},500))}catch{window.showToast("حدث خطأ أثناء تحديث الصورة","error")}finally{this.selectingAvatar=!1,this.nextAvatar=null}},async changePassword(){if(!this.passwordForm.current_password||!this.passwordForm.new_password||!this.passwordForm.new_password_confirmation){window.showToast("يرجى ملء جميع الحقول","error");return}if(this.passwordForm.new_password!==this.passwordForm.new_password_confirmation){window.showToast("كلمة المرور الجديدة غير متطابقة","error");return}this.changingPassword=!0;try{const r=await u.put("/api/settings/password",this.passwordForm);r.data.success?(window.showToast("تم تحديث كلمة المرور بنجاح","success"),this.passwordForm={current_password:"",new_password:"",new_password_confirmation:""}):window.showToast(r.data.message||"حدث خطأ","error")}catch(r){window.showToast(r.response?.data?.message||"حدث خطأ","error")}finally{this.changingPassword=!1}},setTheme(r){this.theme=r,r==="dark"?(localStorage.theme="dark",document.documentElement.classList.add("dark")):r==="light"?(localStorage.theme="light",document.documentElement.classList.remove("dark")):(localStorage.removeItem("theme"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))}}},E={class:"relative flex h-[100dvh] w-full flex-col mx-auto max-w-md bg-background-light dark:bg-background-dark font-display",dir:"rtl"},M={class:"sticky top-0 z-50 flex items-center justify-between px-4 py-3 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-800"},G=["disabled"],N={class:"flex-1 overflow-y-auto no-scrollbar pb-24 px-0"},z={class:"flex flex-col items-center justify-center pt-8 pb-6 px-4"},q={class:"mt-3 text-center"},B={class:"text-xl font-bold text-[#0d141b] dark:text-white"},H={class:"text-sm text-gray-500 dark:text-gray-400 font-medium"},U={class:"px-4 mb-6"},D={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},I={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},W={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},J={class:"px-4 mb-6"},K={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},O={class:"flex items-center px-4 py-3"},Q={class:"flex items-center px-4 py-3"},R={class:"flex items-center px-4 py-3"},X=["disabled"],Y={class:"px-4 mb-6"},Z={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},$={class:"flex flex-col px-4 py-3 gap-3"},ee={class:"grid grid-cols-3 gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl"},te={class:"grid grid-cols-3 gap-4 p-2"},se=["onClick","disabled"],ae=["src"],re={key:0,class:"absolute inset-0 bg-primary/20 flex items-center justify-center"},oe={key:1,class:"absolute inset-0 bg-black/20 flex items-center justify-center"};function ne(r,e,de,le,a,o){const w=p("Head"),v=p("Toast"),b=p("Link"),k=p("Modal");return d(),n(y,null,[x(w,{title:"الإعدادات - خدمات المجمع"}),x(v),t("div",E,[t("header",M,[x(b,{href:"/dashboard",class:"flex items-center text-primary text-base font-normal -mr-1"},{default:f(()=>[...e[12]||(e[12]=[t("span",{class:"material-symbols-outlined text-2xl"},"chevron_right",-1),t("span",null,"رجوع",-1)])]),_:1}),e[13]||(e[13]=t("h1",{class:"text-[17px] font-semibold text-center text-[#0d141b] dark:text-white absolute left-1/2 transform -translate-x-1/2"},"الإعدادات",-1)),t("button",{onClick:e[0]||(e[0]=(...s)=>o.saveProfile&&o.saveProfile(...s)),disabled:a.saving,class:"text-primary text-[17px] font-semibold"},l(a.saving?"...":"حفظ"),9,G)]),t("div",N,[t("div",z,[t("div",{class:"relative cursor-pointer group",onClick:e[1]||(e[1]=s=>a.showAvatarGallery=!0)},[t("div",{class:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 bg-cover bg-center shadow-sm border-2 border-white dark:border-gray-800 transition-transform active:scale-95",style:j(`background-image: url('${o.user.photo||"https://ui-avatars.com/api/?name="+o.user.name}');`)},null,4),e[14]||(e[14]=t("div",{class:"absolute bottom-0 right-0 bg-primary text-white rounded-full p-1.5 shadow-md border-2 border-white dark:border-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform"},[t("span",{class:"material-symbols-outlined text-[16px] leading-none"},"photo_camera")],-1))]),t("div",q,[t("h2",B,l(o.user.name),1),t("p",H,l(o.user.role==="resident"?"ساكن":o.user.role==="provider"?"مقدم خدمة":"مسؤول")+" • "+l(o.user.apt_no?`شقة ${o.user.apt_no}`:o.user.phone),1)])]),t("div",U,[e[17]||(e[17]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"المعلومات الشخصية",-1)),t("div",D,[t("div",I,[e[15]||(e[15]=t("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الاسم",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.form.name=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"text"},null,512),[[m,a.form.name]])]),t("div",W,[e[16]||(e[16]=t("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الهاتف",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.form.phone=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"tel"},null,512),[[m,a.form.phone]])])])]),t("div",J,[e[21]||(e[21]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"كلمة المرور",-1)),t("div",K,[t("div",O,[e[18]||(e[18]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الحالية",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.passwordForm.current_password=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.current_password]])]),t("div",Q,[e[19]||(e[19]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الجديدة",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.passwordForm.new_password=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.new_password]])]),t("div",R,[e[20]||(e[20]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"تأكيد الجديدة",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.passwordForm.new_password_confirmation=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.new_password_confirmation]])])]),t("button",{onClick:e[7]||(e[7]=(...s)=>o.changePassword&&o.changePassword(...s)),disabled:a.changingPassword,class:"mt-3 w-full bg-slate-100 dark:bg-slate-800 rounded-xl p-3 text-primary font-medium text-[16px] transition-colors"},l(a.changingPassword?"جاري التحديث...":"تحديث كلمة المرور"),9,X)]),t("div",Y,[e[26]||(e[26]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"الإشعارات",-1)),t("div",Z,[t("div",$,[e[25]||(e[25]=t("span",{class:"text-[16px] text-gray-900 dark:text-white font-normal"},"المظهر",-1)),t("div",ee,[t("button",{onClick:e[8]||(e[8]=s=>o.setTheme("light")),class:c(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="light"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[22]||(e[22]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"light_mode",-1),g(" فاتح ",-1)])],2),t("button",{onClick:e[9]||(e[9]=s=>o.setTheme("dark")),class:c(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="dark"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[23]||(e[23]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"dark_mode",-1),g(" داكن ",-1)])],2),t("button",{onClick:e[10]||(e[10]=s=>o.setTheme("auto")),class:c(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="auto"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[24]||(e[24]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"settings_brightness",-1),g(" تلقائي ",-1)])],2)])])])]),e[30]||(e[30]=A('<div class="px-4 mb-8" data-v-d310670e><h3 class="pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide" data-v-d310670e>الدعم والقانون</h3><div class="bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800" data-v-d310670e><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-d310670e><div class="flex items-center gap-3" data-v-d310670e><div class="w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-primary" data-v-d310670e><span class="material-symbols-outlined text-[18px]" data-v-d310670e>help</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-d310670e>مركز المساعدة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-d310670e>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-d310670e><div class="flex items-center gap-3" data-v-d310670e><div class="w-7 h-7 rounded-md bg-blue-500/10 flex items-center justify-center text-blue-500" data-v-d310670e><span class="material-symbols-outlined text-[18px]" data-v-d310670e>lock</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-d310670e>سياسة الخصوصية</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-d310670e>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-d310670e><div class="flex items-center gap-3" data-v-d310670e><div class="w-7 h-7 rounded-md bg-purple-500/10 flex items-center justify-center text-purple-500" data-v-d310670e><span class="material-symbols-outlined text-[18px]" data-v-d310670e>description</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-d310670e>شروط الخدمة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-d310670e>chevron_left</span></a></div></div><div class="px-4 mb-8" data-v-d310670e><a href="/logout" class="w-full flex items-center justify-center bg-surface-light dark:bg-surface-dark rounded-xl p-3 shadow-sm text-red-500 font-medium text-[16px] active:bg-red-50 dark:active:bg-red-900/20 transition-colors" data-v-d310670e> تسجيل الخروج </a><p class="text-center text-xs text-gray-400 mt-4" data-v-d310670e>CommunityApp v1.0.0</p></div>',2)),x(k,{show:a.showAvatarGallery,title:"اختر صورة البروفيل",onClose:e[11]||(e[11]=s=>a.showAvatarGallery=!1)},{default:f(()=>[t("div",te,[(d(!0),n(y,null,F(a.avatars,s=>(d(),n("button",{key:s,onClick:ie=>o.selectAvatar(s),disabled:a.selectingAvatar,class:c(["relative aspect-square rounded-2xl overflow-hidden border-2 transition-all active:scale-95",o.user.photo?.endsWith(s)?"border-primary ring-4 ring-primary/20":"border-slate-100 dark:border-slate-700"])},[t("img",{src:s,class:"w-full h-full object-cover"},null,8,ae),o.user.photo?.endsWith(s)?(d(),n("div",re,[...e[27]||(e[27]=[t("span",{class:"material-symbols-outlined text-white text-2xl font-bold"},"check_circle",-1)])])):h("",!0),a.selectingAvatar&&a.nextAvatar===s?(d(),n("div",oe,[...e[28]||(e[28]=[t("span",{class:"material-symbols-outlined text-white animate-spin"},"progress_activity",-1)])])):h("",!0)],10,se))),128))]),e[29]||(e[29]=t("p",{class:"text-center text-xs text-slate-400 mt-6 pb-2"},"اختر الصورة التي تعبر عنك وسيتم تحديثها فوراً",-1))]),_:1},8,["show"])])])],64)}const ge=V(L,[["render",ne],["__scopeId","data-v-d310670e"]]);export{ge as default};
