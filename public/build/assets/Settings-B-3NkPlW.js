import{_ as b,h as k,r as c,c as n,o as l,a as x,b as e,p as _,t as i,n as T,w as d,v as m,e as p,i as g,g as A,F as f,f as F,d as y,m as u,u as j}from"./app-D-xiL7so.js";import{M as C,T as P}from"./Modal-CskD8dPS.js";/* empty css            */const S={name:"Settings",components:{Head:k,Toast:P,Modal:C},data(){return{form:{name:"",phone:""},passwordForm:{current_password:"",new_password:"",new_password_confirmation:""},saving:!1,changingPassword:!1,theme:"auto",avatars:["/avatars/man_1.png","/avatars/woman_1.png","/avatars/man_2.png","/avatars/woman_2.png","/avatars/man_3.png","/avatars/woman_3.png","/avatars/boy.png","/avatars/girl.png"],selectingAvatar:!1,showAvatarGallery:!1,nextAvatar:null}},computed:{user(){const r=j();return r.props.auth?r.props.auth.user:{}},csrfToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}},watch:{user:{handler(r){r&&(this.form.name=r.name||"",this.form.phone=r.phone||"")},immediate:!0,deep:!0}},mounted(){localStorage.theme==="dark"?this.theme="dark":localStorage.theme==="light"?this.theme="light":this.theme="auto"},methods:{async saveProfile(){this.saving=!0;try{(await u.put("/api/settings/profile",{name:this.form.name,phone:this.form.phone})).data.success&&window.showToast("تم حفظ البيانات بنجاح","success")}catch{window.showToast("حدث خطأ أثناء الحفظ","error")}finally{this.saving=!1}},async selectAvatar(r){this.selectingAvatar=!0,this.nextAvatar=r;try{(await u.post("/settings/avatar",{avatar:r})).data.success&&(window.showToast("تم تحديث الصورة الشخصية","success"),this.$inertia.reload({only:["auth"]}),setTimeout(()=>{this.showAvatarGallery=!1},500))}catch{window.showToast("حدث خطأ أثناء تحديث الصورة","error")}finally{this.selectingAvatar=!1,this.nextAvatar=null}},async changePassword(){if(!this.passwordForm.current_password||!this.passwordForm.new_password||!this.passwordForm.new_password_confirmation){window.showToast("يرجى ملء جميع الحقول","error");return}if(this.passwordForm.new_password!==this.passwordForm.new_password_confirmation){window.showToast("كلمة المرور الجديدة غير متطابقة","error");return}this.changingPassword=!0;try{const r=await u.put("/api/settings/password",this.passwordForm);r.data.success?(window.showToast("تم تحديث كلمة المرور بنجاح","success"),this.passwordForm={current_password:"",new_password:"",new_password_confirmation:""}):window.showToast(r.data.message||"حدث خطأ","error")}catch(r){window.showToast(r.response?.data?.message||"حدث خطأ","error")}finally{this.changingPassword=!1}},setTheme(r){this.theme=r,r==="dark"?(localStorage.theme="dark",document.documentElement.classList.add("dark")):r==="light"?(localStorage.theme="light",document.documentElement.classList.remove("dark")):(localStorage.removeItem("theme"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))}}},V={class:"relative flex h-full min-h-screen w-full flex-col mx-auto max-w-md bg-background-light dark:bg-background-dark pb-20 font-display",dir:"rtl"},M={class:"sticky top-0 z-50 flex items-center justify-between px-4 py-3 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800"},E=["disabled"],G={class:"flex flex-col items-center justify-center pt-8 pb-6 px-4"},L={class:"mt-3 text-center"},N={class:"text-xl font-bold text-[#0d141b] dark:text-white"},z={class:"text-sm text-gray-500 dark:text-gray-400 font-medium"},B={class:"px-4 mb-6"},H={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},U={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},q={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},D={class:"px-4 mb-6"},I={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},W={class:"flex items-center px-4 py-3"},O={class:"flex items-center px-4 py-3"},J={class:"flex items-center px-4 py-3"},K=["disabled"],Q={class:"px-4 mb-6"},R={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},X={class:"flex flex-col px-4 py-3 gap-3"},Y={class:"grid grid-cols-3 gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl"},Z={class:"px-4 mb-8"},$={method:"POST",action:"/logout"},tt=["value"],et={class:"grid grid-cols-3 gap-4 p-2"},st=["onClick","disabled"],at=["src"],rt={key:0,class:"absolute inset-0 bg-primary/20 flex items-center justify-center"},ot={key:1,class:"absolute inset-0 bg-black/20 flex items-center justify-center"};function nt(r,t,lt,it,a,o){const h=c("Head"),w=c("Toast"),v=c("Modal");return l(),n(f,null,[x(h,{title:"الإعدادات - خدمات المجمع"}),x(w),e("div",V,[e("header",M,[t[12]||(t[12]=e("a",{href:"/dashboard",class:"flex items-center text-primary text-base font-normal -mr-1"},[e("span",{class:"material-symbols-outlined text-2xl"},"chevron_right"),e("span",null,"رجوع")],-1)),t[13]||(t[13]=e("h1",{class:"text-[17px] font-semibold text-center text-[#0d141b] dark:text-white absolute left-1/2 transform -translate-x-1/2"},"الإعدادات",-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>o.saveProfile&&o.saveProfile(...s)),disabled:a.saving,class:"text-primary text-[17px] font-semibold"},i(a.saving?"...":"حفظ"),9,E)]),e("div",G,[e("div",{class:"relative cursor-pointer group",onClick:t[1]||(t[1]=s=>a.showAvatarGallery=!0)},[e("div",{class:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 bg-cover bg-center shadow-sm border-2 border-white dark:border-gray-800 transition-transform active:scale-95",style:T(`background-image: url('${o.user.photo||"https://ui-avatars.com/api/?name="+o.user.name}');`)},null,4),t[14]||(t[14]=e("div",{class:"absolute bottom-0 right-0 bg-primary text-white rounded-full p-1.5 shadow-md border-2 border-white dark:border-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform"},[e("span",{class:"material-symbols-outlined text-[16px] leading-none"},"photo_camera")],-1))]),e("div",L,[e("h2",N,i(o.user.name),1),e("p",z,i(o.user.role==="resident"?"ساكن":o.user.role==="provider"?"مقدم خدمة":"مسؤول")+" • "+i(o.user.apt_no?`شقة ${o.user.apt_no}`:o.user.phone),1)])]),e("div",B,[t[17]||(t[17]=e("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"المعلومات الشخصية",-1)),e("div",H,[e("div",U,[t[15]||(t[15]=e("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الاسم",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.form.name=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"text"},null,512),[[m,a.form.name]])]),e("div",q,[t[16]||(t[16]=e("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الهاتف",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.form.phone=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"tel"},null,512),[[m,a.form.phone]])])])]),e("div",D,[t[21]||(t[21]=e("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"كلمة المرور",-1)),e("div",I,[e("div",W,[t[18]||(t[18]=e("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الحالية",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.passwordForm.current_password=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.current_password]])]),e("div",O,[t[19]||(t[19]=e("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الجديدة",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.passwordForm.new_password=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.new_password]])]),e("div",J,[t[20]||(t[20]=e("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"تأكيد الجديدة",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.passwordForm.new_password_confirmation=s),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,a.passwordForm.new_password_confirmation]])])]),e("button",{onClick:t[7]||(t[7]=(...s)=>o.changePassword&&o.changePassword(...s)),disabled:a.changingPassword,class:"mt-3 w-full bg-slate-100 dark:bg-slate-800 rounded-xl p-3 text-primary font-medium text-[16px] transition-colors"},i(a.changingPassword?"جاري التحديث...":"تحديث كلمة المرور"),9,K)]),e("div",Q,[t[26]||(t[26]=e("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"الإشعارات",-1)),e("div",R,[e("div",X,[t[25]||(t[25]=e("span",{class:"text-[16px] text-gray-900 dark:text-white font-normal"},"المظهر",-1)),e("div",Y,[e("button",{onClick:t[8]||(t[8]=s=>o.setTheme("light")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="light"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...t[22]||(t[22]=[e("span",{class:"material-symbols-outlined text-[18px] ml-1"},"light_mode",-1),g(" فاتح ",-1)])],2),e("button",{onClick:t[9]||(t[9]=s=>o.setTheme("dark")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="dark"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...t[23]||(t[23]=[e("span",{class:"material-symbols-outlined text-[18px] ml-1"},"dark_mode",-1),g(" داكن ",-1)])],2),e("button",{onClick:t[10]||(t[10]=s=>o.setTheme("auto")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",a.theme==="auto"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...t[24]||(t[24]=[e("span",{class:"material-symbols-outlined text-[18px] ml-1"},"settings_brightness",-1),g(" تلقائي ",-1)])],2)])])])]),t[32]||(t[32]=_('<div class="px-4 mb-8" data-v-8a12f93c><h3 class="pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide" data-v-8a12f93c>الدعم والقانون</h3><div class="bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800" data-v-8a12f93c><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-8a12f93c><div class="flex items-center gap-3" data-v-8a12f93c><div class="w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-primary" data-v-8a12f93c><span class="material-symbols-outlined text-[18px]" data-v-8a12f93c>help</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-8a12f93c>مركز المساعدة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-8a12f93c>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-8a12f93c><div class="flex items-center gap-3" data-v-8a12f93c><div class="w-7 h-7 rounded-md bg-blue-500/10 flex items-center justify-center text-blue-500" data-v-8a12f93c><span class="material-symbols-outlined text-[18px]" data-v-8a12f93c>lock</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-8a12f93c>سياسة الخصوصية</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-8a12f93c>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-8a12f93c><div class="flex items-center gap-3" data-v-8a12f93c><div class="w-7 h-7 rounded-md bg-purple-500/10 flex items-center justify-center text-purple-500" data-v-8a12f93c><span class="material-symbols-outlined text-[18px]" data-v-8a12f93c>description</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-8a12f93c>شروط الخدمة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-8a12f93c>chevron_left</span></a></div></div>',1)),e("div",Z,[e("form",$,[e("input",{type:"hidden",name:"_token",value:o.csrfToken},null,8,tt),t[27]||(t[27]=e("button",{type:"submit",class:"w-full bg-surface-light dark:bg-surface-dark rounded-xl p-3 shadow-sm text-red-500 font-medium text-[16px] active:bg-red-50 dark:active:bg-red-900/20 transition-colors"}," تسجيل الخروج ",-1))]),t[28]||(t[28]=e("p",{class:"text-center text-xs text-gray-400 mt-4"},"CommunityApp v1.0.0",-1))]),x(v,{show:a.showAvatarGallery,title:"اختر صورة البروفيل",onClose:t[11]||(t[11]=s=>a.showAvatarGallery=!1)},{default:A(()=>[e("div",et,[(l(!0),n(f,null,F(a.avatars,s=>(l(),n("button",{key:s,onClick:dt=>o.selectAvatar(s),disabled:a.selectingAvatar,class:p(["relative aspect-square rounded-2xl overflow-hidden border-2 transition-all active:scale-95",o.user.photo?.endsWith(s)?"border-primary ring-4 ring-primary/20":"border-slate-100 dark:border-slate-700"])},[e("img",{src:s,class:"w-full h-full object-cover"},null,8,at),o.user.photo?.endsWith(s)?(l(),n("div",rt,[...t[29]||(t[29]=[e("span",{class:"material-symbols-outlined text-white text-2xl font-bold"},"check_circle",-1)])])):y("",!0),a.selectingAvatar&&a.nextAvatar===s?(l(),n("div",ot,[...t[30]||(t[30]=[e("span",{class:"material-symbols-outlined text-white animate-spin"},"progress_activity",-1)])])):y("",!0)],10,st))),128))]),t[31]||(t[31]=e("p",{class:"text-center text-xs text-slate-400 mt-6 pb-2"},"اختر الصورة التي تعبر عنك وسيتم تحديثها فوراً",-1))]),_:1},8,["show"])])],64)}const xt=b(S,[["render",nt],["__scopeId","data-v-8a12f93c"]]);export{xt as default};
