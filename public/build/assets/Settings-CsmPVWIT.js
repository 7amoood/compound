import{_ as b,h as k,r as c,c as n,o as d,a as x,b as t,p as _,t as l,n as T,w as i,v as m,e as p,i as g,g as A,F as f,f as j,d as h,m as u,u as F}from"./app-C9rhdtb3.js";import{M as C,T as P}from"./Modal-DW5crK9-.js";/* empty css            */const S={name:"Settings",components:{Head:k,Toast:P,Modal:C},data(){return{form:{name:"",phone:""},passwordForm:{current_password:"",new_password:"",new_password_confirmation:""},saving:!1,changingPassword:!1,theme:"auto",avatars:["/avatars/man_1.png","/avatars/woman_1.png","/avatars/man_2.png","/avatars/woman_2.png","/avatars/man_3.png","/avatars/woman_3.png","/avatars/boy.png","/avatars/girl.png"],selectingAvatar:!1,showAvatarGallery:!1,nextAvatar:null}},computed:{user(){const r=F();return r.props.auth?r.props.auth.user:{}},csrfToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}},watch:{user:{handler(r){r&&(this.form.name=r.name||"",this.form.phone=r.phone||"")},immediate:!0,deep:!0}},mounted(){localStorage.theme==="dark"?this.theme="dark":localStorage.theme==="light"?this.theme="light":this.theme="auto"},methods:{async saveProfile(){this.saving=!0;try{(await u.put("/api/settings/profile",{name:this.form.name,phone:this.form.phone})).data.success&&window.showToast("تم حفظ البيانات بنجاح","success")}catch{window.showToast("حدث خطأ أثناء الحفظ","error")}finally{this.saving=!1}},async selectAvatar(r){this.selectingAvatar=!0,this.nextAvatar=r;try{(await u.post("/settings/avatar",{avatar:r})).data.success&&(window.showToast("تم تحديث الصورة الشخصية","success"),this.$inertia.reload({only:["auth"]}),setTimeout(()=>{this.showAvatarGallery=!1},500))}catch{window.showToast("حدث خطأ أثناء تحديث الصورة","error")}finally{this.selectingAvatar=!1,this.nextAvatar=null}},async changePassword(){if(!this.passwordForm.current_password||!this.passwordForm.new_password||!this.passwordForm.new_password_confirmation){window.showToast("يرجى ملء جميع الحقول","error");return}if(this.passwordForm.new_password!==this.passwordForm.new_password_confirmation){window.showToast("كلمة المرور الجديدة غير متطابقة","error");return}this.changingPassword=!0;try{const r=await u.put("/api/settings/password",this.passwordForm);r.data.success?(window.showToast("تم تحديث كلمة المرور بنجاح","success"),this.passwordForm={current_password:"",new_password:"",new_password_confirmation:""}):window.showToast(r.data.message||"حدث خطأ","error")}catch(r){window.showToast(r.response?.data?.message||"حدث خطأ","error")}finally{this.changingPassword=!1}},setTheme(r){this.theme=r,r==="dark"?(localStorage.theme="dark",document.documentElement.classList.add("dark")):r==="light"?(localStorage.theme="light",document.documentElement.classList.remove("dark")):(localStorage.removeItem("theme"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))}}},V={class:"relative flex h-full min-h-screen w-full flex-col mx-auto max-w-md bg-background-light dark:bg-background-dark pb-20 font-display",dir:"rtl"},M={class:"sticky top-0 z-50 flex items-center justify-between px-4 py-3 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800"},E=["disabled"],G={class:"flex flex-col items-center justify-center pt-8 pb-6 px-4"},L={class:"mt-3 text-center"},N={class:"text-xl font-bold text-[#0d141b] dark:text-white"},z={class:"text-sm text-gray-500 dark:text-gray-400 font-medium"},B={class:"px-4 mb-6"},H={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},U={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},q={class:"flex items-center px-4 py-3 bg-surface-light dark:bg-surface-dark"},D={class:"px-4 mb-6"},I={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},W={class:"flex items-center px-4 py-3"},J={class:"flex items-center px-4 py-3"},K={class:"flex items-center px-4 py-3"},O=["disabled"],Q={class:"px-4 mb-6"},R={class:"bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800"},X={class:"flex flex-col px-4 py-3 gap-3"},Y={class:"grid grid-cols-3 gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl"},Z={class:"grid grid-cols-3 gap-4 p-2"},$=["onClick","disabled"],ee=["src"],te={key:0,class:"absolute inset-0 bg-primary/20 flex items-center justify-center"},ae={key:1,class:"absolute inset-0 bg-black/20 flex items-center justify-center"};function se(r,e,re,oe,s,o){const y=c("Head"),w=c("Toast"),v=c("Modal");return d(),n(f,null,[x(y,{title:"الإعدادات - خدمات المجمع"}),x(w),t("div",V,[t("header",M,[e[12]||(e[12]=t("a",{href:"/dashboard",class:"flex items-center text-primary text-base font-normal -mr-1"},[t("span",{class:"material-symbols-outlined text-2xl"},"chevron_right"),t("span",null,"رجوع")],-1)),e[13]||(e[13]=t("h1",{class:"text-[17px] font-semibold text-center text-[#0d141b] dark:text-white absolute left-1/2 transform -translate-x-1/2"},"الإعدادات",-1)),t("button",{onClick:e[0]||(e[0]=(...a)=>o.saveProfile&&o.saveProfile(...a)),disabled:s.saving,class:"text-primary text-[17px] font-semibold"},l(s.saving?"...":"حفظ"),9,E)]),t("div",G,[t("div",{class:"relative cursor-pointer group",onClick:e[1]||(e[1]=a=>s.showAvatarGallery=!0)},[t("div",{class:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 bg-cover bg-center shadow-sm border-2 border-white dark:border-gray-800 transition-transform active:scale-95",style:T(`background-image: url('${o.user.photo||"https://ui-avatars.com/api/?name="+o.user.name}');`)},null,4),e[14]||(e[14]=t("div",{class:"absolute bottom-0 right-0 bg-primary text-white rounded-full p-1.5 shadow-md border-2 border-white dark:border-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform"},[t("span",{class:"material-symbols-outlined text-[16px] leading-none"},"photo_camera")],-1))]),t("div",L,[t("h2",N,l(o.user.name),1),t("p",z,l(o.user.role==="resident"?"ساكن":o.user.role==="provider"?"مقدم خدمة":"مسؤول")+" • "+l(o.user.apt_no?`شقة ${o.user.apt_no}`:o.user.phone),1)])]),t("div",B,[e[17]||(e[17]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"المعلومات الشخصية",-1)),t("div",H,[t("div",U,[e[15]||(e[15]=t("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الاسم",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.form.name=a),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"text"},null,512),[[m,s.form.name]])]),t("div",q,[e[16]||(e[16]=t("label",{class:"w-20 text-[16px] text-gray-900 dark:text-white font-normal"},"الهاتف",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.form.phone=a),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-primary text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"tel"},null,512),[[m,s.form.phone]])])])]),t("div",D,[e[21]||(e[21]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"كلمة المرور",-1)),t("div",I,[t("div",W,[e[18]||(e[18]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الحالية",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.passwordForm.current_password=a),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,s.passwordForm.current_password]])]),t("div",J,[e[19]||(e[19]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"الجديدة",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.passwordForm.new_password=a),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,s.passwordForm.new_password]])]),t("div",K,[e[20]||(e[20]=t("label",{class:"w-28 text-[16px] text-gray-900 dark:text-white font-normal"},"تأكيد الجديدة",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.passwordForm.new_password_confirmation=a),class:"flex-1 bg-transparent border-none p-0 text-[16px] text-gray-900 dark:text-white text-left focus:ring-0 placeholder:text-gray-400 font-normal",type:"password",placeholder:"••••••••"},null,512),[[m,s.passwordForm.new_password_confirmation]])])]),t("button",{onClick:e[7]||(e[7]=(...a)=>o.changePassword&&o.changePassword(...a)),disabled:s.changingPassword,class:"mt-3 w-full bg-slate-100 dark:bg-slate-800 rounded-xl p-3 text-primary font-medium text-[16px] transition-colors"},l(s.changingPassword?"جاري التحديث...":"تحديث كلمة المرور"),9,O)]),t("div",Q,[e[26]||(e[26]=t("h3",{class:"pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"الإشعارات",-1)),t("div",R,[t("div",X,[e[25]||(e[25]=t("span",{class:"text-[16px] text-gray-900 dark:text-white font-normal"},"المظهر",-1)),t("div",Y,[t("button",{onClick:e[8]||(e[8]=a=>o.setTheme("light")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",s.theme==="light"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[22]||(e[22]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"light_mode",-1),g(" فاتح ",-1)])],2),t("button",{onClick:e[9]||(e[9]=a=>o.setTheme("dark")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",s.theme==="dark"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[23]||(e[23]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"dark_mode",-1),g(" داكن ",-1)])],2),t("button",{onClick:e[10]||(e[10]=a=>o.setTheme("auto")),class:p(["flex items-center justify-center py-2 px-3 rounded-lg text-sm font-medium transition-all",s.theme==="auto"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"])},[...e[24]||(e[24]=[t("span",{class:"material-symbols-outlined text-[18px] ml-1"},"settings_brightness",-1),g(" تلقائي ",-1)])],2)])])])]),e[30]||(e[30]=_('<div class="px-4 mb-8" data-v-57da32ca><h3 class="pr-4 mb-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide" data-v-57da32ca>الدعم والقانون</h3><div class="bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm divide-y divide-gray-100 dark:divide-gray-800" data-v-57da32ca><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-57da32ca><div class="flex items-center gap-3" data-v-57da32ca><div class="w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-primary" data-v-57da32ca><span class="material-symbols-outlined text-[18px]" data-v-57da32ca>help</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-57da32ca>مركز المساعدة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-57da32ca>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-57da32ca><div class="flex items-center gap-3" data-v-57da32ca><div class="w-7 h-7 rounded-md bg-blue-500/10 flex items-center justify-center text-blue-500" data-v-57da32ca><span class="material-symbols-outlined text-[18px]" data-v-57da32ca>lock</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-57da32ca>سياسة الخصوصية</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-57da32ca>chevron_left</span></a><a class="flex items-center justify-between px-4 py-3 active:bg-gray-50 dark:active:bg-gray-800 transition-colors group" href="#" data-v-57da32ca><div class="flex items-center gap-3" data-v-57da32ca><div class="w-7 h-7 rounded-md bg-purple-500/10 flex items-center justify-center text-purple-500" data-v-57da32ca><span class="material-symbols-outlined text-[18px]" data-v-57da32ca>description</span></div><span class="text-[16px] text-gray-900 dark:text-white font-normal" data-v-57da32ca>شروط الخدمة</span></div><span class="material-symbols-outlined text-gray-400 text-xl" data-v-57da32ca>chevron_left</span></a></div></div><div class="px-4 mb-8" data-v-57da32ca><a href="/logout" class="w-full flex items-center justify-center bg-surface-light dark:bg-surface-dark rounded-xl p-3 shadow-sm text-red-500 font-medium text-[16px] active:bg-red-50 dark:active:bg-red-900/20 transition-colors" data-v-57da32ca> تسجيل الخروج </a><p class="text-center text-xs text-gray-400 mt-4" data-v-57da32ca>CommunityApp v1.0.0</p></div>',2)),x(v,{show:s.showAvatarGallery,title:"اختر صورة البروفيل",onClose:e[11]||(e[11]=a=>s.showAvatarGallery=!1)},{default:A(()=>[t("div",Z,[(d(!0),n(f,null,j(s.avatars,a=>(d(),n("button",{key:a,onClick:ne=>o.selectAvatar(a),disabled:s.selectingAvatar,class:p(["relative aspect-square rounded-2xl overflow-hidden border-2 transition-all active:scale-95",o.user.photo?.endsWith(a)?"border-primary ring-4 ring-primary/20":"border-slate-100 dark:border-slate-700"])},[t("img",{src:a,class:"w-full h-full object-cover"},null,8,ee),o.user.photo?.endsWith(a)?(d(),n("div",te,[...e[27]||(e[27]=[t("span",{class:"material-symbols-outlined text-white text-2xl font-bold"},"check_circle",-1)])])):h("",!0),s.selectingAvatar&&s.nextAvatar===a?(d(),n("div",ae,[...e[28]||(e[28]=[t("span",{class:"material-symbols-outlined text-white animate-spin"},"progress_activity",-1)])])):h("",!0)],10,$))),128))]),e[29]||(e[29]=t("p",{class:"text-center text-xs text-slate-400 mt-6 pb-2"},"اختر الصورة التي تعبر عنك وسيتم تحديثها فوراً",-1))]),_:1},8,["show"])])],64)}const me=b(S,[["render",se],["__scopeId","data-v-57da32ca"]]);export{me as default};
