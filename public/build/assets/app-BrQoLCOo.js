const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Xig7oAKn.js","assets/vendor-MstgcBWo.js","assets/Modal-BNZTJOd4.js","assets/Modal-ACkwF3lE.css","assets/Dashboard-D-zUhCwk.css","assets/app-DfC_UjGQ.css","assets/Login-DjasrsQ8.js","assets/Dashboard-BzwhMZq_.js","assets/firebase-DgAPW_C6.js","assets/firebase-Dm6APd8e.css","assets/Dashboard-CeD241-H.css","assets/Dashboard-DOVgRtOE.js","assets/Dashboard-DidntzhZ.css","assets/Settings-D5jRI5Y1.js","assets/Settings-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{a as O,c as w,b as v,d as o,e as g,o as p,f as S,w as I,t as x,g as A,T as C,h as L,r as b,i as T,j as h}from"./vendor-MstgcBWo.js";/* empty css            */const R="modulepreload",D=function(t){return"/build/"+t},y={},f=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let E=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");n=E(s.map(l=>{if(l=D(l),l in y)return;y[l]=!0;const u=l.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":R,u||(c.as="script"),c.crossOrigin="",c.href=l,d&&c.setAttribute("nonce",d),document.head.appendChild(c),u)return new Promise((P,k)=>{c.addEventListener("load",P),c.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return n.then(a=>{for(const d of a||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})};window.axios=O;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";async function N(t,e){for(const s of Array.isArray(t)?t:[t]){const r=e[s];if(!(typeof r>"u"))return typeof r=="function"?r():r}throw new Error(`Page not found: ${t}`)}const _=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},q={data(){return{deferredPrompt:null,showOverlay:!1,isIOS:!1}},mounted(){this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.showOverlay=!0}),this.isIOS&&(this.showOverlay=!0))},methods:{async installApp(){if(!this.deferredPrompt){this.isIOS&&window.showToast("اتبع تعليمات الإضافة في الأسفل","info");return}this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;t==="accepted"&&(console.log("User accepted the install prompt"),this.showOverlay=!1),this.deferredPrompt=null}}},M={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-6 overflow-hidden"},j={class:"relative w-full max-w-sm bg-white dark:bg-slate-800 rounded-3xl p-8 flex flex-col items-center text-center shadow-2xl animate-in fade-in zoom-in duration-300"},V={key:1,class:"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-600"};function W(t,e,s,r,n,i){return n.showOverlay?(p(),w("div",M,[o("div",j,[e[4]||(e[4]=o("div",{class:"w-24 h-24 bg-primary/10 rounded-2xl flex items-center justify-center mb-6 shadow-inner tracking-tighter"},[o("img",{src:"/icons/icon-192x192.png",class:"w-16 h-16 object-contain",alt:"App Logo"})],-1)),e[5]||(e[5]=o("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-2"},"ثبّت التطبيق الآن",-1)),e[6]||(e[6]=o("p",{class:"text-slate-500 dark:text-slate-400 mb-8 leading-relaxed"}," للحصول على أفضل تجربة وأسرع وصول لخدمات المجمع، يرجى إضافة التطبيق إلى شاشتك الرئيسية. ",-1)),o("button",{onClick:e[0]||(e[0]=(...a)=>i.installApp&&i.installApp(...a)),class:"w-full bg-primary text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/30 hover:bg-blue-600 active:scale-95 transition-all mb-4 flex items-center justify-center gap-2"},[...e[2]||(e[2]=[o("span",{class:"material-symbols-outlined"},"download",-1),o("span",null,"تثبيت الآن",-1)])]),n.isIOS?v("",!0):(p(),w("button",{key:0,onClick:e[1]||(e[1]=a=>n.showOverlay=!1),class:"text-slate-400 dark:text-slate-500 text-sm font-medium hover:text-slate-600 dark:hover:text-slate-400 transition-colors"}," سأقوم بذلك لاحقاً ")),n.isIOS?(p(),w("div",V,[...e[3]||(e[3]=[o("p",{class:"text-xs text-slate-600 dark:text-slate-300 flex flex-col items-center gap-2"},[o("span",null,[g("لأجهزة iOS، اضغط على زر "),o("span",{class:"material-symbols-outlined text-[18px] align-middle"},"ios_share"),g(' ثم "إضافة للشاشة الرئيسية"')])],-1)])])):v("",!0)])])):v("",!0)}const $=_(q,[["render",W]]),B={name:"InAppNotification",data(){return{notification:null,timeout:null}},computed:{title(){return this.notification?.notification?.title||"إشعار جديد"},body(){return this.notification?.notification?.body||""},icon(){const t=this.notification?.data?.type;return{NEW_REQUEST:"potted_plant",NEW_PROPOSAL:"local_offer",PROPOSAL_ACCEPTED:"check_circle",WORK_COMPLETED:"verified",NEW_REVIEW:"star"}[t]||"notifications"}},mounted(){window.addEventListener("fcm-message",this.handleMessage)},beforeUnmount(){window.removeEventListener("fcm-message",this.handleMessage)},methods:{handleMessage(t){this.notification=t.detail,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.notification=null},6e3);try{const e=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3");e.volume=.5,e.play()}catch(e){console.warn("Sound play failed",e)}},handleClick(){const t=this.notification?.data?.request_id;t&&window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(t)}})),this.notification=null}}},U={class:"size-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0"},z={class:"material-symbols-outlined text-primary text-2xl"},H={class:"flex-1 min-w-0"},K={class:"text-sm font-bold text-slate-900 dark:text-white truncate"},X={class:"text-xs text-slate-500 dark:text-slate-400 mt-1 line-clamp-2"};function F(t,e,s,r,n,i){return p(),S(C,{name:"notif"},{default:I(()=>[n.notification?(p(),w("div",{key:0,onClick:e[1]||(e[1]=(...a)=>i.handleClick&&i.handleClick(...a)),class:"fixed top-4 left-4 right-4 z-[110] bg-white dark:bg-slate-800 shadow-2xl rounded-2xl p-4 border border-slate-100 dark:border-slate-700 flex items-start gap-4 cursor-pointer active:scale-95 transition-transform max-w-md mx-auto pointer-events-auto",dir:"rtl"},[o("div",U,[o("span",z,x(i.icon),1)]),o("div",H,[o("h4",K,x(i.title),1),o("p",X,x(i.body),1),e[2]||(e[2]=o("div",{class:"mt-2 flex items-center text-[10px] font-bold text-primary uppercase tracking-wider"},[o("span",null,"اضغط للتفاصيل"),o("span",{class:"material-symbols-outlined text-[14px] mr-1"},"chevron_left")],-1))]),o("button",{onClick:e[0]||(e[0]=A(a=>n.notification=null,["stop"])),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...e[3]||(e[3]=[o("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])])):v("",!0)]),_:1})}const Q=_(B,[["render",F],["__scopeId","data-v-489d9211"]]);L({title:t=>`${t} - خدمات المجمع`,resolve:t=>N(`./Pages/${t}.vue`,Object.assign({"./Pages/Admin/Dashboard.vue":()=>f(()=>import("./Dashboard-Xig7oAKn.js"),__vite__mapDeps([0,1,2,3,4,5])),"./Pages/Auth/Login.vue":()=>f(()=>import("./Login-DjasrsQ8.js"),__vite__mapDeps([6,1,5])),"./Pages/Provider/Dashboard.vue":()=>f(()=>import("./Dashboard-BzwhMZq_.js"),__vite__mapDeps([7,1,2,3,8,9,10,5])),"./Pages/Resident/Dashboard.vue":()=>f(()=>import("./Dashboard-DOVgRtOE.js"),__vite__mapDeps([11,1,2,3,8,9,12,5])),"./Pages/Settings.vue":()=>f(()=>import("./Settings-D5jRI5Y1.js"),__vite__mapDeps([13,1,2,3,14,5]))})),setup({el:t,App:e,props:s,plugin:r}){const n=T({render:()=>h("div",[h(e,s),h($),h(Q)])});return n.use(r),n.mount(t),n},progress:{delay:0,color:"#137fec",includeCSS:!0,showSpinner:!1}});if("BroadcastChannel"in window){const t=new BroadcastChannel("notification_channel");t.onmessage=e=>{if(e.data&&e.data.type==="ON_NOTIFICATION_CLICK"){const s=e.data.url,r=new URL(s,window.location.origin),n=r.searchParams.get("request_id");if(n){const i=window.location.pathname;i.includes("/resident")||i.includes("/provider")||i.includes("/dashboard")?window.dispatchEvent(new CustomEvent("open-request-details",{detail:{requestId:parseInt(n)}})):b.visit(s)}else{const i=r.pathname+r.search;b.visit(i)}}}}document.addEventListener("touchmove",function(t){let e=!1,s=t.target;for(;s&&s!==document.body&&s!==document.documentElement;){if(s instanceof HTMLElement){const n=window.getComputedStyle(s).getPropertyValue("overflow-y");if((n==="auto"||n==="scroll")&&s.scrollHeight>s.clientHeight){e=!0;break}}s=s.parentElement}!e&&t.cancelable&&t.preventDefault()},{passive:!1});export{_,f as a};
