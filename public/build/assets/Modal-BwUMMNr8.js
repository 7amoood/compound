import{c as l,o,h as u,w as h,F as p,s as v,p as w,d as n,t as f,H as b,r as y,f as D,b as d,T as g,n as x,G as k,I as T}from"./vendor-C-E02GEk.js";import{_ as m}from"./app-CGRo8835.js";const Y={name:"Toast",data(){return{toasts:[],icons:{success:"check_circle",error:"error",warning:"warning",info:"info"},colors:{success:"bg-emerald-500",error:"bg-red-500",warning:"bg-amber-500",info:"bg-primary"}}},mounted(){window.showToast=this.add},methods:{add(t,e="info"){const i=Date.now();this.toasts.push({id:i,message:t,type:e}),setTimeout(()=>this.remove(i),3e3)},remove(t){this.toasts=this.toasts.filter(e=>e.id!==t)}}},_={class:"fixed left-4 right-4 z-[9999] flex flex-col gap-2 items-center pointer-events-none",style:{top:"max(1rem, calc(env(safe-area-inset-top) + 0.5rem))"},dir:"rtl"},L={class:"material-symbols-outlined text-[20px]"},E={class:"text-sm font-medium"};function S(t,e,i,c,a,r){return o(),l("div",_,[u(b,{name:"toast"},{default:h(()=>[(o(!0),l(p,null,v(a.toasts,s=>(o(),l("div",{key:s.id,class:w(["pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl text-white shadow-lg max-w-sm",a.colors[s.type]||a.colors.info])},[n("span",L,f(a.icons[s.type]||a.icons.info),1),n("span",E,f(s.message),1)],2))),128))]),_:1})])}const j=m(Y,[["render",S],["__scopeId","data-v-8b4d7a59"]]),B={name:"Modal",props:{show:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["close"],data(){return{closedByBack:!1,startY:0,currentY:0,isDragging:!1,startTime:0,canDrag:!1,initialScrollTop:0,isClosing:!1,removeInertiaListener:null}},computed:{sheetStyle(){return{transform:`translateY(${this.currentY}px)`,transition:this.isDragging?"none":"transform 0.5s cubic-bezier(0.32, 0.72, 0, 1)"}},isVisible(){return this.show||this.isClosing}},mounted(){document.addEventListener("keydown",this.handleEscape)},beforeUnmount(){document.removeEventListener("keydown",this.handleEscape),this.stopDrag(),this.removeInertiaListener&&this.removeInertiaListener()},watch:{show(t){t?(this.currentY=0,this.closedByBack=!1,window.history.pushState({modal:!0},"",window.location.href),window.addEventListener("popstate",this.handlePopState),this.removeInertiaListener=y.on("before",e=>{if(this.show&&!this.closedByBack)return e.preventDefault(),this.closedByBack=!0,this.closeModal(),!1}),document.body.style.overflow="hidden"):(window.removeEventListener("popstate",this.handlePopState),this.removeInertiaListener&&(this.removeInertiaListener(),this.removeInertiaListener=null),document.body.style.overflow="")}},methods:{closeModal(){this.isClosing||(this.isClosing=!0,this.currentY=window.innerHeight+100,setTimeout(()=>{this.$emit("close"),setTimeout(()=>{this.isClosing=!1,this.currentY=0},100)},450))},handleEscape(t){t.key==="Escape"&&this.show&&this.closeModal()},handlePopState(t){this.show&&!this.isClosing&&(window.history.pushState({modal:!1},"",window.location.href),this.closedByBack=!0,this.closeModal())},startDrag(t){this.startY=t.type.includes("touch")?t.touches[0].clientY:t.clientY,this.startTime=Date.now(),this.canDrag=!1,this.isDragging=!1;const e=this.$refs.contentArea;e&&(this.initialScrollTop=e.scrollTop),document.addEventListener("mousemove",this.onDrag),document.addEventListener("touchmove",this.onDrag,{passive:!1}),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag)},onDrag(t){const i=(t.type.includes("touch")?t.touches[0].clientY:t.clientY)-this.startY,c=this.$refs.contentArea;(c?c.scrollTop:0)<=2&&i>0?(!this.canDrag&&i>5&&(this.canDrag=!0),this.canDrag&&(!this.isDragging&&i>8&&(this.isDragging=!0),this.isDragging&&(this.currentY=Math.pow(i,.9),t.cancelable&&t.preventDefault()))):(this.canDrag=!1,this.isDragging=!1)},stopDrag(){if(!this.canDrag&&!this.isDragging){this.cleanup();return}const t=this.isDragging;if(this.isDragging=!1,this.canDrag=!1,this.cleanup(),!t)return;const e=Date.now()-this.startTime,i=this.currentY/e;this.currentY>80||i>.5?(this.currentY=window.innerHeight,this.closeModal()):this.currentY=0},cleanup(){document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("touchmove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag)}}},M={class:"fixed inset-0 z-[100] flex items-end justify-center overflow-hidden pointer-events-none"},C={class:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-800/50"},I={key:0,class:"text-xl font-bold text-slate-900 dark:text-white"};function z(t,e,i,c,a,r){return o(),D(T,{to:"body"},[n("div",M,[u(g,{"enter-active-class":"transition-opacity duration-500 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300 ease-in","leave-to-class":"opacity-0"},{default:h(()=>[i.show?(o(),l("div",{key:0,class:"absolute inset-0 bg-[#0d141b]/60 backdrop-blur-[4px] pointer-events-auto",onClick:e[0]||(e[0]=(...s)=>r.closeModal&&r.closeModal(...s))})):d("",!0)]),_:1}),u(g,{"enter-active-class":"transition-transform duration-600 cubic-bezier(0.32, 0.72, 0, 1)","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":a.isClosing?"":"transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1)","leave-to-class":a.isClosing?"":"translate-y-full"},{default:h(()=>[r.isVisible?(o(),l("div",{key:0,ref:"modalSheet",class:"relative z-20 flex flex-col max-h-[96vh] w-full max-w-md rounded-t-[2.5rem] bg-surface-light dark:bg-surface-dark shadow-[0_-10px_40px_rgba(0,0,0,0.3)] border-t border-white/5 font-display pointer-events-auto",style:x(r.sheetStyle),dir:"rtl"},[n("div",{class:"flex w-full items-center justify-center pt-4 pb-2 cursor-grab active:cursor-grabbing touch-none",onMousedown:e[1]||(e[1]=(...s)=>r.startDrag&&r.startDrag(...s)),onTouchstart:e[2]||(e[2]=(...s)=>r.startDrag&&r.startDrag(...s))},[...e[6]||(e[6]=[n("div",{class:"h-1.5 w-14 rounded-full bg-slate-200 dark:bg-slate-700/50"},null,-1)])],32),n("div",C,[i.title?(o(),l("h2",I,f(i.title),1)):d("",!0),n("button",{onClick:e[3]||(e[3]=(...s)=>r.closeModal&&r.closeModal(...s)),class:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all active:scale-95"},[...e[7]||(e[7]=[n("span",{class:"material-symbols-outlined",style:{"font-size":"22px"}},"close",-1)])])]),n("div",{ref:"contentArea",class:"flex-1 overflow-y-auto no-scrollbar p-6 pb-24",onTouchstart:e[4]||(e[4]=(...s)=>r.startDrag&&r.startDrag(...s)),onMousedown:e[5]||(e[5]=(...s)=>r.startDrag&&r.startDrag(...s))},[k(t.$slots,"default",{},void 0,!0)],544)],4)):d("",!0)]),_:3},8,["leave-active-class","leave-to-class"])])])}const H=m(B,[["render",z],["__scopeId","data-v-4c93b638"]]);export{H as M,j as T};
