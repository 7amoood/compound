import{_ as R,h as T,r as C,c as i,o as n,a as h,b as e,n as k,d as a,t as r,e as u,w as c,v as m,F as b,f,g as y,i as v,j as U,k as j,l as S,m as p,u as P}from"./app-B5akIRV-.js";import{M as D,T as V}from"./Modal-33wGAEq7.js";/* empty css            */const E={name:"AdminDashboard",components:{Head:T,Toast:V,Modal:D},data(){return{loading:!0,loadingRequests:!0,stats:{},users:[],services:[],requests:[],searchQuery:"",activeSection:"users",userFilter:"all",userFilters:[{id:"all",label:"الكل"},{id:"resident",label:"المقيمين"},{id:"provider",label:"مقدمي الخدمات"},{id:"inactive",label:"غير مفعل"}],requestFilter:"all",requestFilters:[{id:"all",label:"الكل"},{id:"pending",label:"قيد الانتظار"},{id:"accepted_offer",label:"تم قبول عرض"},{id:"in_progress",label:"جاري التنفيذ"},{id:"completed",label:"مكتمل"}],showUserModal:!1,showRequestModal:!1,showServiceModal:!1,showCompoundModal:!1,selectedUser:null,selectedRequest:null,selectedService:null,selectedCompound:null,editingUser:!1,editingService:!1,editingCompound:!1,savingUser:!1,savingService:!1,savingCompound:!1,userForm:{name:"",phone:"",compound_id:"",block_no:"",floor:"",apt_no:"",role:""},serviceForm:{name:"",icon:"",description:"",delivery_methods:[],new_delivery_method:""},compoundForm:{name:"",address:"",location_url:""},compounds:[],loadingCompounds:!1,nextUsersUrl:null,nextRequestsUrl:null,loadingMoreRequests:!1,showPasswordModal:!1,passwordChangeUser:null,newPassword:"",confirmPassword:"",changingPassword:!1,searchDebounceTimer:null}},computed:{user(){const l=P();return l.props.auth?l.props.auth.user:{}},csrfToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},filteredRequests(){let l=this.requests;if(this.requestFilter!=="all"&&(l=l.filter(s=>s.status===this.requestFilter)),this.searchQuery&&this.activeSection==="requests"){const s=this.searchQuery.toLowerCase();l=l.filter(x=>x.category?.name?.toLowerCase().includes(s)||x.resident?.name?.toLowerCase().includes(s)||x.notes?.toLowerCase().includes(s))}return l}},watch:{activeSection(l){const s=new URL(window.location);s.searchParams.set("tab",l),window.history.pushState({},"",s)},searchQuery(){this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(()=>{this.loadUsers()},500)},userFilter(l){const s=new URL(window.location);l&&l!=="all"?s.searchParams.set("user_filter",l):s.searchParams.delete("user_filter"),window.history.pushState({},"",s),this.loadUsers()},requestFilter(l){const s=new URL(window.location);l&&l!=="all"?s.searchParams.set("request_filter",l):s.searchParams.delete("request_filter"),window.history.pushState({},"",s)}},mounted(){const l=new URLSearchParams(window.location.search),s=l.get("tab");s&&["users","requests","services","compounds"].includes(s)&&(this.activeSection=s);const x=l.get("user_filter");x&&(this.userFilter=x);const _=l.get("request_filter");_&&(this.requestFilter=_),this.loadStats(),this.loadUsers(),this.loadServices(),this.loadRequests(),this.loadCompounds()},methods:{async loadStats(){try{const l=await p.get("/api/admin/stats");l.data.success&&(this.stats=l.data.stats)}catch(l){console.error(l)}},async loadUsers(){this.loading=!0;try{const l=new URLSearchParams;this.searchQuery&&l.append("search",this.searchQuery),this.userFilter==="resident"?l.append("role","resident"):this.userFilter==="provider"?l.append("role","provider"):this.userFilter==="inactive"&&l.append("is_active","0");const s=`/api/users${l.toString()?"?"+l.toString():""}`,x=await p.get(s);x.data.success&&(this.users=x.data.users.data,this.nextUsersUrl=x.data.users.next_page_url)}catch(l){console.error(l)}finally{this.loading=!1}},async loadMoreUsers(){if(!(!this.nextUsersUrl||this.loadingMoreUsers)){this.loadingMoreUsers=!0;try{const l=await p.get(this.nextUsersUrl);l.data.success&&(this.users=[...this.users,...l.data.users.data],this.nextUsersUrl=l.data.users.next_page_url)}catch(l){console.error(l)}finally{this.loadingMoreUsers=!1}}},async loadServices(){try{const l=await p.get("/api/services");l.data.success&&(this.services=l.data.categories)}catch(l){console.error(l)}},async loadRequests(){this.loadingRequests=!0;try{const l=await p.get("/api/requests");l.data.success&&(this.requests=l.data.requests.data,this.nextRequestsUrl=l.data.requests.next_page_url)}catch(l){console.error(l)}finally{this.loadingRequests=!1}},async loadMoreRequests(){if(!(!this.nextRequestsUrl||this.loadingMoreRequests)){this.loadingMoreRequests=!0;try{const l=await p.get(this.nextRequestsUrl);l.data.success&&(this.requests=[...this.requests,...l.data.requests.data],this.nextRequestsUrl=l.data.requests.next_page_url)}catch(l){console.error(l)}finally{this.loadingMoreRequests=!1}}},openAddService(){this.selectedService=null,this.serviceForm={name:"",icon:"",description:"",delivery_methods:[],new_delivery_method:""},this.editingService=!0,this.showServiceModal=!0},getServiceColor(l){const s=["bg-blue-50 dark:bg-blue-900/20","bg-purple-50 dark:bg-purple-900/20","bg-rose-50 dark:bg-rose-900/20","bg-amber-50 dark:bg-amber-900/20","bg-emerald-50 dark:bg-emerald-900/20","bg-cyan-50 dark:bg-cyan-900/20"];return s[l%s.length]},getServiceTextColor(l){const s=["text-blue-600","text-purple-600","text-rose-600","text-amber-600","text-emerald-600","text-cyan-600"];return s[l%s.length]},getServiceStyle(l){return{}},async toggleUserStatus(l){try{(await p.post(`/api/admin/users/${l.id}/toggle-status`)).data.success&&(l.is_active=!l.is_active,window.showToast&&window.showToast("تم تحديث حالة المستخدم","success"))}catch{window.showToast&&window.showToast("حدث خطأ","error")}},openChangePasswordModal(l){this.passwordChangeUser=l,this.newPassword="",this.confirmPassword="",this.showPasswordModal=!0},async changeUserPassword(){if(!this.newPassword||this.newPassword!==this.confirmPassword){window.showToast&&window.showToast("كلمات المرور غير متطابقة","error");return}if(this.newPassword.length<6){window.showToast&&window.showToast("كلمة المرور يجب أن تكون 6 أحرف على الأقل","error");return}this.changingPassword=!0;try{const l=await p.post(`/api/admin/users/${this.passwordChangeUser.id}/change-password`,{password:this.newPassword,password_confirmation:this.confirmPassword});l.data.success?(window.showToast&&window.showToast("تم تغيير كلمة المرور بنجاح","success"),this.showPasswordModal=!1,this.newPassword="",this.confirmPassword="",this.passwordChangeUser=null):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){console.error(l),window.showToast&&window.showToast("حدث خطأ أثناء تغيير كلمة المرور","error")}finally{this.changingPassword=!1}},async toggleServiceStatus(l){try{l.is_active=!l.is_active,window.showToast&&window.showToast(`تم ${l.is_active?"تفعيل":"إيقاف"} الخدمة`,"success")}catch{l.is_active=!l.is_active,window.showToast&&window.showToast("حدث خطأ","error")}},formatDate(l){return new Date(l).toLocaleDateString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},openUserDetails(l){this.selectedUser=l,this.editingUser=!1,this.showUserModal=!0},openRequestDetails(l){this.selectedRequest=l,this.showRequestModal=!0},openServiceDetails(l){this.selectedService=l,this.editingService=!1,this.showServiceModal=!0},startEditUser(){this.userForm={name:this.selectedUser.name||"",phone:this.selectedUser.phone||"",compound_id:this.selectedUser.compound_id||"",block_no:this.selectedUser.block_no||"",floor:this.selectedUser.floor||"",apt_no:this.selectedUser.apt_no||"",role:this.selectedUser.role||"resident"},this.editingUser=!0},async saveUser(){this.savingUser=!0;try{const l=await p.put(`/api/admin/users/${this.selectedUser.id}`,this.userForm);l.data.success?(Object.assign(this.selectedUser,this.userForm),this.editingUser=!1,window.showToast&&window.showToast("تم حفظ بيانات المستخدم بنجاح","success")):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingUser=!1}},startEditService(){this.serviceForm={name:this.selectedService.name||"",icon:this.selectedService.icon||"",description:this.selectedService.description||"",delivery_methods:this.selectedService.delivery_methods?[...this.selectedService.delivery_methods]:[],new_delivery_method:""},this.editingService=!0},addDeliveryMethod(){const l=this.serviceForm.new_delivery_method.trim();l&&!this.serviceForm.delivery_methods.includes(l)&&(this.serviceForm.delivery_methods.push(l),this.serviceForm.new_delivery_method="")},removeDeliveryMethod(l){this.serviceForm.delivery_methods.splice(l,1)},async saveService(){this.savingService=!0;try{let l;this.selectedService&&this.selectedService.id?l=await p.put(`/api/admin/services/${this.selectedService.id}`,this.serviceForm):l=await p.post("/api/services",this.serviceForm),l.data.success?(this.selectedService&&this.selectedService.id?Object.assign(this.selectedService,this.serviceForm):this.services.push(l.data.category),this.showServiceModal=!1,this.editingService=!1,window.showToast&&window.showToast("تم حفظ بيانات الخدمة بنجاح","success")):window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingService=!1}},async loadCompounds(){this.loadingCompounds=!0;try{const l=await p.get("/api/compounds");l.data.success&&(this.compounds=l.data.compounds)}catch(l){console.error(l)}finally{this.loadingCompounds=!1}},openCompoundDetails(l){this.selectedCompound=l,this.editingCompound=!1,this.showCompoundModal=!0},openAddCompound(){this.selectedCompound=null,this.compoundForm={name:"",address:"",location_url:""},this.editingCompound=!0,this.showCompoundModal=!0},startEditCompound(){this.compoundForm={name:this.selectedCompound.name||"",address:this.selectedCompound.address||"",location_url:this.selectedCompound.location_url||""},this.editingCompound=!0},async saveCompound(){this.savingCompound=!0;try{let l;this.selectedCompound?.id?(l=await p.put(`/api/admin/compounds/${this.selectedCompound.id}`,this.compoundForm),l.data.success&&(Object.assign(this.selectedCompound,this.compoundForm),this.editingCompound=!1,window.showToast&&window.showToast("تم حفظ بيانات الكمبوند بنجاح","success"))):(l=await p.post("/api/compounds",this.compoundForm),l.data.success&&(this.compounds.push(l.data.compound),this.editingCompound=!1,this.showCompoundModal=!1,window.showToast&&window.showToast("تم إضافة الكمبوند بنجاح","success"))),l.data.success||window.showToast&&window.showToast(l.data.message||"حدث خطأ","error")}catch(l){window.showToast&&window.showToast(l.response?.data?.message||"حدث خطأ أثناء الحفظ","error")}finally{this.savingCompound=!1}},async toggleCompoundStatus(l){try{(await p.post(`/api/admin/compounds/${l.id}/toggle-status`)).data.success&&(l.is_active=!l.is_active,window.showToast&&window.showToast(`تم ${l.is_active?"تفعيل":"إيقاف"} الكمبوند`,"success"))}catch{window.showToast&&window.showToast("حدث خطأ","error")}}}},L={class:"bg-background-light dark:bg-background-dark font-display min-h-screen flex flex-col antialiased selection:bg-primary/30 selection:text-primary",dir:"rtl"},A={class:"sticky top-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm border-b border-slate-200 dark:border-slate-800"},Q={class:"flex items-center justify-between px-4 py-3 max-w-md mx-auto"},z={class:"flex items-center gap-3"},O={method:"POST",action:"/logout",class:"m-0"},N=["value"],B={class:"flex-1 pb-24 overflow-x-hidden max-w-md mx-auto w-full"},H={class:"px-4 py-4"},G={class:"grid grid-cols-2 gap-3"},K={class:"flex justify-between items-start"},I={key:0,class:"relative flex h-3 w-3"},J={class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold mt-0.5"},W={class:"flex justify-between items-start"},X={key:0,class:"relative flex h-3 w-3"},Y={class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold mt-0.5"},Z={class:"px-4 py-2"},$={class:"flex w-full items-center justify-between gap-2 overflow-x-auto no-scrollbar py-2"},ee={class:"px-4 py-3"},se={class:"relative flex items-center w-full h-12 rounded-xl focus-within:ring-2 focus-within:ring-primary/20 transition-shadow bg-white dark:bg-surface-dark shadow-sm border border-slate-200 dark:border-slate-700"},te=["placeholder"],oe={key:0,class:"px-4 py-2"},le={class:"flex items-center justify-between mb-3"},re={class:"text-xs text-slate-400"},ie={class:"flex gap-2 mb-4 overflow-x-auto no-scrollbar pb-1"},ne=["onClick"],de={class:"flex flex-col gap-3"},ae={key:0,class:"text-center py-6 text-slate-400"},ue={key:1,class:"text-center py-6 text-slate-400"},ce=["onClick"],me={class:"flex items-center gap-3"},pe={class:"relative"},be={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},xe={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},ge={key:1,class:"px-4 py-2"},fe={class:"flex items-center justify-between mb-3"},he={class:"text-xs text-slate-400"},ve={class:"flex gap-2 mb-4 overflow-x-auto no-scrollbar pb-1"},we=["onClick"],ye={class:"flex flex-col gap-3"},ke={key:0,class:"text-center py-6 text-slate-400"},_e={key:1,class:"text-center py-6 text-slate-400"},Ce=["onClick"],Ue={class:"flex items-center justify-between mb-2"},Se={class:"flex items-center gap-3"},Fe={class:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-primary"},qe={class:"material-symbols-outlined"},Me={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},Re={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},Te={class:"flex items-center justify-between"},je={key:0,class:"mt-2 flex items-center justify-center gap-1 text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-xl w-full"},Pe={key:2,class:"px-4 py-2"},De={class:"flex items-center justify-between mb-3"},Ve={class:"flex flex-col gap-3"},Ee=["onClick"],Le={class:"flex items-center gap-3"},Ae={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},Qe={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},ze={key:3,class:"px-4 py-2"},Oe={class:"flex items-center justify-between mb-3"},Ne={class:"flex flex-col gap-3"},Be={key:0,class:"text-center py-6 text-slate-400"},He={key:1,class:"text-center py-6 text-slate-400"},Ge=["onClick"],Ke={class:"flex items-center gap-3"},Ie={class:"text-text-primary-light dark:text-text-primary-dark text-sm font-semibold"},Je={class:"text-text-secondary-light dark:text-text-secondary-dark text-xs"},We={class:"fixed bottom-0 left-0 right-0 bg-white dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 px-4 pb-6 pt-3 z-50"},Xe={class:"flex justify-around items-center max-w-md mx-auto"},Ye={key:0,class:"space-y-4"},Ze={class:"flex items-center gap-4"},$e={class:"font-bold text-lg"},es={class:"text-slate-500 text-sm"},ss={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},ts={class:"flex justify-between items-center"},os=["href"],ls={key:0,class:"flex justify-between items-center"},rs={class:"flex items-center gap-2"},is={class:"font-semibold"},ns=["href"],ds={key:1,class:"flex justify-between items-center"},as={class:"font-semibold"},us={key:2,class:"flex justify-between items-center"},cs={class:"font-semibold"},ms={key:3,class:"flex justify-between items-center"},ps={class:"font-semibold"},bs={class:"flex justify-between items-center"},xs={class:"flex justify-between items-center"},gs={class:"font-semibold"},fs={class:"space-y-2"},hs={class:"flex gap-2"},vs={key:1,class:"space-y-4"},ws=["value"],ys={class:"grid grid-cols-2 gap-3"},ks={class:"flex gap-2"},_s=["disabled"],Cs={key:0,class:"space-y-4"},Us={class:"flex items-center gap-3"},Ss={class:"p-3 rounded-xl bg-blue-50 text-primary"},Fs={class:"material-symbols-outlined text-2xl"},qs={class:"font-bold text-lg"},Ms={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},Rs={class:"flex justify-between items-center"},Ts={class:"font-semibold"},js={class:"flex justify-between items-center"},Ps=["href"],Ds={class:"flex justify-between items-center"},Vs={class:"font-semibold"},Es={key:0,class:"flex justify-between items-center bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg -mx-2"},Ls={class:"font-bold text-blue-700 dark:text-blue-300"},As={key:1,class:"flex justify-between items-center"},Qs={class:"font-semibold"},zs={key:2,class:"flex justify-between items-center"},Os={class:"font-bold text-green-600"},Ns={key:0,class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4"},Bs={class:"text-slate-800 dark:text-white"},Hs={key:0,class:"space-y-4"},Gs={class:"flex items-center gap-4 justify-center"},Ks={class:"p-4 rounded-2xl bg-orange-50 text-orange-500"},Is={class:"material-symbols-outlined text-4xl"},Js={class:"text-center"},Ws={class:"font-bold text-xl"},Xs={class:"text-slate-500"},Ys={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},Zs={class:"flex justify-between items-center"},$s={class:"flex gap-2"},et={key:1,class:"space-y-4"},st={class:"mt-2 flex items-center gap-2 text-slate-500 text-sm"},tt={class:"material-symbols-outlined text-2xl text-orange-500"},ot={class:"flex items-center gap-2 mb-2"},lt={class:"flex flex-col gap-2"},rt=["onClick"],it={class:"flex gap-2"},nt=["disabled"],dt={key:0,class:"space-y-4"},at={class:"text-center"},ut={class:"font-bold text-xl"},ct={class:"text-slate-500"},mt={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 space-y-3"},pt={class:"flex justify-between items-center"},bt={class:"font-bold"},xt={class:"flex justify-between items-center"},gt={key:0,class:"flex justify-between items-center"},ft=["href"],ht={class:"flex gap-2"},vt={key:1,class:"space-y-4"},wt={class:"flex gap-2"},yt=["disabled"],kt={key:0,class:"space-y-4"},_t={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl flex gap-3 text-blue-800 dark:text-blue-200"},Ct={class:"text-sm"},Ut={class:"font-semibold mb-1"},St={class:"flex gap-2 pt-2"},Ft=["disabled"],qt={key:0,class:"material-symbols-outlined animate-spin text-[18px]"};function Mt(l,s,x,_,t,d){const F=C("Head"),q=C("Toast"),w=C("Modal");return n(),i(b,null,[h(F,{title:"لوحة التحكم - المسؤول"}),h(q),e("div",L,[e("header",A,[e("div",Q,[e("div",z,[e("div",{class:"bg-center bg-no-repeat bg-cover rounded-full size-9 border border-slate-200 dark:border-slate-700 shadow-sm",style:k(`background-image: url('${d.user.photo||"https://ui-avatars.com/api/?name=Admin"}');`)},null,4),s[49]||(s[49]=e("h1",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-bold leading-tight tracking-tight"},"لوحة المسؤول",-1))]),e("form",O,[e("input",{type:"hidden",name:"_token",value:d.csrfToken},null,8,N),s[50]||(s[50]=e("button",{type:"submit",class:"flex items-center justify-center size-10 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-500"},[e("span",{class:"material-symbols-outlined"},"logout")],-1))])])]),e("main",B,[s[80]||(s[80]=e("section",{class:"px-4 pt-6 pb-2"},[e("h2",{class:"text-text-primary-light dark:text-text-primary-dark text-2xl font-bold leading-tight"},"صباح الخير، أدمن."),e("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1"},"هذا ما يحدث اليوم في مجتمعك.")],-1)),e("section",H,[e("div",G,[e("div",{onClick:s[0]||(s[0]=o=>{t.activeSection="users",t.userFilter="inactive"}),class:"relative flex flex-col justify-between gap-3 rounded-xl p-4 bg-white dark:bg-surface-dark shadow-sm border-l-4 border-l-rose-500 border-y border-r border-slate-100 dark:border-slate-800 cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]"},[e("div",K,[s[52]||(s[52]=e("div",{class:"p-2 bg-rose-50 dark:bg-rose-900/20 rounded-lg text-rose-500"},[e("span",{class:"material-symbols-outlined text-xl"},"person_off")],-1)),t.stats.pending_users>0?(n(),i("span",I,[...s[51]||(s[51]=[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"},null,-1),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-rose-500"},null,-1)])])):a("",!0)]),e("div",null,[s[53]||(s[53]=e("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-xs font-medium"},"مستخدمين غير مفعلين",-1)),e("p",J,r(t.stats.pending_users||0),1)])]),e("div",{onClick:s[1]||(s[1]=o=>{t.activeSection="requests",t.requestFilter="pending"}),class:"relative flex flex-col justify-between gap-3 rounded-xl p-4 bg-white dark:bg-surface-dark shadow-sm border-l-4 border-l-amber-500 border-y border-r border-slate-100 dark:border-slate-800 cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]"},[e("div",W,[s[55]||(s[55]=e("div",{class:"p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg text-amber-500"},[e("span",{class:"material-symbols-outlined text-xl"},"hourglass_empty")],-1)),t.stats.pending_requests>0?(n(),i("span",X,[...s[54]||(s[54]=[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"},null,-1),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-amber-500"},null,-1)])])):a("",!0)]),e("div",null,[s[56]||(s[56]=e("p",{class:"text-text-secondary-light dark:text-text-secondary-dark text-xs font-medium"},"طلبات قيد الانتظار",-1)),e("p",Y,r(t.stats.pending_requests||0),1)])])])]),e("section",Z,[e("div",$,[e("button",{onClick:s[2]||(s[2]=o=>t.activeSection="users"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="users"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...s[57]||(s[57]=[e("span",{class:"material-symbols-outlined text-2xl mb-1"},"group",-1),e("span",{class:"text-xs font-bold"},"المستخدمين",-1)])],2),e("button",{onClick:s[3]||(s[3]=o=>t.activeSection="requests"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="requests"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...s[58]||(s[58]=[e("span",{class:"material-symbols-outlined text-2xl mb-1"},"assignment",-1),e("span",{class:"text-xs font-bold"},"الطلبات",-1)])],2),e("button",{onClick:s[4]||(s[4]=o=>t.activeSection="services"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="services"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...s[59]||(s[59]=[e("span",{class:"material-symbols-outlined text-2xl mb-1"},"design_services",-1),e("span",{class:"text-xs font-bold"},"الخدمات",-1)])],2),e("button",{onClick:s[5]||(s[5]=o=>t.activeSection="compounds"),class:u(["flex flex-col items-center justify-center min-w-[80px] p-3 rounded-2xl transition-all duration-200",t.activeSection==="compounds"?"bg-primary text-white shadow-lg shadow-primary/30 scale-105":"bg-white dark:bg-slate-800 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"])},[...s[60]||(s[60]=[e("span",{class:"material-symbols-outlined text-2xl mb-1"},"apartment",-1),e("span",{class:"text-xs font-bold"},"الكمبوندات",-1)])],2)])]),e("section",ee,[e("div",se,[s[61]||(s[61]=e("div",{class:"grid place-items-center h-full w-12 text-slate-400"},[e("span",{class:"material-symbols-outlined"},"search")],-1)),c(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t.searchQuery=o),class:"peer h-full w-full outline-none text-sm text-text-primary-light dark:text-text-primary-dark pl-2 bg-transparent placeholder-slate-400",placeholder:t.activeSection==="users"?"بحث عن مستخدمين...":t.activeSection==="requests"?"بحث عن طلبات...":"بحث عن خدمات...",type:"text"},null,8,te),[[m,t.searchQuery]])])]),t.activeSection==="users"?(n(),i("section",oe,[e("div",le,[s[62]||(s[62]=e("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"قائمة المستخدمين",-1)),e("span",re,r(t.users.length)+" مستخدم",1)]),e("div",ie,[(n(!0),i(b,null,f(t.userFilters,o=>(n(),i("button",{key:o.id,onClick:g=>t.userFilter=o.id,class:u(["shrink-0 h-8 px-4 rounded-full text-xs font-bold shadow-sm transition-colors",t.userFilter===o.id?"bg-primary text-white":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])},r(o.label),11,ne))),128))]),e("div",de,[t.loading?(n(),i("div",ae,[...s[63]||(s[63]=[e("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):t.users.length===0?(n(),i("div",ue,[...s[64]||(s[64]=[e("span",{class:"material-symbols-outlined text-4xl"},"person_off",-1),e("p",{class:"mt-2 text-sm"},"لا يوجد مستخدمين",-1)])])):a("",!0),(n(!0),i(b,null,f(t.users,o=>(n(),i("div",{key:o.id,onClick:g=>d.openUserDetails(o),class:"flex items-center justify-between p-3 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all"},[e("div",me,[e("div",pe,[e("div",{class:"w-10 h-10 rounded-full bg-cover bg-center",style:k(`background-image: url('${o.photo||"https://ui-avatars.com/api/?name="+o.name}');`)},null,4),e("div",{class:u(["absolute bottom-0 right-0 w-3 h-3 border-2 border-white dark:border-surface-dark rounded-full",o.is_active?"bg-green-500":"bg-slate-300"])},null,2)]),e("div",null,[e("p",be,r(o.name),1),e("p",xe,r(o.role==="resident"?"ساكن":o.role==="provider"?"مقدم خدمة":"مسؤول")+" • "+r(o.phone),1)])]),s[65]||(s[65]=e("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],8,ce))),128)),t.nextUsersUrl?(n(),i("button",{key:2,onClick:s[7]||(s[7]=(...o)=>d.loadMoreUsers&&d.loadMoreUsers(...o)),class:"w-full py-3 mt-2 text-primary font-bold text-sm bg-white dark:bg-surface-dark border border-slate-100 dark:border-slate-800 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50"},r(l.loadingMoreUsers?"جاري التحميل...":"عرض المزيد"),1)):a("",!0)])])):a("",!0),t.activeSection==="requests"?(n(),i("section",ge,[e("div",fe,[s[66]||(s[66]=e("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"الطلبات",-1)),e("span",he,r(d.filteredRequests.length)+" طلب",1)]),e("div",ve,[(n(!0),i(b,null,f(t.requestFilters,o=>(n(),i("button",{key:o.id,onClick:g=>t.requestFilter=o.id,class:u(["shrink-0 h-8 px-4 rounded-full text-xs font-bold shadow-sm transition-colors",t.requestFilter===o.id?"bg-primary text-white":"bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"])},r(o.label),11,we))),128))]),e("div",ye,[t.loadingRequests?(n(),i("div",ke,[...s[67]||(s[67]=[e("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):d.filteredRequests.length===0?(n(),i("div",_e,[...s[68]||(s[68]=[e("span",{class:"material-symbols-outlined text-4xl"},"inbox",-1),e("p",{class:"mt-2 text-sm"},"لا توجد طلبات",-1)])])):a("",!0),(n(!0),i(b,null,f(d.filteredRequests,o=>(n(),i("div",{key:o.id,onClick:g=>d.openRequestDetails(o),class:"flex flex-col bg-white dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all"},[e("div",Ue,[e("div",Se,[e("div",Fe,[e("span",qe,r(o.category?.icon||"help"),1)]),e("div",null,[e("p",Me,r(o.category?.name),1),e("p",Re,r(o.resident?.name)+" • "+r(d.formatDate(o.created_at)),1)])]),s[69]||(s[69]=e("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))]),e("div",Te,[e("span",{class:u(["px-2 py-1 rounded-full text-[10px] font-bold",{"bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-300":o.status==="pending","bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300":o.status==="accepted_offer","bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-300":o.status==="in_progress","bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-300":o.status==="completed"}])},r(o.status==="pending"?"انتظار":o.status==="in_progress"?"جاري":o.status==="completed"?"مكتمل":"تم قبول عرض"),3)]),o.delivery_method?(n(),i("div",je,[s[70]||(s[70]=e("span",{class:"material-symbols-outlined text-[16px]"},"directions_car",-1)),e("span",null,r(o.delivery_method),1)])):a("",!0)],8,Ce))),128)),t.nextRequestsUrl?(n(),i("button",{key:2,onClick:s[8]||(s[8]=(...o)=>d.loadMoreRequests&&d.loadMoreRequests(...o)),class:"w-full py-3 mt-2 text-primary font-bold text-sm bg-white dark:bg-surface-dark border border-slate-100 dark:border-slate-800 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50"},r(t.loadingMoreRequests?"جاري التحميل...":"عرض المزيد"),1)):a("",!0)])])):a("",!0),t.activeSection==="services"?(n(),i("section",Pe,[e("div",De,[s[72]||(s[72]=e("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"إدارة الخدمات",-1)),e("button",{onClick:s[9]||(s[9]=(...o)=>d.openAddService&&d.openAddService(...o)),class:"text-primary p-1"},[...s[71]||(s[71]=[e("span",{class:"material-symbols-outlined"},"add",-1)])])]),e("div",Ve,[(n(!0),i(b,null,f(t.services,(o,g)=>(n(),i("div",{key:o.id,onClick:M=>d.openServiceDetails(o),class:u(["flex items-center justify-between p-4 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all",!o.is_active&&"opacity-75"])},[e("div",Le,[e("div",{class:u(["p-2.5 rounded-lg",d.getServiceColor(g)]),style:k(d.getServiceStyle(g))},[e("span",{class:u(["material-symbols-outlined",d.getServiceTextColor(g)])},r(o.icon),3)],6),e("div",null,[e("p",Ae,r(o.name),1),e("p",Qe,r(o.is_active?"نشط":"متوقف مؤقتاً"),1)])]),s[73]||(s[73]=e("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],10,Ee))),128))])])):a("",!0),t.activeSection==="compounds"?(n(),i("section",ze,[e("div",Oe,[s[75]||(s[75]=e("h3",{class:"text-text-primary-light dark:text-text-primary-dark text-lg font-semibold"},"إدارة الكمبوندات",-1)),e("button",{onClick:s[10]||(s[10]=(...o)=>d.openAddCompound&&d.openAddCompound(...o)),class:"text-primary p-1"},[...s[74]||(s[74]=[e("span",{class:"material-symbols-outlined"},"add",-1)])])]),e("div",Ne,[t.loadingCompounds?(n(),i("div",Be,[...s[76]||(s[76]=[e("span",{class:"material-symbols-outlined text-3xl animate-spin"},"progress_activity",-1)])])):t.compounds.length===0?(n(),i("div",He,[...s[77]||(s[77]=[e("span",{class:"material-symbols-outlined text-4xl"},"apartment",-1),e("p",{class:"mt-2 text-sm"},"لا توجد كمبوندات",-1)])])):a("",!0),(n(!0),i(b,null,f(t.compounds,o=>(n(),i("div",{key:o.id,onClick:g=>d.openCompoundDetails(o),class:u(["flex items-center justify-between p-4 bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 active:scale-[0.98] transition-all",!o.is_active&&"opacity-75"])},[e("div",Ke,[s[78]||(s[78]=e("div",{class:"p-2.5 rounded-lg bg-green-50 dark:bg-green-900/20 text-green-600"},[e("span",{class:"material-symbols-outlined"},"apartment")],-1)),e("div",null,[e("p",Ie,r(o.name),1),e("p",Je,r(o.residents_count||0)+" ساكن • "+r(o.is_active?"نشط":"متوقف"),1)])]),s[79]||(s[79]=e("span",{class:"material-symbols-outlined text-slate-400"},"chevron_left",-1))],10,Ge))),128))])])):a("",!0)]),e("nav",We,[e("ul",Xe,[e("li",null,[e("a",{class:u(["flex flex-col items-center gap-1",t.activeSection==="users"||t.activeSection==="requests"||t.activeSection==="services"?"text-primary":"text-slate-400"]),href:"/dashboard"},[...s[81]||(s[81]=[e("span",{class:"material-symbols-outlined text-[26px]"},"dashboard",-1),e("span",{class:"text-[10px] font-medium"},"الرئيسية",-1)])],2)]),s[82]||(s[82]=e("li",null,[e("a",{class:"flex flex-col items-center gap-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",href:"/settings"},[e("span",{class:"material-symbols-outlined text-[26px]"},"settings"),e("span",{class:"text-[10px] font-medium"},"الإعدادات")])],-1))])]),h(w,{show:t.showUserModal,title:t.editingUser?"تعديل المستخدم":t.selectedUser?.name,onClose:s[23]||(s[23]=o=>{t.showUserModal=!1,t.editingUser=!1})},{default:y(()=>[t.selectedUser?(n(),i("div",Ye,[t.editingUser?(n(),i("div",vs,[e("div",null,[s[93]||(s[93]=e("label",{class:"block text-sm font-medium mb-1"},"الاسم",-1)),c(e("input",{"onUpdate:modelValue":s[14]||(s[14]=o=>t.userForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.userForm.name]])]),e("div",null,[s[94]||(s[94]=e("label",{class:"block text-sm font-medium mb-1"},"رقم الهاتف",-1)),c(e("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>t.userForm.phone=o),type:"tel",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.userForm.phone]])]),e("div",null,[s[96]||(s[96]=e("label",{class:"block text-sm font-medium mb-1"},"نوع المستخدم",-1)),c(e("select",{"onUpdate:modelValue":s[16]||(s[16]=o=>t.userForm.role=o),class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},[...s[95]||(s[95]=[e("option",{value:"resident"},"ساكن",-1),e("option",{value:"provider"},"مقدم خدمة",-1),e("option",{value:"admin"},"مسؤول",-1)])],512),[[U,t.userForm.role]])]),t.userForm.role==="resident"?(n(),i(b,{key:0},[e("div",null,[s[98]||(s[98]=e("label",{class:"block text-sm font-medium mb-1"},"الكمبوند",-1)),c(e("select",{"onUpdate:modelValue":s[17]||(s[17]=o=>t.userForm.compound_id=o),class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},[s[97]||(s[97]=e("option",{value:""},"اختر الكمبوند",-1)),(n(!0),i(b,null,f(t.compounds,o=>(n(),i("option",{key:o.id,value:o.id},r(o.name),9,ws))),128))],512),[[U,t.userForm.compound_id]])]),e("div",ys,[e("div",null,[s[99]||(s[99]=e("label",{class:"block text-sm font-medium mb-1"},"رقم المبنى",-1)),c(e("input",{"onUpdate:modelValue":s[18]||(s[18]=o=>t.userForm.block_no=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.userForm.block_no]])]),e("div",null,[s[100]||(s[100]=e("label",{class:"block text-sm font-medium mb-1"},"الدور",-1)),c(e("input",{"onUpdate:modelValue":s[19]||(s[19]=o=>t.userForm.floor=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.userForm.floor]])])]),e("div",null,[s[101]||(s[101]=e("label",{class:"block text-sm font-medium mb-1"},"رقم الشقة",-1)),c(e("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>t.userForm.apt_no=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.userForm.apt_no]])])],64)):a("",!0),e("div",ks,[e("button",{onClick:s[21]||(s[21]=(...o)=>d.saveUser&&d.saveUser(...o)),disabled:t.savingUser,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingUser?"جاري الحفظ...":"حفظ التغييرات"),9,_s),e("button",{onClick:s[22]||(s[22]=o=>t.editingUser=!1),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])])):(n(),i(b,{key:0},[e("div",Ze,[e("div",{class:"w-16 h-16 rounded-full bg-cover bg-center border-2 border-slate-200",style:k(`background-image: url('${t.selectedUser.photo||"https://ui-avatars.com/api/?name="+t.selectedUser.name}');`)},null,4),e("div",null,[e("p",$e,r(t.selectedUser.name),1),e("p",es,r(t.selectedUser.role==="resident"?"ساكن":t.selectedUser.role==="provider"?"مقدم خدمة":"مسؤول"),1)])]),e("div",ss,[e("div",ts,[s[83]||(s[83]=e("span",{class:"text-slate-500 text-sm"},"الهاتف",-1)),e("a",{href:`tel:${t.selectedUser.phone}`,class:"text-primary font-semibold"},r(t.selectedUser.phone),9,os)]),t.selectedUser.role==="resident"?(n(),i(b,{key:0},[t.selectedUser.compound?(n(),i("div",ls,[s[85]||(s[85]=e("span",{class:"text-slate-500 text-sm"},"الكمبوند",-1)),e("div",rs,[e("span",is,r(t.selectedUser.compound.name),1),t.selectedUser.compound.location_url?(n(),i("a",{key:0,href:t.selectedUser.compound.location_url,target:"_blank",class:"text-primary hover:text-primary-dark",title:"الموقع على الخريطة"},[...s[84]||(s[84]=[e("span",{class:"material-symbols-outlined text-lg"},"location_on",-1)])],8,ns)):a("",!0)])])):a("",!0),t.selectedUser.block_no?(n(),i("div",ds,[s[86]||(s[86]=e("span",{class:"text-slate-500 text-sm"},"المبنى",-1)),e("span",as,r(t.selectedUser.block_no),1)])):a("",!0),t.selectedUser.floor?(n(),i("div",us,[s[87]||(s[87]=e("span",{class:"text-slate-500 text-sm"},"الدور",-1)),e("span",cs,r(t.selectedUser.floor),1)])):a("",!0),t.selectedUser.apt_no?(n(),i("div",ms,[s[88]||(s[88]=e("span",{class:"text-slate-500 text-sm"},"رقم الشقة",-1)),e("span",ps,r(t.selectedUser.apt_no),1)])):a("",!0)],64)):a("",!0),e("div",bs,[s[89]||(s[89]=e("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),e("span",{class:u(["font-bold",t.selectedUser.is_active?"text-green-600":"text-red-500"])},r(t.selectedUser.is_active?"مفعل":"غير مفعل"),3)]),e("div",xs,[s[90]||(s[90]=e("span",{class:"text-slate-500 text-sm"},"تاريخ التسجيل",-1)),e("span",gs,r(d.formatDate(t.selectedUser.created_at)),1)])]),e("div",fs,[e("div",hs,[e("button",{onClick:s[11]||(s[11]=(...o)=>d.startEditUser&&d.startEditUser(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...s[91]||(s[91]=[e("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),e("button",{onClick:s[12]||(s[12]=o=>d.toggleUserStatus(t.selectedUser)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedUser.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedUser.is_active?"إيقاف":"تفعيل"),3)]),e("button",{onClick:s[13]||(s[13]=o=>d.openChangePasswordModal(t.selectedUser)),class:"w-full py-3 rounded-xl font-bold bg-amber-500 hover:bg-amber-600 text-white transition-colors"},[...s[92]||(s[92]=[e("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"lock_reset",-1),v(" تغيير كلمة المرور ",-1)])])])],64))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showRequestModal,title:"تفاصيل الطلب",onClose:s[24]||(s[24]=o=>t.showRequestModal=!1)},{default:y(()=>[t.selectedRequest?(n(),i("div",Cs,[e("div",Us,[e("div",Ss,[e("span",Fs,r(t.selectedRequest.category?.icon||"help"),1)]),e("div",null,[e("p",qs,r(t.selectedRequest.category?.name),1),e("span",{class:u(["px-2 py-1 rounded-full text-xs font-bold",{"bg-orange-100 text-orange-600":t.selectedRequest.status==="pending","bg-blue-100 text-blue-600":t.selectedRequest.status==="accepted_offer"||t.selectedRequest.status==="in_progress","bg-green-100 text-green-600":t.selectedRequest.status==="completed"}])},r(t.selectedRequest.status==="pending"?"قيد الانتظار":t.selectedRequest.status==="in_progress"?"جاري التنفيذ":t.selectedRequest.status==="completed"?"مكتمل":"تم قبول عرض"),3)])]),e("div",Ms,[e("div",Rs,[s[102]||(s[102]=e("span",{class:"text-slate-500 text-sm"},"الساكن",-1)),e("span",Ts,r(t.selectedRequest.resident?.name),1)]),e("div",js,[s[103]||(s[103]=e("span",{class:"text-slate-500 text-sm"},"الهاتف",-1)),e("a",{href:`tel:${t.selectedRequest.resident?.phone}`,class:"text-primary font-semibold"},r(t.selectedRequest.resident?.phone),9,Ps)]),e("div",Ds,[s[104]||(s[104]=e("span",{class:"text-slate-500 text-sm"},"تاريخ الطلب",-1)),e("span",Vs,r(d.formatDate(t.selectedRequest.created_at)),1)]),t.selectedRequest.delivery_method?(n(),i("div",Es,[s[105]||(s[105]=e("span",{class:"text-slate-500 dark:text-slate-400 text-sm flex items-center gap-1"},[e("span",{class:"material-symbols-outlined text-base"},"directions_car"),v(" طريقة التقديم ")],-1)),e("span",Ls,r(t.selectedRequest.delivery_method),1)])):a("",!0),t.selectedRequest.accepted_proposal?(n(),i("div",As,[s[106]||(s[106]=e("span",{class:"text-slate-500 text-sm"},"مقدم الخدمة",-1)),e("span",Qs,r(t.selectedRequest.accepted_proposal.provider?.name),1)])):a("",!0),t.selectedRequest.accepted_proposal?(n(),i("div",zs,[s[107]||(s[107]=e("span",{class:"text-slate-500 text-sm"},"السعر",-1)),e("span",Os,r(t.selectedRequest.accepted_proposal.price)+" ج.م",1)])):a("",!0)]),t.selectedRequest.notes?(n(),i("div",Ns,[s[108]||(s[108]=e("p",{class:"text-slate-500 text-sm mb-1"},"ملاحظات",-1)),e("p",Bs,r(t.selectedRequest.notes),1)])):a("",!0)])):a("",!0)]),_:1},8,["show"]),h(w,{show:t.showServiceModal,title:t.editingService?t.selectedService?"تعديل الخدمة":"إضافة خدمة جديدة":t.selectedService?.name,onClose:s[35]||(s[35]=o=>{t.showServiceModal=!1,t.editingService=!1})},{default:y(()=>[t.selectedService||t.editingService?(n(),i("div",Hs,[t.editingService?(n(),i("div",et,[e("div",null,[s[111]||(s[111]=e("label",{class:"block text-sm font-medium mb-1"},"اسم الخدمة",-1)),c(e("input",{"onUpdate:modelValue":s[27]||(s[27]=o=>t.serviceForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800"},null,512),[[m,t.serviceForm.name]])]),e("div",null,[s[113]||(s[113]=e("label",{class:"block text-sm font-medium mb-1"},"الأيقونة (Material Symbol)",-1)),c(e("input",{"onUpdate:modelValue":s[28]||(s[28]=o=>t.serviceForm.icon=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: plumbing, electrical_services"},null,512),[[m,t.serviceForm.icon]]),e("div",st,[e("span",tt,r(t.serviceForm.icon||"help"),1),s[112]||(s[112]=e("span",null,"معاينة الأيقونة",-1))])]),e("div",null,[s[114]||(s[114]=e("label",{class:"block text-sm font-medium mb-1"},"الوصف",-1)),c(e("textarea",{"onUpdate:modelValue":s[29]||(s[29]=o=>t.serviceForm.description=o),rows:"3",class:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 resize-none"},null,512),[[m,t.serviceForm.description]])]),e("div",null,[s[116]||(s[116]=e("label",{class:"block text-sm font-medium mb-1"},"طرق التقديم (Delivery Options)",-1)),e("div",ot,[c(e("input",{"onUpdate:modelValue":s[30]||(s[30]=o=>t.serviceForm.new_delivery_method=o),onKeydown:s[31]||(s[31]=j(S((...o)=>d.addDeliveryMethod&&d.addDeliveryMethod(...o),["prevent"]),["enter"])),type:"text",class:"flex-1 h-10 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm",placeholder:"اكتب واضغط Enter (مثال: زيارة منزلية)"},null,544),[[m,t.serviceForm.new_delivery_method]]),e("button",{onClick:s[32]||(s[32]=S((...o)=>d.addDeliveryMethod&&d.addDeliveryMethod(...o),["prevent"])),class:"h-10 px-4 rounded-xl bg-slate-100 dark:bg-slate-700 font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors"},"إضافة")]),e("div",lt,[(n(!0),i(b,null,f(t.serviceForm.delivery_methods,(o,g)=>(n(),i("div",{key:g,class:"px-4 py-2 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium flex items-center justify-between w-full"},[e("span",null,r(o),1),e("button",{onClick:M=>d.removeDeliveryMethod(g),class:"hover:text-red-500 rounded-full p-1"},[...s[115]||(s[115]=[e("span",{class:"material-symbols-outlined text-lg"},"close",-1)])],8,rt)]))),128))])]),e("div",it,[e("button",{onClick:s[33]||(s[33]=(...o)=>d.saveService&&d.saveService(...o)),disabled:t.savingService,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingService?"جاري الحفظ...":"حفظ التغييرات"),9,nt),e("button",{onClick:s[34]||(s[34]=o=>t.editingService=!1),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])])):(n(),i(b,{key:0},[e("div",Gs,[e("div",Ks,[e("span",Is,r(t.selectedService.icon),1)])]),e("div",Js,[e("p",Ws,r(t.selectedService.name),1),e("p",Xs,r(t.selectedService.description||"خدمة متوفرة في التطبيق"),1)]),e("div",Ys,[e("div",Zs,[s[109]||(s[109]=e("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),e("span",{class:u(["font-bold",t.selectedService.is_active?"text-green-600":"text-red-500"])},r(t.selectedService.is_active?"نشط":"متوقف"),3)])]),e("div",$s,[e("button",{onClick:s[25]||(s[25]=(...o)=>d.startEditService&&d.startEditService(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...s[110]||(s[110]=[e("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),e("button",{onClick:s[26]||(s[26]=o=>d.toggleServiceStatus(t.selectedService)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedService.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedService.is_active?"إيقاف":"تفعيل"),3)])],64))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showCompoundModal,title:t.editingCompound?t.selectedCompound?.id?"تعديل الكمبوند":"إضافة كمبوند جديد":t.selectedCompound?.name,onClose:s[43]||(s[43]=o=>{t.showCompoundModal=!1,t.editingCompound=!1})},{default:y(()=>[t.selectedCompound||t.editingCompound?(n(),i("div",dt,[!t.editingCompound&&t.selectedCompound?(n(),i(b,{key:0},[s[122]||(s[122]=e("div",{class:"flex items-center gap-4 justify-center"},[e("div",{class:"p-4 rounded-2xl bg-green-50 text-green-600"},[e("span",{class:"material-symbols-outlined text-4xl"},"apartment")])],-1)),e("div",at,[e("p",ut,r(t.selectedCompound.name),1),e("p",ct,r(t.selectedCompound.address||"لا يوجد عنوان"),1)]),e("div",mt,[e("div",pt,[s[117]||(s[117]=e("span",{class:"text-slate-500 text-sm"},"عدد السكان",-1)),e("span",bt,r(t.selectedCompound.residents_count||0),1)]),e("div",xt,[s[118]||(s[118]=e("span",{class:"text-slate-500 text-sm"},"الحالة",-1)),e("span",{class:u(["font-bold",t.selectedCompound.is_active?"text-green-600":"text-red-500"])},r(t.selectedCompound.is_active?"نشط":"متوقف"),3)]),t.selectedCompound.location_url?(n(),i("div",gt,[s[120]||(s[120]=e("span",{class:"text-slate-500 text-sm"},"الموقع",-1)),e("a",{href:t.selectedCompound.location_url,target:"_blank",class:"text-primary font-semibold flex items-center gap-1"},[...s[119]||(s[119]=[e("span",{class:"material-symbols-outlined text-lg"},"location_on",-1),v(" فتح في الخريطة ",-1)])],8,ft)])):a("",!0)]),e("div",ht,[e("button",{onClick:s[36]||(s[36]=(...o)=>d.startEditCompound&&d.startEditCompound(...o)),class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},[...s[121]||(s[121]=[e("span",{class:"material-symbols-outlined text-lg align-middle ml-1"},"edit",-1),v(" تعديل ",-1)])]),e("button",{onClick:s[37]||(s[37]=o=>d.toggleCompoundStatus(t.selectedCompound)),class:u(["flex-1 py-3 rounded-xl font-bold text-white",t.selectedCompound.is_active?"bg-red-500":"bg-green-500"])},r(t.selectedCompound.is_active?"إيقاف":"تفعيل"),3)])],64)):(n(),i("div",vt,[e("div",null,[s[123]||(s[123]=e("label",{class:"block text-sm font-medium mb-1"},"اسم الكمبوند",-1)),c(e("input",{"onUpdate:modelValue":s[38]||(s[38]=o=>t.compoundForm.name=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: مدينتي"},null,512),[[m,t.compoundForm.name]])]),e("div",null,[s[124]||(s[124]=e("label",{class:"block text-sm font-medium mb-1"},"العنوان",-1)),c(e("input",{"onUpdate:modelValue":s[39]||(s[39]=o=>t.compoundForm.address=o),type:"text",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"مثال: القاهرة الجديدة"},null,512),[[m,t.compoundForm.address]])]),e("div",null,[s[125]||(s[125]=e("label",{class:"block text-sm font-medium mb-1"},"رابط Google Maps",-1)),c(e("input",{"onUpdate:modelValue":s[40]||(s[40]=o=>t.compoundForm.location_url=o),type:"url",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",placeholder:"https://maps.google.com/...",dir:"ltr"},null,512),[[m,t.compoundForm.location_url]])]),e("div",wt,[e("button",{onClick:s[41]||(s[41]=(...o)=>d.saveCompound&&d.saveCompound(...o)),disabled:t.savingCompound,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white"},r(t.savingCompound?"جاري الحفظ...":t.selectedCompound?.id?"حفظ التغييرات":"إضافة الكمبوند"),9,yt),e("button",{onClick:s[42]||(s[42]=o=>{t.editingCompound=!1,t.showCompoundModal=!1}),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"},"إلغاء")])]))])):a("",!0)]),_:1},8,["show","title"]),h(w,{show:t.showPasswordModal,title:"تغيير كلمة المرور",onClose:s[48]||(s[48]=o=>t.showPasswordModal=!1)},{default:y(()=>[t.passwordChangeUser?(n(),i("div",kt,[e("div",_t,[s[127]||(s[127]=e("span",{class:"material-symbols-outlined text-2xl flex-shrink-0"},"info",-1)),e("div",Ct,[e("p",Ut,"تغيير كلمة المرور لـ: "+r(t.passwordChangeUser.name),1),s[126]||(s[126]=e("p",{class:"text-xs opacity-80"},"سيتم تحديث كلمة المرور فوراً وسيحتاج المستخدم لاستخدام الكلمة الجديدة عند تسجيل الدخول.",-1))])]),e("div",null,[s[128]||(s[128]=e("label",{class:"block text-sm font-medium mb-2"},"كلمة المرور الجديدة",-1)),c(e("input",{"onUpdate:modelValue":s[44]||(s[44]=o=>t.newPassword=o),type:"password",placeholder:"أدخل كلمة المرور الجديدة",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[m,t.newPassword]])]),e("div",null,[s[129]||(s[129]=e("label",{class:"block text-sm font-medium mb-2"},"تأكيد كلمة المرور",-1)),c(e("input",{"onUpdate:modelValue":s[45]||(s[45]=o=>t.confirmPassword=o),type:"password",placeholder:"أعد إدخال كلمة المرور",class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[m,t.confirmPassword]])]),e("div",St,[e("button",{onClick:s[46]||(s[46]=(...o)=>d.changeUserPassword&&d.changeUserPassword(...o)),disabled:t.changingPassword||!t.newPassword||t.newPassword!==t.confirmPassword,class:"flex-1 py-3 rounded-xl font-bold bg-primary text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[t.changingPassword?(n(),i("span",qt,"progress_activity")):a("",!0),e("span",null,r(t.changingPassword?"جاري التحديث...":"تحديث كلمة المرور"),1)],8,Ft),e("button",{onClick:s[47]||(s[47]=o=>{t.showPasswordModal=!1,t.newPassword="",t.confirmPassword=""}),class:"flex-1 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}," إلغاء ")])])):a("",!0)]),_:1},8,["show"])])],64)}const Pt=R(E,[["render",Mt],["__scopeId","data-v-1deb7db3"]]);export{Pt as default};
